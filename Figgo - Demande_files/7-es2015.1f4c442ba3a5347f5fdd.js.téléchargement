(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"0N9+":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL");class r{}r.\u0275mod=i.gc({type:r}),r.\u0275inj=i.fc({factory:function(e){return new(e||r)},imports:[[]]})},"17KV":function(e,t,n){"use strict";n.d(t,"a",function(){return Fe});var i=n("/BaH"),r=n("EeD1"),o=n("K9T6"),s=n("EB94"),c=n("LvDl"),a=n("wd/R"),l=n("2Vo4"),u=n("cp0P"),d=n("jvhw");function p(e){switch(e){case d.a.PendingApproval:return"Figgo.LeavesHistory.STATE_PENDING_APPROVAL_LABEL";case d.a.Confirmed:return"Figgo.LeavesHistory.STATE_CONFIRMED_LABEL";case d.a.Denied:return"Figgo.LeavesHistory.STATE_DENIED_LABEL";case d.a.PendingCancellation:return"Figgo.LeavesHistory.STATE_PENDING_CANCELLATION_LABEL";case d.a.Cancelled:return"Figgo.LeavesHistory.STATE_CANCELLED_LABEL"}}var h=n("ZxDp"),f=n("lJxs"),g=n("fXoL"),b=n("tk/3");class v{constructor(e){this.httpClient=e,this.API_VERSION="v1.0",this.baseUrl="/figgo/api/leavePeriods/"+this.API_VERSION}getAll(e){const t=e.accountIds&&e.accountIds.length>0?"&accountIds="+e.accountIds:"",n=e.categoryIds&&e.categoryIds.length>0?"&categoryIds="+e.categoryIds:"",i=e.states&&e.states.length>0?"&states="+e.states:"";return this.httpClient.get(`${this.baseUrl}/history?ownerId=${e.ownerId}&startsOn=${e.period.startsOn}&endsOn=${e.period.endsOn}${t}${n}${i}`).pipe(Object(f.a)(e=>h.a.fromJson(e)))}getDetails(e){return this.httpClient.get(`${this.baseUrl}/${e}/details`).pipe(Object(f.a)(e=>{var t;return[Object.assign(Object.assign({},e.data),{timeline:null===(t=e.data.timeline)||void 0===t?void 0:t.reverse()}),e.authorizedActions]}))}getOwnerPeriods(e){return this.httpClient.get(`${this.baseUrl}/history/years?ownerId=${e}`).pipe(Object(f.a)(e=>e))}getOwnerAccounts(e){return this.httpClient.get(`${this.baseUrl}/history/accounts?ownerId=${e}`).pipe(Object(f.a)(e=>e))}attachFile(e,t){return this.httpClient.post(`/api/v3/leavePeriods/${e}/attachment`,{fileRef:t.id,fileName:t.name})}deleteAttachment(e){return this.httpClient.delete(`/api/v3/leavePeriods/${e}/attachment`)}getExportUrl(e){const t=e.accountIds&&e.accountIds.length>0?"&accountIds="+e.accountIds:"",n=e.categoryIds&&e.categoryIds.length>0?"&categoryIds="+e.categoryIds:"",i=e.states&&e.states.length>0?"&states="+e.states:"";return`${this.baseUrl}/history/excel?ownerId=${e.ownerId}&startsOn=${e.period.startsOn}&endsOn=${e.period.endsOn}${t}${n}${i}`}}v.\u0275fac=function(e){return new(e||v)(g.sc(b.b))},v.\u0275prov=g.ec({token:v,factory:v.\u0275fac,providedIn:"root"});var y=n("sYmb"),m=n("ofXK"),L=n("XNkp"),P=n("3Pt+"),S=n("d5vQ"),_=n("v3UZ"),E=n("jVAw"),A=n("qX0P"),I=n("QeNy"),O=n("4ik+"),T=n("ObND"),w=n("Bfh6"),j=n("V8fx");function C(e){switch(e){case w.e.BusinessDay:return"Figgo.LeavesHistory.UNIT_BUSINESS_DAY_LABEL";case w.e.Calendar:return"Figgo.LeavesHistory.UNIT_CALENDAR_LABEL";case w.e.Hour:return"Figgo.LeavesHistory.UNIT_HOUR_LABEL";case w.e.WorkingDay:return"Figgo.LeavesHistory.UNIT_WORKING_DAY_LABEL"}}var F=n("Qrql"),D=n("v2HK"),B=n("Y/4g");function H(e,t){if(1&e){const e=g.pc();g.oc(0,"a",4),g.vc("click",function(t){g.Tc(e);const n=g.zc();return n.openFile(t,n.fileUrl)}),g.gd(1),g.nc()}if(2&e){const e=g.zc();g.Gc("href",e.fileUrl,g.Wc)("luTooltip",e.importFile.name)("luTooltipDisabled",e.importFile.name===e.displayAttachmentName(e.importFile.name)),g.Wb(1),g.id(" ",e.displayAttachmentName(e.importFile.name),"\n")}}function W(e,t){1&e&&g.jc(0,"span",5)}class M extends F.a{constructor(){super(...arguments),this.uploadType=F.b.Temp}displayAttachmentName(e){if(!e)return"";if(e.length<20)return e;const t=e.split(".");if(1===t.length)return t[0].slice(0,10)+"[...]";const n=t.pop();return`${t.join(".").slice(0,5)}[...].${n}`}openFile(e,t){console.log(e),0===e.button&&t&&(window.location.href=t)}}M.\u0275fac=function(e){return x(e||M)},M.\u0275cmp=g.cc({type:M,selectors:[["app-leaves-history-table-line-attachment"]],features:[g.Vb([{provide:P.p,useExisting:Object(g.ob)(()=>M),multi:!0}]),g.Tb],decls:4,vars:2,consts:[["app-click-stop-propagation","",3,"href","luTooltip","luTooltipDisabled","click",4,"ngIf"],["class","loading",4,"ngIf"],["type","file",1,"file-input","mod-hidden",3,"click","change"],["fileInput",""],["app-click-stop-propagation","",3,"href","luTooltip","luTooltipDisabled","click"],[1,"loading"]],template:function(e,t){1&e&&(g.ed(0,H,2,4,"a",0),g.ed(1,W,1,0,"span",1),g.oc(2,"input",2,3),g.vc("click",function(e){return e.stopPropagation()})("change",function(e){return t.onFileChoosenFromFileSelector(e)}),g.nc()),2&e&&(g.Gc("ngIf",t.currentUploadFileState===t.UploadFileState.isFileUploaded),g.Wb(1),g.Gc("ngIf",t.currentUploadFileState===t.UploadFileState.isUploadingFile))},directives:[m.q,D.a,B.b],styles:[""]});const x=g.qc(M);var G=n("dpuF"),N=n("SnvI"),U=n("GIMd"),k=n("qF0L");function R(e,t){if(1&e){const e=g.pc();g.oc(0,"div",21),g.vc("click",function(){g.Tc(e);return g.zc().removeAttachment()}),g.jc(1,"span",22),g.gd(2,"\xa0"),g.jc(3,"span",23),g.nc()}}function $(e,t){1&e&&g.jc(0,"span",24)}function z(e,t){1&e&&g.jc(0,"div",25)}function Y(e,t){if(1&e&&g.jc(0,"div",26),2&e){const e=g.zc();g.Gc("translatePluralValue",e.historyLeavePeriod.numberOfDaysBetweenCreationAndStart)}}function X(e,t){if(1&e&&g.jc(0,"div",27),2&e){const e=g.zc();g.Gc("translatePluralValue",-e.historyLeavePeriod.numberOfDaysBetweenCreationAndStart)}}function q(e,t){if(1&e&&(g.oc(0,"div"),g.gd(1),g.jc(2,"span",28),g.nc()),2&e){const e=t.$implicit,n=g.zc();g.Wb(1),g.id(" ",e.account.name," "),g.Wb(1),g.Gc("translatePlural",n.leavePeriodUnitTranslateKey(e.account.unit))("translatePluralValue",e.distribution)}}function K(e,t){if(1&e&&(g.oc(0,"button",29),g.jc(1,"span",30),g.jc(2,"span",31),g.nc()),2&e){g.zc();const e=g.Pc(1);g.Gc("luPopover",e)}}function V(e,t){1&e&&g.jc(0,"div",36)}function Q(e,t){if(1&e&&g.jc(0,"app-leave-period-timeline",42),2&e){const e=g.zc(3);g.Gc("expectedApprovalDetails",e.historyLeavePeriodDetails)}}function J(e,t){if(1&e&&(g.oc(0,"b",47),g.gd(1),g.nc()),2&e){const e=g.zc().$implicit,t=g.zc(3);g.Wb(1),g.hd(null==t.accountById[e.leaveAccountId]?null:t.accountById[e.leaveAccountId].name)}}function Z(e,t){if(1&e&&(g.oc(0,"div",43),g.oc(1,"div",44),g.jc(2,"span",45),g.nc(),g.ed(3,J,2,1,"b",46),g.gd(4),g.nc()),2&e){const e=t.$implicit;g.Wb(3),g.Gc("ngIf",e.leaveAccountId),g.Wb(1),g.id(" ",e.message," ")}}function ee(e,t){if(1&e&&(g.oc(0,"div"),g.gd(1),g.oc(2,"span",11),g.gd(3),g.Ac(4,"timeUnit"),g.nc(),g.nc()),2&e){const e=t.$implicit;g.Wb(1),g.id(" ",e.account.name," "),g.Wb(2),g.jd(" (",e.distribution,"",g.Dc(4,3,e.distribution,0,!0),")")}}function te(e,t){if(1&e&&(g.oc(0,"div",48),g.jc(1,"h4",49),g.ed(2,ee,5,7,"div",16),g.nc()),2&e){const e=g.zc(3);g.Wb(2),g.Gc("ngForOf",e.historyLeavePeriod.initialAccountDistributions)}}function ne(e,t){1&e&&(g.oc(0,"div",50),g.oc(1,"div",44),g.jc(2,"span",51),g.nc(),g.gd(3),g.Ac(4,"translate"),g.nc()),2&e&&(g.Wb(3),g.id(" ",g.Bc(4,1,"Figgo.LeavesHistory.APPROVAL_DETAILS_MISSING_RIGHTS")," "))}function ie(e,t){if(1&e&&(g.oc(0,"div",37),g.ed(1,Q,1,1,"app-leave-period-timeline",38),g.ed(2,Z,5,2,"div",39),g.ed(3,te,3,1,"div",40),g.ed(4,ne,5,3,"div",41),g.nc()),2&e){const e=g.zc(2);g.Wb(1),g.Gc("ngIf",!!e.historyLeavePeriodDetails&&!!e.historyLeavePeriodDetails.timeline),g.Wb(1),g.Gc("ngForOf",e.historyLeavePeriodDetails.warnings),g.Wb(1),g.Gc("ngIf",!!e.historyLeavePeriodDetails&&e.historyLeavePeriod.initialAccountDistributions),g.Wb(1),g.Gc("ngIf",!!e.historyLeavePeriodDetails&&!e.historyLeavePeriodDetails.timeline)}}function re(e,t){if(1&e&&(g.oc(0,"tr"),g.oc(1,"td",32),g.oc(2,"div",33),g.ed(3,V,1,0,"div",34),g.ed(4,ie,5,4,"div",35),g.nc(),g.nc(),g.nc()),2&e){const e=g.zc();g.Wb(3),g.Gc("ngIf",!!e.loadLeavePeriodSubscription),g.Wb(1),g.Gc("ngIf",!e.loadLeavePeriodSubscription)}}const oe=function(e){return{name:e}};class se{constructor(e,t){this.popup=e,this.historyLeavePeriodService=t,this.leavePeriodStateTranslateKey=p,this.leavePeriodUnitTranslateKey=C,this.refresh=new g.u,this.historyLeavePeriodDetails=null}ngOnInit(){var e;this.attachment=this.historyLeavePeriod.attachment?Object.assign({},this.historyLeavePeriod.attachment):void 0;const t=c.chain(null!==(e=this.historyLeavePeriod.initialAccountDistributions)&&void 0!==e?e:this.historyLeavePeriod.accountDistributions).map(e=>e.account).uniqBy(e=>e.id).sortBy(e=>e.name).value();this.accountById=c.keyBy(t,e=>e.id)}selectLeavePeriod(){var e;this.historyLeavePeriodDetails||this.loadLeavePeriodSubscription?(this.historyLeavePeriodDetails=null,null===(e=this.loadLeavePeriodSubscription)||void 0===e||e.unsubscribe(),this.loadLeavePeriodSubscription=null):this.loadLeavePeriodSubscription=this.historyLeavePeriodService.getDetails(this.historyLeavePeriod.leavePeriodId).subscribe(([e,t])=>{this.historyLeavePeriodDetails=e,this.loadLeavePeriodSubscription=null})}ngOnDestroy(){var e;null===(e=this.loadLeavePeriodSubscription)||void 0===e||e.unsubscribe()}selectAttachment(){this.attachmentSelector.openFileSelector()}removeAttachment(){this.popup.open(j.a,null,{size:"small"}).onClose.subscribe(()=>{this.attachmentSelector.removeFile()})}fileChanged(e){var t,n;if((null===(t=this.historyLeavePeriod.attachment)||void 0===t?void 0:t.id)===(null==e?void 0:e.id)||!this.canEditAttachment)return;null===(n=this.uploadFileSubscription)||void 0===n||n.unsubscribe();const i=e?this.historyLeavePeriodService.attachFile(this.historyLeavePeriod.leavePeriodId,e):this.historyLeavePeriodService.deleteAttachment(this.historyLeavePeriod.leavePeriodId);this.uploadFileSubscription=i.subscribe(t=>{t?(this.historyLeavePeriod.attachmentId=t.justificationId,this.historyLeavePeriod.attachment={id:t.justificationId,name:e.name},setTimeout(()=>{this.attachment=Object.assign(Object.assign({},e),this.historyLeavePeriod.attachment)})):(this.historyLeavePeriod.attachmentId=void 0,this.historyLeavePeriod.attachment=void 0)})}getDuration(e){return e.duration?e.duration:e.initialAccountDistributions.reduce((e,t)=>e+t.distribution,0)}getTimeUnit(e){var t;return(null===(t=e.accountDistributions[0])||void 0===t?void 0:t.account.unit)===w.e.Hour?T.a.Hour:T.a.Day}}function ce(e,t){1&e&&g.jc(0,"div",4)}function ae(e,t){1&e&&(g.oc(0,"section",5),g.jc(1,"img",6),g.jc(2,"p",7),g.nc())}function le(e,t){1&e&&(g.oc(0,"tbody",23),g.oc(1,"tr",24),g.jc(2,"td"),g.oc(3,"td",25),g.jc(4,"span",26),g.nc(),g.nc(),g.nc())}function ue(e,t){1&e&&(g.oc(0,"tbody",23),g.oc(1,"tr",24),g.jc(2,"td"),g.oc(3,"td",25),g.jc(4,"span",27),g.nc(),g.nc(),g.nc())}function de(e,t){if(1&e){const e=g.pc();g.mc(0),g.ed(1,le,5,0,"tbody",21),g.ed(2,ue,5,0,"tbody",21),g.oc(3,"tbody",22),g.vc("refresh",function(){g.Tc(e);return g.zc(2).refresh()}),g.nc(),g.lc()}if(2&e){const e=t.$implicit,n=g.zc(2);g.Wb(1),g.Gc("ngIf",e.leavePeriodId===n.firstFutureLeavePeriodId),g.Wb(1),g.Gc("ngIf",e.leavePeriodId===n.firstPastLeavePeriodId),g.Wb(1),g.Gc("historyLeavePeriod",e)("canEditAttachment",!!n.authorizedActions.attachment&&n.authorizedActions.attachment.includes(e.type))}}function pe(e,t){if(1&e&&(g.oc(0,"table",8),g.oc(1,"thead",9),g.oc(2,"tr",10),g.jc(3,"th",11),g.jc(4,"th",12),g.jc(5,"th",13),g.jc(6,"th",14),g.jc(7,"th",15),g.jc(8,"th",16),g.jc(9,"th",17),g.jc(10,"th",18),g.jc(11,"th",19),g.nc(),g.nc(),g.ed(12,de,4,4,"ng-container",20),g.nc()),2&e){const e=g.zc();g.Wb(12),g.Gc("ngForOf",e.leavePeriodsHistory)}}se.\u0275fac=function(e){return new(e||se)(g.ic(s.c),g.ic(v))},se.\u0275cmp=g.cc({type:se,selectors:[["","app-leaves-history-table-line",""]],viewQuery:function(e,t){if(1&e&&g.ld(M,!0),2&e){let e;g.Oc(e=g.wc())&&(t.attachmentSelector=e.first)}},inputs:{historyLeavePeriod:"historyLeavePeriod",canEditAttachment:"canEditAttachment"},outputs:{refresh:"refresh"},attrs:["app-leaves-history-table-line",""],decls:39,vars:34,consts:[["close-on-click","true","panel-classes","figgo-app popover-menu mod-lucca-icon"],["moreOnHistoryLeavePopover",""],[1,"popover-menu-item","u-paddingLeftSmaller",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-attach"],["translate","Figgo.LeavesHistory.SELECT_ATTACHMENT_BUTTON"],["class","popover-menu-item u-paddingLeftSmaller u-textError",3,"click",4,"ngIf"],[1,"table-body-row",3,"click"],[1,"table-body-row-cell","table-body-row-cellIcon"],["class","lucca-icon u-textWarning icon-warning","aria-hidden","true",4,"ngIf"],[1,"table-body-row-cell"],[1,"u-textSmall","u-textLight",3,"translate"],[1,"u-textSmall","u-textLight"],["translate","Figgo.LeavesHistory.REQUEST_SAME_DAY_LABEL",4,"ngIf"],["translatePlural","Figgo.LeavesHistory.REQUEST_BEFORE_LABEL",3,"translatePluralValue",4,"ngIf"],["translatePlural","Figgo.LeavesHistory.REQUEST_AFTER_LABEL",3,"translatePluralValue",4,"ngIf"],["translate","Figgo.LeavesHistory.STATUS_USER_LABEL",1,"u-textSmall","u-textLight",3,"translateParams"],[4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"table-body-row-cell","mod-actions"],["class","actionIcon","app-click-stop-propagation","","luPopoverTrigger","click","luPopoverAlignment","right",3,"luPopover",4,"ngIf"],[4,"ngIf"],[1,"popover-menu-item","u-paddingLeftSmaller","u-textError",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-trash"],["translate","Figgo.LeavesHistory.DELETE_ATTACHMENT_BUTTON"],["aria-hidden","true",1,"lucca-icon","u-textWarning","icon-warning"],["translate","Figgo.LeavesHistory.REQUEST_SAME_DAY_LABEL"],["translatePlural","Figgo.LeavesHistory.REQUEST_BEFORE_LABEL",3,"translatePluralValue"],["translatePlural","Figgo.LeavesHistory.REQUEST_AFTER_LABEL",3,"translatePluralValue"],[1,"u-textSmall","u-textLight",3,"translatePlural","translatePluralValue"],["app-click-stop-propagation","","luPopoverTrigger","click","luPopoverAlignment","right",1,"actionIcon",3,"luPopover"],["aria-hidden","true",1,"lucca-icon","icon-ellipsis"],["translate","Figgo.IconMask.OPTIONS",1,"u-mask"],["colspan","9"],[1,"timeline"],["class","loading mod-block",4,"ngIf"],["class","timeline-content",4,"ngIf"],[1,"loading","mod-block"],[1,"timeline-content"],[3,"expectedApprovalDetails",4,"ngIf"],["class","callout mod-icon palette-warning",4,"ngFor","ngForOf"],["class","u-paddingBottomSmall",4,"ngIf"],["class","callout mod-icon palette-primary u-marginTopSmall",4,"ngIf"],[3,"expectedApprovalDetails"],[1,"callout","mod-icon","palette-warning"],[1,"callout-icon"],["aria-hidden","true",1,"lucca-icon","icon-warning"],["class","callout-title",4,"ngIf"],[1,"callout-title"],[1,"u-paddingBottomSmall"],["translate","Figgo.LeavesHistory.INITIAL_DISTRIBUTION_LABEL"],[1,"callout","mod-icon","palette-primary","u-marginTopSmall"],["aria-hidden","true",1,"lucca-icon","icon-info"]],template:function(e,t){1&e&&(g.oc(0,"lu-popover",0,1),g.oc(2,"div",2),g.vc("click",function(){return t.selectAttachment()}),g.jc(3,"span",3),g.gd(4,"\xa0"),g.jc(5,"span",4),g.nc(),g.ed(6,R,4,0,"div",5),g.nc(),g.oc(7,"tr",6),g.vc("click",function(){return t.selectLeavePeriod()}),g.oc(8,"td",7),g.ed(9,$,1,0,"span",8),g.nc(),g.oc(10,"td",9),g.gd(11),g.Ac(12,"date"),g.jc(13,"div",10),g.nc(),g.oc(14,"td",9),g.gd(15),g.Ac(16,"date"),g.jc(17,"div",10),g.nc(),g.oc(18,"td",9),g.gd(19),g.Ac(20,"timeUnit"),g.nc(),g.oc(21,"td",9),g.gd(22),g.Ac(23,"date"),g.oc(24,"div",11),g.ed(25,z,1,0,"div",12),g.ed(26,Y,1,1,"div",13),g.ed(27,X,1,1,"div",14),g.nc(),g.nc(),g.oc(28,"td",9),g.gd(29),g.Ac(30,"translate"),g.jc(31,"div",15),g.nc(),g.oc(32,"td",9),g.ed(33,q,3,3,"div",16),g.nc(),g.oc(34,"td",9),g.oc(35,"app-leaves-history-table-line-attachment",17),g.vc("ngModelChange",function(e){return t.attachment=e})("ngModelChange",function(){return t.fileChanged(t.attachment)}),g.nc(),g.nc(),g.oc(36,"td",18),g.ed(37,K,3,1,"button",19),g.nc(),g.nc(),g.ed(38,re,5,2,"tr",20)),2&e&&(g.Wb(6),g.Gc("ngIf",!!t.historyLeavePeriod.attachment),g.Wb(3),g.Gc("ngIf",t.historyLeavePeriod.hasWarnings),g.Wb(2),g.id(" ",g.Cc(12,18,t.historyLeavePeriod.startsOn,"shortDate")," "),g.Wb(2),g.Gc("translate",t.historyLeavePeriod.startsAm?"Figgo.LeavesHistory.STARTS_MORNING_LABEL":"Figgo.LeavesHistory.STARTS_AFTERNOON_LABEL"),g.Wb(2),g.id(" ",g.Cc(16,21,t.historyLeavePeriod.endsOn,"shortDate")," "),g.Wb(2),g.Gc("translate",t.historyLeavePeriod.endsAm?"Figgo.LeavesHistory.STARTS_MORNING_LABEL":"Figgo.LeavesHistory.STARTS_AFTERNOON_LABEL"),g.Wb(2),g.jd(" ",t.getDuration(t.historyLeavePeriod)," ",g.Cc(20,24,t.getDuration(t.historyLeavePeriod),t.getTimeUnit(t.historyLeavePeriod))," "),g.Wb(3),g.id(" ",g.Cc(23,27,t.historyLeavePeriod.createdAt,"shortDate")," "),g.Wb(3),g.Gc("ngIf",0==t.historyLeavePeriod.numberOfDaysBetweenCreationAndStart),g.Wb(1),g.Gc("ngIf",t.historyLeavePeriod.numberOfDaysBetweenCreationAndStart>0),g.Wb(1),g.Gc("ngIf",t.historyLeavePeriod.numberOfDaysBetweenCreationAndStart<0),g.Wb(2),g.id(" ",g.Bc(30,30,t.leavePeriodStateTranslateKey(t.historyLeavePeriod.state))," "),g.Wb(2),g.Gc("translateParams",g.Kc(32,oe,t.historyLeavePeriod.statusUser.name)),g.Wb(2),g.Gc("ngForOf",t.historyLeavePeriod.accountDistributions.length>0?t.historyLeavePeriod.accountDistributions:t.historyLeavePeriod.initialAccountDistributions),g.Wb(2),g.Gc("ngModel",t.attachment),g.Wb(2),g.Gc("ngIf",t.canEditAttachment),g.Wb(1),g.Gc("ngIf",!!t.loadLeavePeriodSubscription||!!t.historyLeavePeriodDetails))},directives:[G.d,y.a,m.q,m.p,M,P.r,P.u,N.a,D.a,G.f,U.a],pipes:[m.e,k.a,y.c],styles:[".timeline[_ngcontent-%COMP%]{padding:0 1.5rem}.timeline-content[_ngcontent-%COMP%]{width:100%;padding:.5rem 1.5rem;border-radius:5px;background:#f7f9fd}.table-body-row[_ngcontent-%COMP%]:last-child   .table-body-row-cell[_ngcontent-%COMP%]{border-bottom:none}"]});class he{constructor(e){this.historyLeavePeriodService=e,this.currentLeavePeriodId=null,this.isLoading=!1}ngOnInit(){this.querySubscription=this.querySubject.pipe(Object(O.filter)(e=>!!e)).subscribe(e=>{this.query=e,this.refresh()})}refresh(){this.isLoading=!0,this.historyLeavePeriodService.getAll(this.query).subscribe(e=>{var t;this.authorizedActions=e.authorizedActions,this.leavePeriodsHistory=e.items,this.leavePeriodsHistory.forEach(e=>{e.duration=e.accountDistributions.reduce((e,t)=>e+t.distribution,0)}),a(this.query.period.startsOn)<a()&&a()<a(this.query.period.endsOn)?(this.firstPastLeavePeriodId=null===(t=this.leavePeriodsHistory.find(e=>this.isPastLeavePeriod(e)))||void 0===t?void 0:t.leavePeriodId,this.firstFutureLeavePeriodId=this.leavePeriodsHistory[0]&&!this.isPastLeavePeriod(this.leavePeriodsHistory[0])?this.leavePeriodsHistory[0].leavePeriodId:null):(this.firstPastLeavePeriodId=null,this.firstFutureLeavePeriodId=null),this.isLoading=!1})}isPastLeavePeriod(e){return a(e.startsOn).isSameOrBefore(a())}ngOnDestroy(){this.querySubscription&&this.querySubscription.unsubscribe()}}he.\u0275fac=function(e){return new(e||he)(g.ic(v))},he.\u0275cmp=g.cc({type:he,selectors:[["app-leaves-history-table"]],inputs:{ownerId:"ownerId",querySubject:"querySubject"},decls:4,vars:3,consts:[[1,"mod-lucca-icon",2,"color-adjust","exact","-webkit-print-color-adjust","exact"],["class","loading mod-dialog",4,"ngIf"],["class","emptyState dialog-content u-paddingTopReset u-paddingBottomReset u-animatedFadeIn",4,"ngIf"],["class","table mod-clickable mod-card",4,"ngIf"],[1,"loading","mod-dialog"],[1,"emptyState","dialog-content","u-paddingTopReset","u-paddingBottomReset","u-animatedFadeIn"],["src","assets/placeholder_calendar.svg"],["translate","Figgo.LeavesHistory.LEAVES_HISTORY_EMPTY_STATE_TEXT",1,"emptyState-description"],[1,"table","mod-clickable","mod-card"],[1,"table-head"],[1,"table-head-row"],[1,"table-head-row-cell","table-head-row-cellIcon"],["translate","Figgo.LeavesHistory.STARTS_ON_COLUMN_LABEL",1,"table-head-row-cell"],["translate","Figgo.LeavesHistory.ENDS_ON_COLUMN_LABEL",1,"table-head-row-cell"],["translate","Figgo.LeavesHistory.DURATION_COLUMN_LABEL",1,"table-head-row-cell"],["translate","Figgo.LeavesHistory.CREATION_DATE_COLUMN_LABEL",1,"table-head-row-cell"],["translate","Figgo.LeavesHistory.STATUS_COLUMN_LABEL",1,"table-head-row-cell"],["translate","Figgo.LeavesHistory.ACCOUNTS_COLUMN_LABEL",1,"table-head-row-cell"],["translate","Figgo.LeavesHistory.ATTACHMENT_COLUMN_LABEL",1,"table-head-row-cell"],[1,"table-head-row-cell"],[4,"ngFor","ngForOf"],["class","table-body",4,"ngIf"],["app-leaves-history-table-line","",3,"historyLeavePeriod","canEditAttachment","refresh"],[1,"table-body"],[1,"table-body-row","leaves-group"],["colspan","8"],["translate","Figgo.LeavesHistory.UPCOMING_LEAVES_LABEL",1,"u-textBold","u-marginLeftSmall"],["translate","Figgo.LeavesHistory.PAST_LEAVES_LABEL",1,"u-textBold","u-marginLeftSmall"]],template:function(e,t){1&e&&(g.oc(0,"div",0),g.ed(1,ce,1,0,"div",1),g.ed(2,ae,3,0,"section",2),g.ed(3,pe,13,1,"table",3),g.nc()),2&e&&(g.Wb(1),g.Gc("ngIf",t.isLoading),g.Wb(1),g.Gc("ngIf",!t.isLoading&&0===t.leavePeriodsHistory.length),g.Wb(1),g.Gc("ngIf",!t.isLoading&&t.leavePeriodsHistory.length>0))},directives:[m.q,y.a,m.p,se],styles:[".table-head-row-cellIcon[_ngcontent-%COMP%],   .table-body-row-cellIcon{width:1.8rem;padding:0!important;text-align:right}.leaves-group[_ngcontent-%COMP%]{background:#f3f5fc}"]});var fe=n("Hx0k");function ge(e,t){1&e&&g.jc(0,"div",9)}function be(e,t){1&e&&(g.oc(0,"section",11),g.jc(1,"img",12),g.jc(2,"p",13),g.nc())}function ve(e,t){if(1&e&&(g.oc(0,"span",31),g.gd(1),g.nc()),2&e){const e=g.zc(3);g.Wb(1),g.hd(e.getPeriodDisplayer(e.selectedPeriod))}}function ye(e,t){if(1&e&&(g.oc(0,"lu-option",22),g.gd(1),g.nc()),2&e){const e=t.$implicit,n=g.zc(3);g.Gc("value",e),g.Wb(1),g.hd(n.getPeriodDisplayer(e))}}function me(e,t){}function Le(e,t){if(1&e&&(g.gd(0),g.Ac(1,"translate")),2&e){const e=g.zc(4);g.hd(g.Bc(1,1,e.leavePeriodStateTranslateKey(e.selectedStates[0])))}}function Pe(e,t){if(1&e&&(g.oc(0,"span",36),g.gd(1),g.nc(),g.gd(2),g.Ac(3,"translate")),2&e){const e=g.zc(4);g.Wb(1),g.hd(e.selectedStates.length),g.Wb(1),g.hd(g.Bc(3,2,"Figgo.LeavesHistory.MULTIPLE_STATES"))}}function Se(e,t){if(1&e&&(g.mc(0,32),g.ed(1,me,0,0,"ng-template",33),g.ed(2,Le,2,3,"ng-template",34),g.ed(3,Pe,4,4,"ng-template",35),g.lc()),2&e){const e=g.zc(3);g.Gc("ngPlural",e.selectedStates.length)}}function _e(e,t){}function Ee(e,t){if(1&e&&g.gd(0),2&e){const e=g.zc(4);g.hd(e.displayAccountOrCategory(e.selectedAccounts[0].value))}}function Ae(e,t){if(1&e&&(g.oc(0,"span",36),g.gd(1),g.nc(),g.gd(2),g.Ac(3,"translate")),2&e){const e=g.zc(4);g.Wb(1),g.hd(e.accountsCount(e.selectedAccounts)),g.Wb(1),g.hd(g.Bc(3,2,"Figgo.LeavesHistory.MULTIPLE_ACCOUNTS"))}}function Ie(e,t){if(1&e&&(g.mc(0,32),g.ed(1,_e,0,0,"ng-template",33),g.ed(2,Ee,1,1,"ng-template",34),g.ed(3,Ae,4,4,"ng-template",35),g.lc()),2&e){const e=g.zc(3);g.Gc("ngPlural",e.accountsCount(e.selectedAccounts))}}function Oe(e,t){if(1&e&&(g.mc(0),g.oc(1,"span"),g.gd(2),g.nc(),g.lc()),2&e){const e=t.$implicit,n=g.zc(4);g.Wb(1),g.ac("is-category",n.isAccountCategory(e)),g.Wb(1),g.hd(n.displayAccountOrCategory(e))}}function Te(e,t){if(1&e&&(g.oc(0,"app-tree-option-simple",37),g.ed(1,Oe,3,3,"ng-container",38),g.nc()),2&e){const e=t.$implicit;g.Gc("tree",e)}}function we(e,t){if(1&e){const e=g.pc();g.mc(0),g.oc(1,"section",14),g.oc(2,"div"),g.oc(3,"div",15),g.oc(4,"lu-select",16),g.vc("ngModelChange",function(t){g.Tc(e);return g.zc(2).selectedPeriod=t})("ngModelChange",function(){g.Tc(e);return g.zc(2).filterLeavePeriodsHistory()}),g.Ac(5,"translate"),g.ed(6,ve,2,1,"span",17),g.oc(7,"lu-option-picker-advanced"),g.jc(8,"lu-option-feeder",18),g.ed(9,ye,2,2,"lu-option",19),g.nc(),g.nc(),g.nc(),g.oc(10,"div",15),g.oc(11,"lu-select",20),g.vc("ngModelChange",function(t){g.Tc(e);return g.zc(2).selectedStates=t})("ngModelChange",function(){g.Tc(e);return g.zc(2).filterLeavePeriodsHistory()}),g.Ac(12,"translate"),g.ed(13,Se,4,1,"ng-container",21),g.oc(14,"lu-option-picker"),g.oc(15,"lu-option",22),g.gd(16),g.Ac(17,"translate"),g.nc(),g.oc(18,"lu-option",22),g.gd(19),g.Ac(20,"translate"),g.nc(),g.oc(21,"lu-option",22),g.gd(22),g.Ac(23,"translate"),g.nc(),g.oc(24,"lu-option",22),g.gd(25),g.Ac(26,"translate"),g.nc(),g.oc(27,"lu-option",22),g.gd(28),g.Ac(29,"translate"),g.nc(),g.nc(),g.jc(30,"lu-input-clearer"),g.nc(),g.nc(),g.oc(31,"div",15),g.oc(32,"app-tree-select-input",23),g.vc("ngModelChange",function(t){g.Tc(e);return g.zc(2).selectedAccounts=t})("ngModelChange",function(){g.Tc(e);return g.zc(2).filterLeavePeriodsHistory()}),g.Ac(33,"translate"),g.ed(34,Ie,4,1,"ng-container",21),g.oc(35,"app-tree-select-picker",24),g.jc(36,"lu-tree-option-searcher",25),g.ed(37,Te,2,1,"app-tree-option-simple",26),g.nc(),g.jc(38,"lu-input-clearer"),g.nc(),g.nc(),g.nc(),g.oc(39,"div"),g.jc(40,"button",27),g.jc(41,"a",28),g.nc(),g.nc(),g.oc(42,"section",29),g.jc(43,"app-leaves-history-table",30),g.nc(),g.lc()}if(2&e){const e=g.zc(2);g.Wb(4),g.Gc("ngModel",e.selectedPeriod)("placeholder",g.Bc(5,26,"Figgo.LeavesHistory.SELECT_PERIOD_LABEL")),g.Wb(4),g.Gc("options",e.allPeriods),g.Wb(3),g.Gc("ngModel",e.selectedStates)("placeholder",g.Bc(12,28,"Figgo.LeavesHistory.STATUS_LABEL")),g.Wb(2),g.Gc("luDisplayerMultiple",!0),g.Wb(2),g.Gc("value",e.LeavePeriodState.PendingApproval),g.Wb(1),g.hd(g.Bc(17,30,e.leavePeriodStateTranslateKey(e.LeavePeriodState.PendingApproval))),g.Wb(2),g.Gc("value",e.LeavePeriodState.Confirmed),g.Wb(1),g.hd(g.Bc(20,32,e.leavePeriodStateTranslateKey(e.LeavePeriodState.Confirmed))),g.Wb(2),g.Gc("value",e.LeavePeriodState.Denied),g.Wb(1),g.hd(g.Bc(23,34,e.leavePeriodStateTranslateKey(e.LeavePeriodState.Denied))),g.Wb(2),g.Gc("value",e.LeavePeriodState.PendingCancellation),g.Wb(1),g.hd(g.Bc(26,36,e.leavePeriodStateTranslateKey(e.LeavePeriodState.PendingCancellation))),g.Wb(2),g.Gc("value",e.LeavePeriodState.Cancelled),g.Wb(1),g.hd(g.Bc(29,38,e.leavePeriodStateTranslateKey(e.LeavePeriodState.Cancelled))),g.Wb(4),g.Gc("ngModel",e.selectedAccounts)("placeholder",g.Bc(33,40,"Figgo.LeavesHistory.SELECT_ACCOUNTS_PLACEHOLDER")),g.Wb(2),g.Gc("luDisplayerMultiple",!0),g.Wb(1),g.Gc("checkParentsWhenAllChildrenChecked",!0)("options",e.allAccounts),g.Wb(1),g.Gc("searchFn",e.searchEntityByNameOrId),g.Wb(4),g.Gc("useExistingCss",!0),g.Wb(1),g.Gc("href",e.getExportUrl(),g.Wc),g.Wb(2),g.Gc("ownerId",e.ownerId)("querySubject",e.querySubject)}}function je(e,t){if(1&e&&(g.mc(0),g.ed(1,be,3,0,"section",10),g.ed(2,we,44,42,"ng-container",8),g.lc()),2&e){const e=g.zc();g.Wb(1),g.Gc("ngIf",!e.allPeriods.length),g.Wb(1),g.Gc("ngIf",!!e.allPeriods.length)}}const Ce=function(e){return{ownerName:e}};class Fe{constructor(e,t,n){this.popupRef=e,this.historyLeavePeriodService=n,this.LeavePeriodState=d.a,this.querySubject=new l.a(void 0),this.isLoading=!1,this.leavePeriodStateTranslateKey=p,this.displayAccountOrCategory=i.b,this.isAccountCategory=i.c,this.searchEntityByNameOrId=r.b,this.searchEntityByName=r.a,this.ownerId=t.ownerId,this.ownerName=t.ownerName}ngOnInit(){const e=this.historyLeavePeriodService.getOwnerPeriods(this.ownerId),t=this.historyLeavePeriodService.getOwnerAccounts(this.ownerId);this.isLoading=!0,Object(u.a)([e,t]).subscribe(([e,t])=>{this.allPeriods=e,this.allPeriods.sort((e,t)=>a(t.startsOn).diff(a(e.startsOn))),this.allAccounts=Object(o.a)(t),this.selectedPeriod=this.allPeriods.find(e=>a(e.startsOn).isBefore(a())&&a(e.endsOn).isAfter(a())),void 0===this.selectedPeriod&&(this.selectedPeriod=this.allPeriods[0]),this.querySubject.next({ownerId:this.ownerId,period:this.selectedPeriod,accountIds:null,categoryIds:null,states:null}),this.isLoading=!1})}filterLeavePeriodsHistory(){const e=this.buildQuery();this.querySubject.next(e)}buildQuery(){const e=this.selectedAccounts?this.selectedAccounts.filter(e=>!Object(i.c)(e.value)).map(e=>e.value).concat(...this.selectedAccounts.filter(e=>!e.includesAllChildren&&Object(i.c)(e.value)).map(e=>e.children.map(e=>e.value))).map(e=>e.id):null,t=this.selectedAccounts?this.selectedAccounts.filter(e=>e.includesAllChildren&&Object(i.c)(e.value)).map(e=>e.value.id):null;return{ownerId:this.ownerId,period:this.selectedPeriod,accountIds:e,categoryIds:t,states:this.selectedStates}}accountsCount(e){if(e){const t=e.filter(e=>!this.isAccountCategory(e.value)).map(e=>e.value).concat(...e.filter(e=>this.isAccountCategory(e.value)&&e.includesAllChildren&&null!=e.children).map(e=>e.children.map(e=>e.value)));return Object(c.uniqBy)(t,e=>e.id).length}return 0}getPeriodDisplayer(e){return 0===a(e.startsOn).month()&&11===a(e.endsOn).month()&&a(e.startsOn).year===a(e.endsOn).year?""+a(e.endsOn).format("YYYY"):`${a(e.startsOn).format("MMM YYYY")} - ${a(e.endsOn).format("MMM YYYY")}`}getExportUrl(){const e=this.buildQuery();return this.historyLeavePeriodService.getExportUrl(e)}cancel(){this.popupRef.dismiss()}}Fe.\u0275fac=function(e){return new(e||Fe)(g.ic(s.a),g.ic(s.b),g.ic(v))},Fe.\u0275cmp=g.cc({type:Fe,selectors:[["app-leaves-history-dialog"]],decls:11,vars:8,consts:[[1,"mod-lucca-icon"],[1,"lu-modal-header"],[1,"lu-modal-header-title"],[1,"lu-modal-header-close",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-cross"],["translate","Figgo.IconMask.CLOSE",1,"u-mask"],[1,"lu-modal-content","u-paddingReset"],["class","loading mod-dialog",4,"ngIf"],[4,"ngIf"],[1,"loading","mod-dialog"],["class","emptyState u-paddingTopReset u-paddingBottomReset u-animatedFadeIn",4,"ngIf"],[1,"emptyState","u-paddingTopReset","u-paddingBottomReset","u-animatedFadeIn"],["src","assets/placeholder_calendar.svg"],["translate","Figgo.LeavesHistory.NO_PERIOD_FOR_USER",1,"emptyState-description"],[1,"u-displayFlex","u-justifyContentSpaceBetween","u-flexWrapWrap","mod-align","u-paddingTopSmaller","u-paddingBottomSmaller","u-paddingLeftStandard","u-paddingRightStandard","u-marginBottomSmall"],[1,"textfield","mod-inline","u-marginBottomSmaller"],["mod","block","single","",1,"textfield-input",3,"ngModel","placeholder","ngModelChange"],["class","mod-unkillable",4,"luDisplayer"],[3,"options"],[3,"value",4,"luForOptions"],["mod","block","multiple","",1,"textfield-input",3,"ngModel","placeholder","ngModelChange"],[3,"ngPlural",4,"luDisplayer","luDisplayerMultiple"],[3,"value"],["multiple","",1,"textfield-input",3,"ngModel","placeholder","ngModelChange"],[3,"checkParentsWhenAllChildrenChecked","options"],[3,"searchFn"],[3,"tree",4,"luForTreeOptions"],["translate","Figgo.LeavesHistory.PRINT_BUTTON","printSectionId","print-section","print","",1,"button","mod-outline","palette-grey","mod-inline","u-marginBottomSmaller",3,"useExistingCss"],["translate","Figgo.LeavesHistory.EXPORT_BUTTON",1,"button","mod-outline","palette-grey","mod-inline","u-marginLeftSmaller","u-marginBottomSmaller",3,"href"],["id","print-section",1,"printSection"],[3,"ownerId","querySubject"],[1,"mod-unkillable"],[3,"ngPlural"],["ngPluralCase","0"],["ngPluralCase","one"],["ngPluralCase","other"],[1,"chip","mod-unkillable"],[3,"tree"],[4,"luDisplayer"]],template:function(e,t){1&e&&(g.oc(0,"div",0),g.oc(1,"div",1),g.oc(2,"h2",2),g.gd(3),g.Ac(4,"translate"),g.nc(),g.oc(5,"button",3),g.vc("click",function(){return t.cancel()}),g.jc(6,"span",4),g.jc(7,"span",5),g.nc(),g.nc(),g.oc(8,"div",6),g.ed(9,ge,1,0,"div",7),g.ed(10,je,3,2,"ng-container",8),g.nc(),g.nc()),2&e&&(g.Wb(3),g.id(" ",g.Cc(4,3,"Figgo.LeavesHistory.LEAVES_HISTORY_TITLE",g.Kc(6,Ce,t.ownerName))," "),g.Wb(6),g.Gc("ngIf",t.isLoading),g.Wb(1),g.Gc("ngIf",!t.isLoading))},directives:[y.a,m.q,L.b,P.r,P.u,S.e,_.r,_.j,_.f,_.s,_.l,S.c,E.a,A.a,_.F,_.h,I.a,he,m.r,m.s,fe.a],pipes:[y.c],styles:[".lu-modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.leaves-history-header[_ngcontent-%COMP%]{border-bottom:1px solid #efefef}.printSection[_ngcontent-%COMP%]{overflow:auto}"]})},"4ik+":function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("FWf1");t.filter=function(e,t){return function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.thisArg))},e}(),c=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.predicate=n,r.thisArg=i,r.count=0,r}return r(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(o.Subscriber)},"9vGL":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("ofXK"),r=n("3Y7J"),o=n("sYmb"),s=n("f3cR"),c=n("fXoL");class a{}a.\u0275mod=c.gc({type:a}),a.\u0275inj=c.fc({factory:function(e){return new(e||a)},imports:[[i.c,r.e,s.a,o.b]]})},EeD1:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var i=n("LvDl");function r(e,t){return function(e,t){return-1!==i.deburr(e.toLocaleLowerCase()).indexOf(i.deburr(t.toLocaleLowerCase()))}(e.name,t)}function o(e,t){return(null==e.isHeader||!1===e.isHeader)&&r(e,t)||e.id&&-1!==e.id.toString().indexOf(t)}},FWf1:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("pshJ"),s=n("GiSu"),c=n("zB/H"),a=n("p//D"),l=n("n3uD"),u=n("MkmW"),d=function(e){function t(n,i,r){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!n){o.destination=s.empty;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new p(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new p(o,n,i,r)}return o}return r(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,n,i){var r=new t(e,n,i);return r.syncErrorThrowable=!1,r},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(c.Subscription);t.Subscriber=d;var p=function(e){function t(t,n,i,r){var c,a=e.call(this)||this;a._parentSubscriber=t;var l=a;return o.isFunction(n)?c=n:n&&(c=n.next,i=n.error,r=n.complete,n!==s.empty&&(l=Object.create(n),o.isFunction(l.unsubscribe)&&a.add(l.unsubscribe.bind(l)),l.unsubscribe=a.unsubscribe.bind(a))),a._context=l,a._next=c,a._error=i,a._complete=r,a}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=l.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):u.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;u.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),l.config.useDeprecatedSynchronousErrorHandling)throw n;u.hostReportError(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!l.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return l.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(u.hostReportError(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(d);t.SafeSubscriber=p},GMZp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e}},GiSu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("n3uD"),r=n("MkmW");t.empty={closed:!0,next:function(e){},error:function(e){if(i.config.useDeprecatedSynchronousErrorHandling)throw e;r.hostReportError(e)},complete:function(){}}},JIuW:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),r=n("3Pt+"),o=n("fXoL");class s{}s.\u0275mod=o.gc({type:s}),s.\u0275inj=o.fc({factory:function(e){return new(e||s)},imports:[[i.c,r.m,r.z]]})},Kp8T:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),r=n("S2pG"),o=n("fXoL");class s{}s.\u0275mod=o.gc({type:s}),s.\u0275inj=o.fc({factory:function(e){return new(e||s)},providers:[i.i],imports:[[i.c,r.a]]})},LBXl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}();t.UnsubscriptionError=i},MkmW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hostReportError=function(e){setTimeout(function(){throw e},0)}},ObND:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.Day=0]="Day",e[e.Hour=1]="Hour"}(i||(i={}))},QeNy:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL");class r{constructor(){this._printStyle=[],this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(e){for(let t in e)e.hasOwnProperty(t)&&this._printStyle.push((t+JSON.stringify(e[t])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(e){let t=function(e){return`<link rel="stylesheet" type="text/css" href="${e}">`};if(-1!==e.indexOf(",")){const n=e.split(",");for(let e of n)this._styleSheetFile=this._styleSheetFile+t(e)}else this._styleSheetFile=t(e)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(e){const t=[],n=document.getElementsByTagName(e);for(let i=0;i<n.length;i++)t.push(n[i].outerHTML);return t.join("\r\n")}getHtmlContents(){let e=document.getElementById(this.printSectionId),t=e.getElementsByTagName("input");for(var n=0;n<t.length;n++)t[n].defaultValue=t[n].value;return e.innerHTML}print(){let e,t,n="",i="";this.useExistingCss&&(n=this.getElementTag("style"),i=this.getElementTag("link")),e=this.getHtmlContents(),t=window.open("","_blank","top=0,left=0,height=auto,width=auto"),t.document.open(),t.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          <base href="/static/figgo/www/"/>\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${n}\n          ${i}\n        </head>\n        <body>\n          ${e}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              setTimeout(function() {\n                window.print();\n                setTimeout(function() { window.close(); }, 0);\n              }, ${this.printDelay});\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),t.document.close()}}r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=i.dc({type:r,selectors:[["button","print",""]],hostBindings:function(e,t){1&e&&i.vc("click",function(){return t.print()})},inputs:{printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}})},SMmX:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("ofXK"),r=n("fXoL");class o{}o.\u0275mod=r.gc({type:o}),o.\u0275inj=r.fc({factory:function(e){return new(e||o)},imports:[[i.c]]})},SqCZ:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("ofXK"),r=n("3Pt+"),o=n("eG+R"),s=n("PQAa"),c=n("NoCg"),a=n("dpuF"),l=n("EB94"),u=n("XNkp"),d=n("Y/4g"),p=n("3Y7J"),h=n("sYmb"),f=n("f3cR"),g=n("9vGL"),b=n("CCyG"),v=n("cjee"),y=n("hZRL"),m=n("JIuW"),L=n("v3UZ"),P=n("d5vQ"),S=n("fXoL");class _{}_.\u0275mod=S.gc({type:_}),_.\u0275inj=S.fc({factory:function(e){return new(e||_)},providers:[v.a,y.a,b.a,i.f],imports:[[i.c,r.m,h.b,s.a,f.a,c.e,a.c,d.a,l.d,o.a,u.d,L.n,p.a,P.d,p.h,p.e,P.f,g.a,m.a]]})},ZxDp:function(e,t,n){"use strict";n.d(t,"a",function(){return i});class i{constructor(e,t){this._authorizedActions=e,this._items=t}get authorizedActions(){return this._authorizedActions}get items(){return this._items}static fromJson(e){return new i(e.authorizedActions,e.data.items)}}},ap3Z:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o});var i=n("fXoL"),r=n("ofXK");class o{constructor(e){this.locale=e}transform(e,t=2){const n=Object(r.F)(e,this.locale,`1.${t}-${t}`),i=Object(r.H)(this.locale,r.y.Decimal),o=n.split(i),s=o[0],c=o[1],a=Math.round(e)===e;return t>0?`${s}<span class="decimal-part${a?" u-hidden":""}">${i}${c}</span>`:s}}o.\u0275fac=function(e){return new(e||o)(i.ic(i.H))},o.\u0275pipe=i.hc({name:"luNumber",type:o,pure:!0}),o.ctorParameters=()=>[{type:void 0,decorators:[{type:i.z,args:[i.H]}]}];class s{}s.\u0275mod=i.gc({type:s}),s.\u0275inj=i.fc({factory:function(e){return new(e||s)},imports:[[r.c]]})},f3cR:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n("abiy");var i=n("ofXK"),r=n("fXoL");class o{}o.\u0275mod=r.gc({type:o}),o.\u0275inj=r.fc({factory:function(e){return new(e||o)},imports:[[i.c]]})},mCDn:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("ofXK"),r=n("3Pt+"),o=n("sTEx"),s=n("5iIh"),c=n("SMmX"),a=n("eG+R"),l=n("0N9+"),u=n("Kp8T"),d=n("S2pG"),p=n("d5vQ"),h=n("v3UZ"),f=n("dpuF"),g=n("EB94"),b=n("XNkp"),v=n("Y/4g"),y=n("sYmb"),m=n("SqCZ"),L=n("9vGL"),P=n("fXoL");class S{}S.\u0275mod=P.gc({type:S}),S.\u0275inj=P.fc({factory:function(e){return new(e||S)},imports:[[i.c,r.m,y.b,d.a,u.a,b.d,p.d,h.n,h.t,h.k,s.a,h.E,h.G,h.i,h.z,h.B,o.a,p.f,f.c,m.a,c.a,g.d,a.a,v.a,l.a,L.a]]})},mbIT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},n3uD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}}},"p//D":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},pshJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e}},qF0L:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("S2pG"),r=n("ObND"),o=n("fXoL"),s=n("sYmb");class c{constructor(e,t){this.translateService=e,this.translatePluralService=t}transform(e,t,n=!1){return n?this.translateService.instant(t===r.a.Hour?"Figgo.Global.TIMEUNIT_HOUR_SHORT":"Figgo.Global.TIMEUNIT_DAY_SHORT"):this.translatePluralService.getPluralText(e,t===r.a.Hour?"Figgo.Global.TIMEUNIT_HOURS_PLURAL":"Figgo.Global.TIMEUNIT_DAYS_PLURAL")}}c.\u0275fac=function(e){return new(e||c)(o.ic(s.d),o.ic(i.b))},c.\u0275pipe=o.hc({name:"timeUnit",type:c,pure:!0})},v2HK:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL");class r{onClick(e){e.preventDefault(),e.stopPropagation()}}r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=i.dc({type:r,selectors:[["","app-click-stop-propagation",""]],hostBindings:function(e,t){1&e&&i.vc("click",function(e){return t.onClick(e)})}})},"zB/H":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("mbIT"),r=n("GMZp"),o=n("pshJ"),s=n("LBXl"),c=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,c=this._ctorUnsubscribe,l=this._unsubscribe,u=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var d=0;d<n.length;++d){n[d].remove(this)}if(o.isFunction(l)){c&&(this._unsubscribe=void 0);try{l.call(this)}catch(f){t=f instanceof s.UnsubscriptionError?a(f.errors):[f]}}if(i.isArray(u)){d=-1;for(var p=u.length;++d<p;){var h=u[d];if(r.isObject(h))try{h.unsubscribe()}catch(f){t=t||[],f instanceof s.UnsubscriptionError?t=t.concat(a(f.errors)):t.push(f)}}}if(t)throw new s.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function a(e){return e.reduce(function(e,t){return e.concat(t instanceof s.UnsubscriptionError?t.errors:t)},[])}t.Subscription=c}}]);