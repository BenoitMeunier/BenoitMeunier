(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"3lyY":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var i=n("fXoL"),o=n("3Pt+"),a=n("FKr1"),c=n("LRne"),r=n("3E0/"),s=n("5kdF"),l=n("IgNJ"),d=n("ofXK"),u=n("iadO"),g=n("mYl9");const p=["input"],h=["picker"];class m extends l.a{constructor(t,e){super(t),this.cd=t,this._injector=e,this.startView="month",this.onBlur=new i.u,this.yearSelected=new i.u,this.monthSelected=new i.u}set min(t){this._min=t}get min(){return this._min||null}set max(t){this._max=t}get max(){return this._max||null}set startAt(t){this._startAt=t}get startAt(){return this._startAt||null}set required(t){this._required="string"==typeof t||t}ngOnInit(){const t=this,e=this._injector.get(o.q).control;setTimeout(()=>{if(e&&e.validator&&t.ngModel.control.setValidators([t.ngModel.control.validator,e.validator]),e&&e.markAsTouched){const n=e.markAsTouched;e.markAsTouched=function(){n.apply(this,arguments),t.ngModel.control.markAsTouched(),t.cd.detectChanges()}}if(e&&e.updateValueAndValidity){const n=e.updateValueAndValidity;e.updateValueAndValidity=function(){n.apply(this,arguments),t.ngModel.control.updateValueAndValidity(),t.cd.detectChanges()}}})}openPicker(){this.picker.opened||(this.picker.open(),this.refocusInput())}closePicker(){this.picker.opened&&this.picker.close()}togglePicker(){this.picker.opened?this.picker.close():(this.picker.open(),this.refocusInput())}onTab(){this.picker.close()}onEnter(){this.picker.close()}onEscape(){this.picker.close()}refocusInput(){Object(c.a)({}).pipe(Object(r.a)(1)).subscribe(()=>{this.input.nativeElement.focus()})}focus(){this.openPicker()}blur(){this.propagateTouch(this.model),this.onBlur.emit()}fixValue(){this.model&&0===this.model.length&&this.ngModel.reset()}}m.\u0275fac=function(t){return new(t||m)(i.ic(i.j),i.ic(i.D))},m.\u0275cmp=i.cc({type:m,selectors:[["app-form-datepicker"]],viewQuery:function(t,e){if(1&t&&(i.ld(p,!0),i.ld(o.u,!0),i.ld(h,!0)),2&t){let t;i.Oc(t=i.wc())&&(e.input=t.first),i.Oc(t=i.wc())&&(e.ngModel=t.first),i.Oc(t=i.wc())&&(e.picker=t.first)}},inputs:{min:"min",max:"max",startAt:"startAt",startView:"startView",placeholder:"placeholder",required:"required",isInvalid:"isInvalid"},outputs:{onBlur:"onBlur",yearSelected:"yearSelected",monthSelected:"monthSelected"},features:[i.Vb([{provide:o.p,useExisting:Object(i.ob)(()=>m),multi:!0},{provide:a.a,useClass:s.a}]),i.Tb],decls:7,vars:17,consts:[[1,"textfield","mod-block","mod-noLabel",3,"ngClass"],[1,"textfield-input",3,"ngModel","matDatepicker","placeholder","disabled","min","max","required","ngModelChange","click","keydown.tab","keydown.enter","keydown.esc","blur"],["input",""],["aria-hidden","true",1,"textfield-suffix","mod-icon","lucca-icon","icon-calendar",3,"click"],[3,"startView","startAt","yearSelected","monthSelected","closed"],["picker",""],[3,"errors","warnings","infos"]],template:function(t,e){if(1&t&&(i.oc(0,"div",0),i.oc(1,"input",1,2),i.vc("ngModelChange",function(t){return e.model=t})("ngModelChange",function(){return e.fixValue(),e.propagateChange(e.model)})("click",function(){return e.togglePicker()})("keydown.tab",function(){return e.onTab()})("keydown.enter",function(){return e.onEnter()})("keydown.esc",function(){return e.onEscape()})("blur",function(){return e.blur()}),i.nc(),i.oc(3,"span",3),i.vc("click",function(){return e.focus()}),i.nc(),i.oc(4,"mat-datepicker",4,5),i.vc("yearSelected",function(t){return e.yearSelected.emit(t)})("monthSelected",function(t){return e.monthSelected.emit(t)})("closed",function(){return e.onBlur.emit()}),i.nc(),i.jc(6,"app-form-input-infos",6),i.nc()),2&t){const t=i.Pc(5);i.ac("required",e._required)("is-invalid",e.isInvalid),i.Gc("ngClass",e.allMods()),i.Wb(1),i.Gc("ngModel",e.model)("matDatepicker",t)("placeholder",e.placeholder||"")("disabled",e.disabled)("min",e.min)("max",e.max)("required",e._required),i.Wb(3),i.Gc("startView",e.startView)("startAt",e.startAt),i.Wb(2),i.Gc("errors",e.errors)("warnings",e.warnings)("infos",e.infos)}},directives:[d.o,o.c,u.b,o.r,o.u,o.A,u.a,g.a],styles:['[_nghost-%COMP%]{display:inline-block;margin-right:.5rem;vertical-align:top;width:9rem}.mod-block[_nghost-%COMP%]{width:100%}.mod-shortest[_nghost-%COMP%]{width:3rem}.mod-shorter[_nghost-%COMP%]{width:6rem}.mod-short[_nghost-%COMP%]{width:9rem}.mod-standard[_nghost-%COMP%]{width:13rem}.mod-long[_nghost-%COMP%]{width:17rem}.mod-longer[_nghost-%COMP%]{width:22rem}.mod-longest[_nghost-%COMP%]{width:28rem}.mod-noLabel[_nghost-%COMP%]{padding-top:0}.mod-noLabel[_nghost-%COMP%]   mat-input-container[_ngcontent-%COMP%]{margin-top:0}.mod-white[_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{background:#fff}.is-modified[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-1rem;top:1.65rem;margin:auto;height:5px;width:5px;border-radius:50%;background:#616fa7}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%], .textfield[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]{box-shadow:none;background:#f5f5ff}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]::-moz-placeholder, .textfield[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]::-moz-placeholder{color:#c6c7fb}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:-ms-input-placeholder, .textfield[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:-ms-input-placeholder{color:#c6c7fb}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]::placeholder, .textfield[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]::placeholder{color:#c6c7fb}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%] ~ .textfield-suffix[_ngcontent-%COMP%], .textfield[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%] ~ .textfield-suffix[_ngcontent-%COMP%]{color:#7d7fe5}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%] ~ .textfield-label[_ngcontent-%COMP%], .textfield[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%] ~ .textfield-label[_ngcontent-%COMP%]{color:#313c5e}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus, .textfield[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #7a7de8}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus ~ .textfield-label[_ngcontent-%COMP%], .textfield[_ngcontent-%COMP%]:not(.required)   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus ~ .textfield-label[_ngcontent-%COMP%]{color:#313c5e}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%], .textfield[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]{background:#fff}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]::-moz-placeholder, .textfield[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]::-moz-placeholder{color:#c6c7fb}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:-ms-input-placeholder, .textfield[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:-ms-input-placeholder{color:#c6c7fb}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]::placeholder, .textfield[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]::placeholder{color:#c6c7fb}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus::-moz-placeholder, .textfield[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus::-moz-placeholder{color:#c6c7fb}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus:-ms-input-placeholder, .textfield[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus:-ms-input-placeholder{color:#c6c7fb}.textfield.mod-multiline[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus::placeholder, .textfield[_ngcontent-%COMP%]:not(.required).mod-white   .textfield-input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus::placeholder{color:#c6c7fb}'],changeDetection:0})},IgNJ:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("fXoL");class o{constructor(){this._mod={}}set mod(t){null==t?this._mod={}:Array.isArray(t)?this._mod=t.reduce((t,e)=>(t[e]=!0,t),{}):"string"==typeof t?this._mod=t.split(" ").reduce((t,e)=>(t[e]=!0,t),{}):"object"==typeof t&&(this._mod=t)}get mod(){return this._mod}allMods(){return Object.keys(this._mod).filter(t=>this._mod[t]).map(t=>"mod-"+t)}}o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=i.dc({type:o,inputs:{mod:"mod"}});class a extends o{constructor(t){super(),this.cd=t,this.hasErrors=!1,this.propagateChange=t=>{},this.propagateTouch=t=>{}}isError(){return this.hasErrors||this.errors&&(this.errors.trim&&this.errors.trim().length||!this.errors.trim&&this.errors.filter(t=>t&&t.trim().length).length)}writeValue(t){this.model=t,this.cd.markForCheck()}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.propagateTouch=t}setDisabledState(t){this.disabled=t}}a.\u0275fac=function(t){return new(t||a)(i.ic(i.j))},a.\u0275dir=i.dc({type:a,inputs:{disabled:"disabled",label:"label",errors:"errors",hasErrors:"hasErrors",warnings:"warnings",infos:"infos",colorOnDirty:"colorOnDirty"},features:[i.Tb]})},LwgA:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("fXoL");class o{}o.\u0275mod=i.gc({type:o}),o.\u0275inj=i.fc({factory:function(t){return new(t||o)},imports:[[]]})},OUNW:function(t,e,n){"use strict";n.r(e),n.d(e,"LeaveRequestModule",function(){return Fn});var i=n("ofXK"),o=n("tk/3"),a=n("tyNb"),c=n("OMPg"),r=n("eG+R"),s=n("iTw1"),l=n("lKEx"),d=n("fJy3"),u=n("NoCg"),g=n("EB94"),p=n("sYmb"),h=n("SqCZ"),m=n("mCDn"),f=n("Na1t"),v=n("3Pt+"),b=n("Mq7z"),A=n("fXoL");class O{}O.\u0275mod=A.gc({type:O}),O.\u0275inj=A.fc({factory:function(t){return new(t||O)},imports:[[i.c,p.b,b.a]]});var y=n("LwgA"),P=n("d5vQ"),C=n("ap3Z"),S=n("v3UZ"),I=n("dpuF"),w=n("XNkp"),_=n("vkgz");class W{constructor(t){this.http=t,this.baseUrl="/api/v3/leaveRequestFactory"}populateWarningsAccountId(t){[...t.availableAccounts,...t.otherAvailableAccounts].forEach(t=>{var e,n;null===(n=null===(e=t.constraint)||void 0===e?void 0:e.warnings)||void 0===n||n.forEach(e=>{e.accountId=t.leaveAccountId})})}getProposalToSend(t){const e=Object.assign(Object.assign({},t),{availableAccounts:t.availableAccounts.filter(t=>!!t.duration),otherAvailableAccounts:t.otherAvailableAccounts.filter(t=>!!t.duration)});return delete e.allUnits,e}getProposal(t,e,n,i,o,a){const c=null!=a?"&unit="+a:"";return this.http.get(this.baseUrl+"?"+`ownerId=${t}&`+`startsOn=${e}&`+`startsAM=${n}&`+`endsOn=${i}&endsAM=`+o+c).pipe(Object(_.a)(t=>this.populateWarningsAccountId(t)))}validateProposal(t){return t.autoCreate=!1,this.http.post(""+this.baseUrl,this.getProposalToSend(t)).pipe(Object(_.a)(t=>this.populateWarningsAccountId(t)))}postProposal(t){return t.autoCreate=!0,this.http.post(""+this.baseUrl,this.getProposalToSend(t)).pipe(Object(_.a)(t=>this.populateWarningsAccountId(t)))}postAttachment(t,e){return this.http.post(`/api/v3/leaveRequests/${t}/attachment`,e)}}W.\u0275fac=function(t){return new(t||W)(A.sc(o.b))},W.\u0275prov=A.ec({token:W,factory:W.\u0275fac});var T=n("lJxs");class M{constructor(t){this.http=t,this.listManagersUrl="/api/v3/users/me/authorizedManagers?fields=id,lastName,firstName"}getManagers(){return this.http.get(""+this.listManagersUrl).pipe(Object(T.a)(t=>t.data.items))}}M.\u0275fac=function(t){return new(t||M)(A.sc(o.b))},M.\u0275prov=A.ec({token:M,factory:M.\u0275fac});class D{constructor(t){this.http=t,this.templateApproversUrl="/figgo/api/leaveRequests/v1.0/template/approvers"}getDefaultApprovers(t){return this.http.get(`${this.templateApproversUrl}?userId=${t}`)}}D.\u0275fac=function(t){return new(t||D)(A.sc(o.b))},D.\u0275prov=A.ec({token:D,factory:D.\u0275fac});class E{}E.\u0275mod=A.gc({type:E}),E.\u0275inj=A.fc({factory:function(t){return new(t||E)},providers:[M,W,D],imports:[[i.c,v.m,v.z,C.a,I.c,p.b,w.d,S.n,P.f,b.a,O,y.a]]});var L=n("6ulm"),F=n("17KV"),k=n("wd/R"),x=n("pLZG"),R=n("1jH7"),N=n("mpH0"),U=n("JLi0"),G=n("nZZT"),H=n("2HzP");function j(t,e){1&t&&A.jc(0,"div",12)}function B(t,e){if(1&t&&(A.jc(0,"p",15),A.Ac(1,"safeHtml")),2&t){const t=e.$implicit;A.Gc("innerHTML",A.Bc(1,1,t.description),A.Uc)}}function z(t,e){if(1&t&&(A.oc(0,"div",13),A.ed(1,B,2,3,"p",14),A.nc()),2&t){const t=A.zc();A.Wb(1),A.Gc("ngForOf",t.leavePolicies)}}function Y(t,e){if(1&t&&(A.oc(0,"div",13),A.oc(1,"h3"),A.gd(2),A.nc(),A.jc(3,"p",15),A.Ac(4,"safeHtml"),A.nc()),2&t){const t=e.$implicit;A.Wb(2),A.hd(t.leaveAccount.name),A.Wb(1),A.Gc("innerHTML",A.Bc(4,2,t.description),A.Uc)}}class q{constructor(t,e,n,i){this.popupRef=t,this.leavePoliciesApiService=n,this.leaveAccountPoliciesApiService=i,this.userId=e.userId}ngOnInit(){this.loading=!0,this.leavePoliciesSubscription=this.leavePoliciesApiService.scope(this.userId).subscribe(t=>{this.leavePolicies=t,this.loading=!1}),this.leaveAccountPoliciesSubscription=this.leaveAccountPoliciesApiService.scope(this.userId).subscribe(t=>{this.leaveAccountPolicies=t,this.loading=!1})}ngOnDestroy(){this.leavePoliciesSubscription.unsubscribe(),this.leaveAccountPoliciesSubscription.unsubscribe()}save(){this.popupRef.close()}cancel(){this.popupRef.dismiss()}}q.\u0275fac=function(t){return new(t||q)(A.ic(g.a),A.ic(g.b),A.ic(U.a),A.ic(N.a))},q.\u0275cmp=A.cc({type:q,selectors:[["app-leave-policies-summary-dialog"]],decls:12,vars:3,consts:[[1,"lu-modal-panel-inner","u-animatedFadeIn"],[1,"lu-modal-header"],["translate","Figgo.LeavePolicies.LEAVE_POLICIES_SUMMARY_TITLE",1,"lu-modal-header-title"],["app-popup-dismiss","",1,"lu-modal-header-close",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-cross"],["translate","Figgo.IconMask.CLOSE",1,"u-mask"],[1,"lu-modal-content","u-paddingTopReset","u-paddingBottomReset"],["class","loading mod-dialog","translate","Figgo.LeavePolicies.LEAVE_POLICIES_SUMMARY_LOADING",4,"ngIf"],["class","u-marginBottomBig",4,"ngIf"],["class","u-marginBottomBig",4,"ngFor","ngForOf"],[1,"lu-modal-footer"],["translate","Figgo.LeavePolicies.LEAVE_POLICIES_SUMMARY_CLOSE",1,"button","mod-link",3,"click"],["translate","Figgo.LeavePolicies.LEAVE_POLICIES_SUMMARY_LOADING",1,"loading","mod-dialog"],[1,"u-marginBottomBig"],[3,"innerHTML",4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(t,e){1&t&&(A.oc(0,"div",0),A.oc(1,"div",1),A.jc(2,"h2",2),A.oc(3,"button",3),A.vc("click",function(){return e.cancel()}),A.jc(4,"span",4),A.jc(5,"span",5),A.nc(),A.nc(),A.oc(6,"section",6),A.ed(7,j,1,0,"div",7),A.ed(8,z,2,1,"div",8),A.ed(9,Y,5,4,"div",9),A.nc(),A.oc(10,"footer",10),A.oc(11,"button",11),A.vc("click",function(){return e.cancel()}),A.nc(),A.nc(),A.nc()),2&t&&(A.Wb(7),A.Gc("ngIf",e.loading),A.Wb(1),A.Gc("ngIf",e.leavePolicies&&e.leavePolicies.length>0),A.Wb(1),A.Gc("ngForOf",e.leaveAccountPolicies))},directives:[p.a,G.a,i.q,i.p],pipes:[H.a],styles:[".dialog-header[_ngcontent-%COMP%]{padding:2rem 2rem 5px}.dialog-title[_ngcontent-%COMP%]{margin-bottom:1rem}"]});var V,$,K=n("ObND"),Q=n("SKcQ"),X=n("LvDl");!function(t){t[t.PendingApproval=0]="PendingApproval",t[t.PartiallyApproved=1]="PartiallyApproved",t[t.Approved=2]="Approved",t[t.Denied=3]="Denied",t[t.Cancelled=4]="Cancelled",t[t.CancellationPending=5]="CancellationPending"}(V||(V={})),function(t){t[t.RequestInPast=1]="RequestInPast",t[t.RequestNoAccountAvailable=2]="RequestNoAccountAvailable",t[t.AccountConsumptionPeriodNotStarted=3]="AccountConsumptionPeriodNotStarted",t[t.AccountConsumptionPeriodEnded=4]="AccountConsumptionPeriodEnded",t[t.AccountRedArea=5]="AccountRedArea",t[t.AccountActivePeriod=6]="AccountActivePeriod",t[t.AccountPositiveBalance=7]="AccountPositiveBalance",t[t.AccountNonAttachingAccounts=8]="AccountNonAttachingAccounts",t[t.AccountHalfDayNotAllowed=9]="AccountHalfDayNotAllowed",t[t.AccountCompleteConsumption=10]="AccountCompleteConsumption",t[t.AccountNotProrated=11]="AccountNotProrated",t[t.AccountMaxNumberOfDaysExceeded=12]="AccountMaxNumberOfDaysExceeded",t[t.AccountMaxNumberByAccount=13]="AccountMaxNumberByAccount",t[t.AccountNotAvailable=14]="AccountNotAvailable",t[t.CompulsoryLeaveMinimalDuration=15]="CompulsoryLeaveMinimalDuration",t[t.CompulsoryLeaveSingleAccount=16]="CompulsoryLeaveSingleAccount",t[t.UserContractNotStarted=18]="UserContractNotStarted",t[t.UserContractEnded=19]="UserContractEnded",t[t.UserCalendarEmpty=20]="UserCalendarEmpty",t[t.ExistingLeaveNotOverwritable=21]="ExistingLeaveNotOverwritable",t[t.CompulsoryLeaveNotAvailable=22]="CompulsoryLeaveNotAvailable",t[t.PendingLeaveRequestNotOverwritable=23]="PendingLeaveRequestNotOverwritable",t[t.PendingCancellationRequestNotOverwritable=24]="PendingCancellationRequestNotOverwritable",t[t.SickLeaveNotOverwritable=25]="SickLeaveNotOverwritable",t[t.CompulsoryLeaveCalendarNotOverwritable=26]="CompulsoryLeaveCalendarNotOverwritable",t[t.ExistingSickLeaveNotOverwritable=27]="ExistingSickLeaveNotOverwritable",t[t.SickLeaveOverwritePendingLeaveRequest=28]="SickLeaveOverwritePendingLeaveRequest",t[t.SickLeaveOverwriteExistingLeaves=29]="SickLeaveOverwriteExistingLeaves",t[t.LeavesNotCancellableIfEmpty=30]="LeavesNotCancellableIfEmpty",t[t.LeavesNotCancellableOnPendingLeaveRequest=31]="LeavesNotCancellableOnPendingLeaveRequest",t[t.LeavesNotCancellableOnPendingCancellationRequest=32]="LeavesNotCancellableOnPendingCancellationRequest",t[t.LeavesNotCancellableOnSickLeave=33]="LeavesNotCancellableOnSickLeave",t[t.RuleNoDayOnLeavePeriod=34]="RuleNoDayOnLeavePeriod",t[t.AccountActiveBeforePeriod=35]="AccountActiveBeforePeriod",t[t.AccountActiveAfterPeriod=36]="AccountActiveAfterPeriod",t[t.NotAuthorizedToCancelExistingLeaves=37]="NotAuthorizedToCancelExistingLeaves",t[t.ExistingLeaveWithInactiveAccountNotOverwritable=51]="ExistingLeaveWithInactiveAccountNotOverwritable",t[t.CompulsoryLeaveBatchOnSelectedLeaves=38]="CompulsoryLeaveBatchOnSelectedLeaves",t[t.WorkingDayWarning=39]="WorkingDayWarning",t[t.DayOffWarning=40]="DayOffWarning",t[t.DayOffError=41]="DayOffError",t[t.DayOffWarningLeaveRequest=42]="DayOffWarningLeaveRequest",t[t.WorkcycleExceptionProposalPeriod=43]="WorkcycleExceptionProposalPeriod",t[t.WorkcycleExceptionProposalMaxDuration=44]="WorkcycleExceptionProposalMaxDuration",t[t.WorkcycleExceptionProposalMinDuration=45]="WorkcycleExceptionProposalMinDuration",t[t.WorkcycleExceptionProposalMinOwners=46]="WorkcycleExceptionProposalMinOwners",t[t.WorkcycleExceptionProposalMinExceptions=47]="WorkcycleExceptionProposalMinExceptions",t[t.WorkcycleExceptionProposalExceptionMissing=48]="WorkcycleExceptionProposalExceptionMissing",t[t.ExceptionalLeaveDurationLimitExceeded=49]="ExceptionalLeaveDurationLimitExceeded",t[t.NotAuthorizedToCancelExistingLeavesForCreatingRemoteWork=50]="NotAuthorizedToCancelExistingLeavesForCreatingRemoteWork"}($||($={}));var J=n("pN8U"),Z=n("Qrql"),tt=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function c(t){try{s(i.next(t))}catch(e){a(e)}}function r(t){try{s(i.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,r)}s((i=i.apply(t,e||[])).next())})};const et=["selectAvailableAccountsInput"];function nt(t,e){1&t&&(A.mc(0),A.jc(1,"div",17),A.lc())}function it(t,e){1&t&&(A.oc(0,"div",31),A.oc(1,"div",32),A.jc(2,"span",33),A.nc(),A.gd(3),A.Ac(4,"translate"),A.nc()),2&t&&(A.Wb(3),A.id(" ",A.Bc(4,1,"Figgo.Home.DISTRIBUTION_BY_HOUR_MUST_MATCH_HALFDAY")," "))}function ot(t,e){if(1&t&&(A.oc(0,"div",29),A.ed(1,it,5,3,"div",30),A.nc()),2&t){const t=A.zc(2);A.Wb(1),A.Gc("ngIf",t.proposal.unit===t.Unit.Hour&&!t.displaySpecialInterfaceForHours())}}function at(t,e){if(1&t&&(A.oc(0,"span"),A.gd(1),A.nc()),2&t){const t=A.zc(2);A.Wb(1),A.hd(t.generateEstimateAtTheEndOfMonth(t.proposal.balanceEstimateEndsOn))}}function ct(t,e){1&t&&(A.oc(0,"div",42),A.oc(1,"div",43),A.jc(2,"div",44),A.jc(3,"div",45),A.nc(),A.oc(4,"div",46),A.jc(5,"div",47),A.nc(),A.oc(6,"div",48),A.oc(7,"div",49),A.oc(8,"div",50),A.jc(9,"input",51),A.jc(10,"label",52),A.nc(),A.nc(),A.nc(),A.oc(11,"div",46),A.jc(12,"div",47),A.nc(),A.oc(13,"div",53),A.jc(14,"div",47),A.nc(),A.oc(15,"div",53),A.jc(16,"div",47),A.nc(),A.nc()),2&t&&(A.Wb(3),A.Gc("maxWidth",80),A.Wb(2),A.bd("width",45,"%"),A.Wb(7),A.bd("width",45,"%"),A.Wb(2),A.bd("width",45,"%"),A.Wb(2),A.bd("width",45,"%"))}const rt=function(){return[]};function st(t,e){1&t&&(A.mc(0),A.ed(1,ct,17,9,"div",34),A.oc(2,"div",35),A.oc(3,"div",36),A.oc(4,"div",37),A.jc(5,"div",38),A.nc(),A.jc(6,"div",39),A.jc(7,"div",40),A.jc(8,"div",41),A.jc(9,"div",39),A.jc(10,"div",39),A.nc(),A.nc(),A.lc()),2&t&&(A.Wb(1),A.Gc("ngForOf",A.Jc(3,rt).constructor(3)),A.Wb(4),A.bd("width",200,"px"))}function lt(t,e){if(1&t){const t=A.pc();A.oc(0,"div",58),A.oc(1,"div",39),A.oc(2,"label",59),A.oc(3,"input",60),A.vc("click",function(){A.Tc(t);const e=A.zc().$implicit;return A.zc(2).changeSelectedUnit(e)}),A.nc(),A.oc(4,"span",61),A.oc(5,"span",62),A.gd(6),A.nc(),A.nc(),A.nc(),A.nc(),A.jc(7,"div",39),A.oc(8,"div",48),A.gd(9,"\xa0"),A.nc(),A.jc(10,"div",39),A.jc(11,"div",39),A.jc(12,"div",39),A.nc()}if(2&t){const t=A.zc().$implicit,e=A.zc(2);A.ac("is-selected",e.proposal.unit===t),A.Wb(3),A.Gc("checked",e.proposal.unit===t)("value",t),A.Wb(3),A.hd(e.getTranslatedUnit(t))}}function dt(t,e){1&t&&(A.oc(0,"button",74),A.jc(1,"span",75),A.jc(2,"span",76),A.nc())}function ut(t,e){1&t&&(A.oc(0,"button",77),A.jc(1,"span",78),A.jc(2,"span",79),A.nc())}function gt(t,e){1&t&&(A.oc(0,"button",80),A.jc(1,"span",33),A.jc(2,"span",81),A.nc())}function pt(t,e){if(1&t&&(A.mc(0),A.ed(1,dt,3,0,"button",71),A.ed(2,ut,3,0,"button",72),A.ed(3,gt,3,0,"button",73),A.lc()),2&t){const t=e.$implicit,n=A.zc(4);A.Wb(1),A.Gc("ngIf",t===n.WarningType.Warning),A.Wb(1),A.Gc("ngIf",t===n.WarningType.Error),A.Wb(1),A.Gc("ngIf",t===n.WarningType.Info)}}function ht(t,e){1&t&&A.jc(0,"span",75)}function mt(t,e){1&t&&A.jc(0,"span",78)}function ft(t,e){1&t&&A.jc(0,"span",33)}const vt=function(t,e,n){return{"palette-warning":t,"palette-error":e,"palette-grey":n}};function bt(t,e){if(1&t&&(A.oc(0,"div",82),A.oc(1,"div",83),A.oc(2,"div",32),A.ed(3,ht,1,0,"span",84),A.ed(4,mt,1,0,"span",85),A.ed(5,ft,1,0,"span",86),A.nc(),A.oc(6,"div"),A.gd(7),A.nc(),A.nc(),A.nc()),2&t){const t=e.$implicit,n=A.zc(4);A.Wb(1),A.Gc("ngClass",A.Mc(5,vt,n.getWarningType(t)===n.WarningType.Warning,n.getWarningType(t)===n.WarningType.Error,n.getWarningType(t)===n.WarningType.Info)),A.Wb(2),A.Gc("ngIf",n.getWarningType(t)===n.WarningType.Warning),A.Wb(1),A.Gc("ngIf",n.getWarningType(t)===n.WarningType.Error),A.Wb(1),A.Gc("ngIf",n.getWarningType(t)===n.WarningType.Info),A.Wb(2),A.hd(t.description)}}function At(t,e){if(1&t){const t=A.pc();A.mc(0),A.oc(1,"button",87),A.vc("click",function(){A.Tc(t);const e=A.zc().$implicit;return A.zc(3).decrementAccount(e)}),A.oc(2,"span",88),A.oc(3,"span",89),A.gd(4),A.Ac(5,"translate"),A.nc(),A.nc(),A.nc(),A.oc(6,"div",50),A.oc(7,"input",90),A.vc("ngModelChange",function(e){A.Tc(t);const n=A.zc().$implicit;return A.zc(3).durationModelChanged(e,n)})("mouseup",function(t){return t.target.select()}),A.nc(),A.jc(8,"label",91),A.nc(),A.oc(9,"button",87),A.vc("click",function(){A.Tc(t);const e=A.zc().$implicit;return A.zc(3).incrementAccount(e)}),A.oc(10,"span",92),A.oc(11,"span",89),A.gd(12),A.Ac(13,"translate"),A.nc(),A.nc(),A.nc(),A.lc()}if(2&t){const t=A.zc(),e=t.$implicit,n=t.index,i=A.zc(3);A.Wb(4),A.hd(A.Bc(5,9,"Figgo.Home.DECREMENT_ACCOUNT")),A.Wb(3),A.ac("mod-unUsedCell",0===e.duration),A.Gc("id","proposition_"+n)("step",i.getStepSize(e))("ngModel",e.duration)("disabled",i.isSending||i.isDurationDisabled),A.Wb(1),A.Gc("for","proposition_"+n),A.Wb(4),A.hd(A.Bc(13,11,"Figgo.Home.INCREMENT_ACCOUNT"))}}function Ot(t,e){if(1&t&&(A.mc(0),A.gd(1),A.lc()),2&t){const t=e.$implicit,n=A.zc(2).$implicit,i=A.zc(3);A.Wb(1),A.hd(i.getHourOptionLabel(n.leaveAccountId,t))}}function yt(t,e){if(1&t&&(A.oc(0,"lu-option",98),A.gd(1),A.nc()),2&t){const t=e.$implicit;A.Gc("value",t.duration),A.Wb(1),A.id(" ",t.label," ")}}function Pt(t,e){if(1&t){const t=A.pc();A.mc(0),A.oc(1,"div",93),A.oc(2,"div",94),A.oc(3,"lu-select",95),A.vc("ngModelChange",function(e){A.Tc(t);return A.zc().$implicit.duration=e})("ngModelChange",function(){A.Tc(t);const e=A.zc().$implicit;return A.zc(3).changeHoursAccount(e)}),A.ed(4,Ot,2,1,"ng-container",96),A.oc(5,"lu-option-picker"),A.ed(6,yt,2,2,"lu-option",97),A.nc(),A.nc(),A.jc(7,"label",91),A.nc(),A.nc(),A.lc()}if(2&t){const t=A.zc(),e=t.index,n=t.$implicit,i=A.zc(3);A.Wb(1),A.Gc("id","proposition_"+e),A.Wb(2),A.Gc("ngModel",n.duration)("disabled",i.isSending),A.Wb(3),A.Gc("ngForOf",i.hourOptionsGeneratedByAccountId[n.leaveAccountId]),A.Wb(1),A.Gc("for","proposition_"+e)}}function Ct(t,e){if(1&t&&(A.oc(0,"div",63),A.oc(1,"div",64),A.oc(2,"div",65),A.oc(3,"div",66),A.ed(4,pt,4,3,"ng-container",7),A.nc(),A.oc(5,"strong",67),A.gd(6),A.nc(),A.nc(),A.oc(7,"lu-popover",11,68),A.ed(9,bt,8,9,"div",13),A.nc(),A.nc(),A.jc(10,"div",69),A.Ac(11,"luNumber"),A.oc(12,"div",70),A.oc(13,"div",49),A.ed(14,At,14,13,"ng-container",7),A.ed(15,Pt,8,5,"ng-container",7),A.nc(),A.nc(),A.jc(16,"div",69),A.Ac(17,"luNumber"),A.jc(18,"div",69),A.Ac(19,"luNumber"),A.jc(20,"div",69),A.Ac(21,"luNumber"),A.nc()),2&t){const t=e.$implicit,n=e.index,i=A.Pc(8),o=A.zc(3);A.ac("is-error",o.getFirstWarningTypeForAccountId(t.leaveAccountId)===o.WarningType.Error),A.Wb(1),A.Gc("id","libellecompte_"+n),A.Wb(2),A.Gc("luPopover",i),A.Wb(1),A.Gc("ngIf",o.getFirstWarningTypeForAccountId(t.leaveAccountId)),A.Wb(2),A.hd(t.leaveAccountName),A.Wb(3),A.Gc("ngForOf",o.warningsByAccountId[t.leaveAccountId]),A.Wb(1),A.Gc("id","soldeactuel_"+n)("innerHTML",A.Bc(11,19,t.constraint.currentBalance||0),A.Uc),A.Wb(2),A.ac("is-error",o.getFirstWarningTypeForAccountId(t.leaveAccountId)===o.WarningType.Error),A.Wb(2),A.Gc("ngIf",!o.displaySpecialInterfaceForHours()),A.Wb(1),A.Gc("ngIf",o.displaySpecialInterfaceForHours()),A.Wb(1),A.Gc("id","poses_"+n)("innerHTML",A.Bc(17,21,t.constraint.entitlementEndDateConsumption||0),A.Uc),A.Wb(2),A.Gc("id","acquerir_"+n)("innerHTML",A.Bc(19,23,t.constraint.entitlementEndDateEntitlement||0),A.Uc),A.Wb(2),A.Gc("id","estimation_"+n)("innerHTML",A.Bc(21,25,t.constraint.entitlementEndDateBalance||0),A.Uc)}}function St(t,e){1&t&&(A.oc(0,"button",74),A.jc(1,"span",75),A.jc(2,"span",76),A.nc())}function It(t,e){1&t&&(A.oc(0,"button",77),A.jc(1,"span",101),A.jc(2,"span",79),A.nc())}function wt(t,e){1&t&&(A.oc(0,"button",80),A.jc(1,"span",33),A.jc(2,"span",81),A.nc())}function _t(t,e){if(1&t&&(A.mc(0),A.ed(1,St,3,0,"button",71),A.ed(2,It,3,0,"button",72),A.ed(3,wt,3,0,"button",73),A.lc()),2&t){const t=e.$implicit,n=A.zc(4);A.Wb(1),A.Gc("ngIf",t===n.WarningType.Warning),A.Wb(1),A.Gc("ngIf",t===n.WarningType.Error),A.Wb(1),A.Gc("ngIf",t===n.WarningType.Info)}}function Wt(t,e){1&t&&A.jc(0,"span",75)}function Tt(t,e){1&t&&A.jc(0,"span",78)}function Mt(t,e){1&t&&A.jc(0,"span",33)}function Dt(t,e){if(1&t&&(A.oc(0,"div",82),A.oc(1,"div",83),A.oc(2,"div",102),A.ed(3,Wt,1,0,"span",84),A.ed(4,Tt,1,0,"span",85),A.ed(5,Mt,1,0,"span",86),A.nc(),A.oc(6,"div",103),A.gd(7),A.nc(),A.nc(),A.nc()),2&t){const t=e.$implicit,n=A.zc(4);A.Wb(1),A.Gc("ngClass",A.Mc(5,vt,n.getWarningType(t)===n.WarningType.Warning,n.getWarningType(t)===n.WarningType.Error,n.getWarningType(t)===n.WarningType.Info)),A.Wb(2),A.Gc("ngIf",n.getWarningType(t)===n.WarningType.Warning),A.Wb(1),A.Gc("ngIf",n.getWarningType(t)===n.WarningType.Error),A.Wb(1),A.Gc("ngIf",n.getWarningType(t)===n.WarningType.Info),A.Wb(2),A.hd(t.description)}}function Et(t,e){if(1&t){const t=A.pc();A.mc(0),A.oc(1,"button",87),A.vc("click",function(){A.Tc(t);const e=A.zc().$implicit;return A.zc(3).decrementAccount(e)}),A.oc(2,"span",88),A.oc(3,"span",89),A.gd(4),A.Ac(5,"translate"),A.nc(),A.nc(),A.nc(),A.oc(6,"div",50),A.oc(7,"input",90),A.vc("ngModelChange",function(e){A.Tc(t);const n=A.zc().$implicit;return A.zc(3).durationModelChanged(e,n)})("mouseup",function(t){return t.target.select()}),A.nc(),A.jc(8,"label",91),A.nc(),A.oc(9,"button",87),A.vc("click",function(){A.Tc(t);const e=A.zc().$implicit;return A.zc(3).incrementAccount(e)}),A.oc(10,"span",92),A.oc(11,"span",89),A.gd(12),A.Ac(13,"translate"),A.nc(),A.nc(),A.nc(),A.lc()}if(2&t){const t=A.zc(),e=t.$implicit,n=t.index,i=A.zc(3);A.Wb(4),A.hd(A.Bc(5,9,"Figgo.Home.DECREMENT_ACCOUNT")),A.Wb(3),A.ac("mod-unUsedCell",0===e.duration),A.Gc("id","proposition_"+n)("step",i.getStepSize(e))("ngModel",e.duration)("disabled",i.isSending||i.isDurationDisabled),A.Wb(1),A.Gc("for","proposition_"+n),A.Wb(4),A.hd(A.Bc(13,11,"Figgo.Home.INCREMENT_ACCOUNT"))}}function Lt(t,e){if(1&t&&(A.mc(0),A.gd(1),A.lc()),2&t){const t=e.$implicit,n=A.zc(2).$implicit,i=A.zc(3);A.Wb(1),A.hd(i.getHourOptionLabel(n.leaveAccountId,t))}}function Ft(t,e){if(1&t&&(A.oc(0,"lu-option",98),A.gd(1),A.nc()),2&t){const t=e.$implicit;A.Gc("value",t.duration),A.Wb(1),A.id(" ",t.label," ")}}function kt(t,e){if(1&t){const t=A.pc();A.mc(0),A.oc(1,"div",93),A.oc(2,"div",94),A.oc(3,"lu-select",95),A.vc("ngModelChange",function(e){A.Tc(t);return A.zc().$implicit.duration=e})("ngModelChange",function(){A.Tc(t);const e=A.zc().$implicit;return A.zc(3).changeHoursAccount(e)}),A.ed(4,Lt,2,1,"ng-container",96),A.oc(5,"lu-option-picker"),A.ed(6,Ft,2,2,"lu-option",97),A.nc(),A.nc(),A.nc(),A.nc(),A.lc()}if(2&t){const t=A.zc(),e=t.index,n=t.$implicit,i=A.zc(3);A.Wb(1),A.Gc("id","proposition_"+e),A.Wb(2),A.Gc("ngModel",n.duration)("disabled",i.isSending),A.Wb(3),A.Gc("ngForOf",i.hourOptionsGeneratedByAccountId[n.leaveAccountId])}}function xt(t,e){if(1&t&&(A.oc(0,"div",99),A.oc(1,"div",64),A.oc(2,"div",65),A.oc(3,"div",66),A.ed(4,_t,4,3,"ng-container",7),A.nc(),A.oc(5,"strong",67),A.gd(6),A.nc(),A.nc(),A.oc(7,"lu-popover",11,68),A.ed(9,Dt,8,9,"div",13),A.nc(),A.nc(),A.jc(10,"div",100),A.Ac(11,"luNumber"),A.oc(12,"div",48),A.oc(13,"div",49),A.ed(14,Et,14,13,"ng-container",7),A.ed(15,kt,7,4,"ng-container",7),A.nc(),A.nc(),A.jc(16,"div",100),A.Ac(17,"luNumber"),A.jc(18,"div",100),A.Ac(19,"luNumber"),A.jc(20,"div",100),A.Ac(21,"luNumber"),A.nc()),2&t){const t=e.$implicit,n=e.index,i=A.Pc(8),o=A.zc(3);A.ac("is-error",o.getFirstWarningTypeForAccountId(t.leaveAccountId)===o.WarningType.Error),A.Wb(1),A.Gc("id","libellecompte_"+n),A.Wb(2),A.Gc("luPopover",i),A.Wb(1),A.Gc("ngIf",o.getFirstWarningTypeForAccountId(t.leaveAccountId)),A.Wb(2),A.hd(t.leaveAccountName),A.Wb(3),A.Gc("ngForOf",o.warningsByAccountId[t.leaveAccountId]),A.Wb(1),A.Gc("id","soldeactuel_"+n)("innerHTML",A.Bc(11,19,t.constraint.currentBalance||0),A.Uc),A.Wb(2),A.ac("is-error",o.getFirstWarningTypeForAccountId(t.leaveAccountId)===o.WarningType.Error),A.Wb(2),A.Gc("ngIf",!o.displaySpecialInterfaceForHours()),A.Wb(1),A.Gc("ngIf",o.displaySpecialInterfaceForHours()),A.Wb(1),A.Gc("id","poses_"+n)("innerHTML",A.Bc(17,21,t.constraint.entitlementEndDateConsumption||0),A.Uc),A.Wb(2),A.Gc("id","acquerir_"+n)("innerHTML",A.Bc(19,23,t.constraint.entitlementEndDateEntitlement||0),A.Uc),A.Wb(2),A.Gc("id","estimation_"+n)("innerHTML",A.Bc(21,25,t.constraint.entitlementEndDateBalance||0),A.Uc)}}function Rt(t,e){if(1&t&&(A.mc(0),A.ed(1,lt,13,5,"div",54),A.oc(2,"div",55),A.ed(3,Ct,22,27,"div",56),A.ed(4,xt,22,27,"div",57),A.nc(),A.lc()),2&t){const t=e.$implicit,n=A.zc(2);A.Wb(1),A.Gc("ngIf",n.displayedUnits.length>1),A.Wb(2),A.Gc("ngForOf",n.availableAccountsByUnit[t]),A.Wb(1),A.Gc("ngForOf",n.otherSelectedAccountsByUnit[t])}}function Nt(t,e){if(1&t){const t=A.pc();A.oc(0,"button",120),A.vc("click",function(){A.Tc(t);return A.zc(4).openSelectAvailableAccounts()}),A.jc(1,"span",92),A.gd(2),A.Ac(3,"translate"),A.nc()}2&t&&(A.Wb(2),A.id(" ",A.Bc(3,1,"Figgo.Home.SELECT_ANOTHER_ACCOUNT")," "))}function Ut(t,e){1&t&&(A.gd(0),A.Ac(1,"translate")),2&t&&A.id(" ",A.Bc(1,1,"Figgo.Home.SELECT_ANOTHER_ACCOUNT")," ")}function Gt(t,e){if(1&t&&(A.oc(0,"lu-option",98),A.gd(1),A.nc()),2&t){const t=e.$implicit;A.Gc("value",t),A.Wb(1),A.hd(t.leaveAccountName)}}const Ht=function(){return{}};function jt(t,e){if(1&t){const t=A.pc();A.oc(0,"div",112),A.ed(1,Nt,4,3,"button",113),A.oc(2,"div",114),A.oc(3,"div",112),A.oc(4,"lu-select",95,115),A.vc("ngModelChange",function(e){A.Tc(t);return A.zc(3).selectOtherAccount(e)}),A.ed(6,Ut,2,3,"ng-template",116),A.oc(7,"lu-option-picker-advanced"),A.jc(8,"lu-option-feeder",117),A.jc(9,"lu-option-searcher",118),A.ed(10,Gt,2,2,"lu-option",119),A.nc(),A.nc(),A.nc(),A.nc(),A.nc()}if(2&t){const t=A.zc(3);A.Wb(1),A.Gc("ngIf",!t.isSelectAvailableAccountsOpen),A.Wb(1),A.Gc("hidden",!t.isSelectAvailableAccountsOpen),A.Wb(2),A.Gc("ngModel",A.Jc(6,Ht))("disabled",t.isSending),A.Wb(4),A.Gc("options",t.otherLeftAvailableAccounts),A.Wb(1),A.Gc("searchFn",t.searchOtherAvailableAccountsByName)}}function Bt(t,e){if(1&t&&(A.oc(0,"div",35),A.oc(1,"div",63),A.oc(2,"div",37),A.ed(3,jt,11,7,"div",104),A.nc(),A.jc(4,"div",39),A.oc(5,"div",105),A.oc(6,"div",106),A.oc(7,"div",107),A.oc(8,"span",108),A.gd(9),A.nc(),A.gd(10),A.nc(),A.oc(11,"div",109),A.gd(12),A.nc(),A.nc(),A.nc(),A.oc(13,"div",110),A.oc(14,"div",111),A.gd(15),A.nc(),A.nc(),A.jc(16,"div",39),A.jc(17,"div",39),A.nc(),A.nc()),2&t){const t=A.zc(2);A.Wb(3),A.Gc("ngIf",t.otherLeftAvailableAccounts.length>0),A.Wb(2),A.ac("is-error",t.hasSumOfDurationsError),A.Wb(3),A.ac("u-textError",t.hasSumOfDurationsError),A.Wb(1),A.hd(t.formatDuration(t.sumOfDurations,t.proposal.unit)),A.Wb(1),A.id(" / ",t.formatDuration(t.proposal.duration,t.proposal.unit)," "),A.Wb(2),A.id(" ",t.generateUnitWordGroup(t.proposal.unit,t.proposal.duration)," "),A.Wb(3),A.hd(t.getWholeDaysOffMessage())}}function zt(t,e){1&t&&(A.mc(0),A.oc(1,"div",121),A.jc(2,"div",122),A.nc(),A.lc()),2&t&&(A.Wb(2),A.bd("width",400,"px"))}function Yt(t,e){1&t&&(A.oc(0,"span",131),A.jc(1,"span",132),A.nc())}function qt(t,e){1&t&&(A.oc(0,"span",133),A.jc(1,"span",134),A.nc())}function Vt(t,e){if(1&t&&A.gd(0),2&t){const t=A.zc(2).index,e=A.zc(5);A.id(" ",e.displayApprover(e.chosenApproversFormArray.controls[t].value)," ")}}function $t(t,e){if(1&t&&(A.oc(0,"lu-option",98),A.gd(1),A.nc()),2&t){const t=e.$implicit,n=A.zc(7);A.Gc("value",t),A.Wb(1),A.hd(n.displayApprover(t))}}function Kt(t,e){if(1&t&&(A.oc(0,"div",112),A.oc(1,"lu-select",138),A.ed(2,Vt,1,1,"ng-template",116),A.oc(3,"lu-option-picker-advanced"),A.jc(4,"lu-option-feeder",117),A.jc(5,"lu-option-searcher",118),A.ed(6,$t,2,2,"lu-option",119),A.nc(),A.nc(),A.oc(7,"label",139),A.gd(8),A.Ac(9,"translate"),A.nc(),A.nc()),2&t){const t=A.zc().index,e=A.zc(5);A.Wb(1),A.ac("is-error",e.isChosenApproverError(t)),A.Gc("formControlName",t)("disabled",e.isSending),A.Wb(3),A.Gc("options",e.chosableApprovers),A.Wb(1),A.Gc("searchFn",e.searchManagerByName),A.Wb(3),A.jd(" ",A.Bc(9,8,"Figgo.Home.INFO_YOU_CAN_CHOOSE_MANAGER")," ",t+1," ")}}function Qt(t,e){if(1&t&&(A.oc(0,"div",137),A.ed(1,Kt,10,10,"div",104),A.nc()),2&t){const t=e.$implicit,n=A.zc(5);A.Wb(1),A.Gc("ngIf",!n.skippableApproverChoice(t))}}function Xt(t,e){if(1&t&&(A.oc(0,"div",135),A.ed(1,Qt,2,1,"div",136),A.nc()),2&t){const t=A.zc(4);A.Gc("formGroup",t.chosenApproversFormArray),A.Wb(1),A.Gc("ngForOf",t.defaultApprovers)}}function Jt(t,e){if(1&t){const t=A.pc();A.mc(0),A.oc(1,"div",123),A.vc("click",function(){A.Tc(t);return A.zc(3).toggleApproversParamsDisplayed()}),A.ed(2,Yt,2,0,"span",124),A.ed(3,qt,2,0,"span",125),A.jc(4,"span",129),A.nc(),A.ed(5,Xt,2,2,"div",130),A.lc()}if(2&t){const t=A.zc(3);A.Wb(2),A.Gc("ngIf",!t.isOptionParamsDisplayed),A.Wb(1),A.Gc("ngIf",t.isOptionParamsDisplayed),A.Wb(2),A.Gc("ngIf",t.isApproversParamsDisplayed)}}function Zt(t,e){1&t&&(A.oc(0,"span",131),A.jc(1,"span",132),A.nc())}function te(t,e){1&t&&(A.oc(0,"span",133),A.jc(1,"span",134),A.nc())}function ee(t,e){if(1&t){const t=A.pc();A.oc(0,"div",137),A.oc(1,"app-upload-file",144),A.vc("ngModelChange",function(e){A.Tc(t);return A.zc(4).justif=e}),A.nc(),A.nc()}if(2&t){const t=A.zc(4);A.Wb(1),A.Gc("ngModel",t.justif)("disabled",t.isSending)}}function ne(t,e){if(1&t){const t=A.pc();A.oc(0,"div",140),A.oc(1,"div",137),A.oc(2,"div",141),A.oc(3,"textarea",142),A.vc("ngModelChange",function(e){A.Tc(t);return A.zc(3).proposal.ownerComment=e}),A.Ac(4,"translate"),A.gd(5,"              "),A.nc(),A.nc(),A.nc(),A.ed(6,ee,2,2,"div",143),A.nc()}if(2&t){const t=A.zc(3);A.Wb(3),A.Gc("placeholder",A.Bc(4,3,"Figgo.Home.COMMENT_PLACEHOLDER"))("ngModel",t.proposal.ownerComment),A.Wb(3),A.Gc("ngIf",t.proposal.areSupportingDocumentsManaged)}}function ie(t,e){if(1&t){const t=A.pc();A.mc(0),A.ed(1,Jt,6,3,"ng-container",7),A.oc(2,"button",123),A.vc("click",function(){A.Tc(t);return A.zc(2).toggleOptionParamsDisplayed()}),A.ed(3,Zt,2,0,"span",124),A.ed(4,te,2,0,"span",125),A.jc(5,"span",126),A.nc(),A.ed(6,ne,7,5,"div",127),A.jc(7,"div",128),A.lc()}if(2&t){const t=A.zc(2);A.Wb(1),A.Gc("ngIf",t.chosableApprovers&&t.chosableApprovers.length),A.Wb(2),A.Gc("ngIf",!t.isOptionParamsDisplayed),A.Wb(1),A.Gc("ngIf",t.isOptionParamsDisplayed),A.Wb(2),A.Gc("ngIf",t.isOptionParamsDisplayed)}}function oe(t,e){if(1&t&&(A.oc(0,"div",145),A.oc(1,"div",32),A.jc(2,"span",78),A.nc(),A.gd(3),A.nc()),2&t){const t=A.zc(2);A.Wb(3),A.id(" ",t.httpErrorFeedbackMessage," ")}}function ae(t,e){if(1&t&&(A.mc(0),A.ed(1,ot,2,1,"div",18),A.oc(2,"div",19),A.oc(3,"div",20),A.oc(4,"div",21),A.jc(5,"div",22),A.oc(6,"div",23),A.gd(7),A.nc(),A.jc(8,"div",24),A.oc(9,"div",23),A.gd(10),A.Ac(11,"translate"),A.nc(),A.jc(12,"div",25),A.oc(13,"div",23),A.ed(14,at,2,1,"span",7),A.nc(),A.nc(),A.ed(15,st,11,4,"ng-container",7),A.ed(16,Rt,5,3,"ng-container",26),A.ed(17,Bt,18,9,"div",27),A.nc(),A.nc(),A.ed(18,zt,3,2,"ng-container",7),A.ed(19,ie,8,4,"ng-container",7),A.ed(20,oe,4,1,"div",28),A.lc()),2&t){const t=A.zc();A.Wb(1),A.Gc("ngIf",!t.isFirstLoading),A.Wb(6),A.id(" ",t.generateTodaysBalanceWithunit(t.selectedTimeUnit)," "),A.Wb(3),A.id(" ",A.Bc(11,10,t.selectedTimeUnit===t.TimeUnit.Hour?"Figgo.Home.PLANNED_LEAVE_HOURS":"Figgo.Home.PLANNED_LEAVE")," "),A.Wb(4),A.Gc("ngIf",!t.isFirstLoading),A.Wb(1),A.Gc("ngIf",t.isFirstLoading),A.Wb(1),A.Gc("ngForOf",t.displayedUnits),A.Wb(1),A.Gc("ngIf",!t.isFirstLoading),A.Wb(1),A.Gc("ngIf",t.isFirstLoading),A.Wb(1),A.Gc("ngIf",!t.isFirstLoading),A.Wb(1),A.Gc("ngIf",t.httpErrorFeedbackMessage)}}function ce(t,e){if(1&t&&(A.oc(0,"div",146),A.oc(1,"div",32),A.jc(2,"span",75),A.nc(),A.gd(3),A.nc()),2&t){const t=A.zc(),e=A.Pc(15);A.Gc("luPopover",e),A.Wb(3),A.id(" ",null==t.warningWarnings?null:t.warningWarnings.length," ")}}function re(t,e){if(1&t&&(A.oc(0,"div",147),A.oc(1,"div",32),A.jc(2,"span",78),A.nc(),A.gd(3),A.nc()),2&t){const t=A.zc(),e=A.Pc(18);A.Gc("luPopover",e),A.Wb(3),A.id(" ",null==t.blockingWarnings?null:t.blockingWarnings.length," ")}}function se(t,e){if(1&t&&(A.oc(0,"span"),A.gd(1),A.nc()),2&t){const t=A.zc().$implicit,e=A.zc();A.Wb(1),A.id(" ",null==e.accountById[t.accountId]?null:e.accountById[t.accountId].leaveAccountName," ")}}function le(t,e){if(1&t&&(A.oc(0,"div",82),A.oc(1,"div",148),A.oc(2,"div",32),A.jc(3,"span",75),A.nc(),A.oc(4,"strong",149),A.jc(5,"span",150),A.ed(6,se,2,1,"span",7),A.nc(),A.oc(7,"div"),A.gd(8),A.nc(),A.nc(),A.nc()),2&t){const t=e.$implicit;A.Wb(6),A.Gc("ngIf",t.accountId),A.Wb(2),A.hd(t.description)}}function de(t,e){1&t&&(A.oc(0,"div",32),A.jc(1,"span",78),A.nc())}function ue(t,e){if(1&t&&(A.oc(0,"span"),A.gd(1),A.nc()),2&t){const t=A.zc(2).$implicit,e=A.zc();A.Wb(1),A.id(" ",null==e.accountById[t.accountId]?null:e.accountById[t.accountId].leaveAccountName," ")}}function ge(t,e){if(1&t&&(A.oc(0,"strong",149),A.jc(1,"span",154),A.ed(2,ue,2,1,"span",7),A.nc()),2&t){const t=A.zc().$implicit;A.Wb(2),A.Gc("ngIf",t.accountId)}}const pe=function(t){return{"mod-icon":t}};function he(t,e){if(1&t&&(A.oc(0,"div",82),A.oc(1,"div",151),A.ed(2,de,2,0,"div",152),A.ed(3,ge,3,1,"strong",153),A.oc(4,"div"),A.gd(5),A.nc(),A.nc(),A.nc()),2&t){const t=e.$implicit;A.Wb(1),A.Gc("ngClass",A.Kc(4,pe,t.accountId)),A.Wb(1),A.Gc("ngIf",t.accountId),A.Wb(1),A.Gc("ngIf",t.accountId),A.Wb(2),A.hd(t.description)}}const me=function(t,e,n){return{"is-loading":t,"mod-medium":e,"is-disabled":n}};var fe;!function(t){t.Info="Info",t.Warning="Warning",t.Error="Error"}(fe||(fe={}));class ve{constructor(t,e,n,i,o,a,c,r){this.popupRef=t,this.data=e,this.locale=n,this.modal=i,this.translateService=o,this.userService=a,this.workflowTemplateService=c,this.leaveRequestFactoryService=r,this.Unit=Q.b,this.TimeUnit=K.a,this.isFirstLoading=!0,this.pristine=!0,this.isSending=!1,this.newAccountCredited=!1,this.accountSetToZero=!1,this.isOptionParamsDisplayed=!1,this.isApproversParamsDisplayed=!0,this.selected={otherAccounts:[]},this.hasError=!1,this.hourOptionsGeneratedByAccountId={},this.hasNoAvailableAccount=!1,this.WarningType=fe,this.allowanceData=e}get proposal(){return this._proposal}set proposal(t){this._proposal=t,this.initAvailableAccountUnitsBehavior(),this.updateWarnings(),this.updateAccounts()}get selectedTimeUnit(){var t,e;return(null!==(e=null===(t=this.proposal)||void 0===t?void 0:t.unit)&&void 0!==e?e:this.allowanceData.unit)===Q.b.Hour?K.a.Hour:K.a.Day}get isSelectAvailableAccountsOpen(){var t,e;return null!==(e=null===(t=this.selectAvailableAccounts)||void 0===t?void 0:t.isFocused)&&void 0!==e&&e}get hasSumOfDurationsError(){return this.sumOfDurations!==this.proposal.duration}get isDisabled(){return!this.proposal||this.sumOfDurations!==this.proposal.duration||!this.proposal.isValid}get selectedApprovers(){var t;return null===(t=this.chosenApproversFormArray)||void 0===t?void 0:t.controls.map(t=>t.value)}get isDurationDisabled(){return!this.proposal}cancel(){this.popupRef.dismiss()}ngOnDestroy(){var t;null===(t=this.valueChangesSubscription)||void 0===t||t.unsubscribe(),this.unsubscribeProposalSubscription()}unsubscribeProposalSubscription(){var t,e;null===(t=this.validateProposalSubscription)||void 0===t||t.unsubscribe(),null===(e=this.changeUnitSubscription)||void 0===e||e.unsubscribe()}getTranslatedUnit(t){switch(t){case Q.b.BusinessDay:return this.translateService.instant("Figgo.Home.SEPARATOR_UNIT_BUSINESSDAY");case Q.b.Calendar:return this.translateService.instant("Figgo.Home.SEPARATOR_UNIT_CALENDAR");case Q.b.WorkingDay:return this.translateService.instant("Figgo.Home.SEPARATOR_UNIT_WORKINGDAY");case Q.b.Hour:return this.translateService.instant("Figgo.Home.SEPARATOR_UNIT_HOUR");default:return(t=>{throw new Error("missing implementation for Unit "+t)})(t),""}}closeWithRedirectUrl(t){if(t){document.getElementById("main-iframe").contentWindow.postMessage({eventId:"showRepartitionDone",redirectLocation:t},"*")}this.popupRef.close()}send(){return tt(this,void 0,void 0,function*(){this.isSending=!0,this.populateChosenApprovers(),this.postProposal()})}toggleApproversParamsDisplayed(){this.isApproversParamsDisplayed=!this.isApproversParamsDisplayed}toggleOptionParamsDisplayed(){this.isOptionParamsDisplayed=!this.isOptionParamsDisplayed,this.isOptionParamsDisplayed&&setTimeout(function(){document.querySelector("#optionsParamsAnchor").scrollIntoView({behavior:"smooth"})},50)}openSelectAvailableAccounts(){var t;null===(t=this.selectAvailableAccounts)||void 0===t||t.openPopover()}populateChosenApprovers(){var t,e;if(!this.isApproversParamsDisplayed)return;null!==(e=null===(t=this.selectedApprovers)||void 0===t?void 0:t.some((t,e)=>{var n;return!!(null==t?void 0:t.id)&&t.id!==(null===(n=this.defaultApprovers[e].approver)||void 0===n?void 0:n.id)}))&&void 0!==e&&e&&(this.proposal.chosenApproverIds=this.selectedApprovers.map(t=>{var e;return null!==(e=null==t?void 0:t.id)&&void 0!==e?e:null}))}getFirstWarningTypeForAccountId(t){const e=this.warningsByAccountId[t][0];if(e)return this.getWarningType(e)}getWarningType(t){return t.info||t.error?!t.info&&t.error?fe.Error:t.info?fe.Info:void 0:fe.Warning}sendRequest(){var t,e,n,i,o,a,c;if(!this.isDisabled&&!this.isSending)if(this.isApproversParamsDisplayed&&(null===(t=this.chosenApproversFormArray)||void 0===t?void 0:t.errors))null===(i=null===(n=null===(e=document.querySelector(".modificationValideur"))||void 0===e?void 0:e.querySelector(".is-error, .ng-invalid"))||void 0===n?void 0:n.parentElement)||void 0===i||i.scrollIntoView({behavior:"smooth"});else if(null===(o=this.proposal.agreementWarnings)||void 0===o?void 0:o.length){const t={title:"Figgo.Home.CONFIRM_AGREEMENT_LEAVE_REQUEST_TITLE",subtitle:(null!==(c=null===(a=this.proposal.agreementWarnings)||void 0===a?void 0:a.map(t=>t.description))&&void 0!==c?c:[]).join("<br>"),yes:"Figgo.Home.CONFIRM_AGREEMENT_LEAVE_REQUEST_OK",no:"Figgo.Home.CONFIRM_AGREEMENT_LEAVE_REQUEST_CANCEL"};this.modal.open(L.a,t).onClose.pipe(Object(x.a)(t=>t)).subscribe(()=>{var t;null===(t=this.proposal.agreementWarnings)||void 0===t||t.forEach(t=>t.agreed=!0),this.send()})}else this.send()}postProposal(){this.httpErrorFeedbackMessage="",this.justif&&(this.proposal.attachment={fileRef:this.justif.id,fileName:this.justif.name}),this.unsubscribeProposalSubscription(),this.leaveRequestFactoryService.postProposal(this.proposal).subscribe(t=>{if(!t.isValid)return this.isSending=!1,void(this.proposal=t);this.closeWithRedirectUrl("/Figgo/WebnetRTT/Application/utilisateur/build/dist/home.html?blnRegisterRequest=true&iValidateur1="+t.leaveRequest.nextApproverId+(t.leaveRequest.nextApprover?"&validateur1="+encodeURIComponent(t.leaveRequest.nextApprover.name):"")+(t.leaveRequest.status===V.Approved?"&blnValidationAuto=true":""))},t=>{this.isSending=!1,this.httpErrorFeedbackMessage=this.generateHttpErrorFeedbackMessage(t.status)})}generateHttpErrorFeedbackMessage(t){return 405===t?this.translateService.instant("Figgo.Home.ERROR_NO_MANAGER_DEFINED"):this.translateService.instant("Figgo.Home.ERROR_HTTP")}cancelRequest(){this.isSending||this.cancel()}getStepSize(t){return t.constraint&&t.constraint.stepHour?this.roundToDecimal(t.constraint.stepHour):this.roundToDecimal(t.constraint.halfDayAuthorization?.5:1)}incrementAccount(t){if(this.isSending||!t)return;const e=this.getStepSize(t);0===t.duration&&e>0&&(this.newAccountCredited=!0);const n=this.getSumOfDurations();t.duration+=e,this.reduceStepSizeOfOtherAccount(t,e,n),this.proposal.unit===Q.b.Hour&&(t.duration=this.proposal.duration,X.each(this.allAvailableAccounts,e=>{e!==t&&(e.duration=0)})),this.controlDurationValue(t)}decrementAccount(t){!this.isSending&&t&&(t.duration-=this.getStepSize(t),this.proposal.unit===Q.b.Hour&&(t.duration=0),this.controlDurationValue(t))}reduceStepSizeOfOtherAccount(t,e,n){const i=[...this.allAvailableAccounts,...this.selected.otherAccounts].filter(t=>!!t.duration);if(2===i.length&&n===this.proposal.duration){const n=i.find(e=>e.leaveAccountId!==t.leaveAccountId);n.duration-=e,this.recomputeFinalBalance(n)}}changeHoursAccount(t){[...this.allAvailableAccounts,...this.selected.otherAccounts].filter(e=>!!e.duration&&e.leaveAccountId!==t.leaveAccountId).forEach(t=>t.duration=0),this.controlDurationValue(t)}controlUnitChange(t){t!==this.proposal.unit&&(this.resetOtherUnitDuration(t),this.proposal.unit=t)}resetOtherUnitDuration(t){const e=e=>{e.unit!==t&&(e.duration=0,this.recomputeFinalBalance(e))};this.allAvailableAccounts.forEach(t=>e(t)),this.allOtherAvailableAccounts.forEach(t=>e(t))}controlDurationValue(t){if(this.controlUnitChange(t.unit),this.pristine=!1,clearTimeout(this.inputTimeout),!this.displaySpecialInterfaceForHours()){t.duration||(t.duration=0);const e=this.roundToDecimal(t.duration%this.getStepSize(t));this.proposal.unit!==Q.b.Hour&&0!==e&&(t.duration=this.roundToDecimal(t.duration-e)),t.duration<0&&(t.duration=0),0===t.duration&&(this.accountSetToZero=!0),this.displaySpecialInterfaceForHours()&&t.constraint.durationHour&&t.duration<t.constraint.durationHour&&(t.duration=t.constraint.durationHour),t.constraint&&t.constraint.maxValue&&t.duration>t.constraint.maxValue&&(t.duration=t.constraint.maxValue)}this.updateSumOfDurations(),this.inputTimeout=setTimeout(()=>{this.callFactoryIfNeeded(),this.recomputeFinalBalance(t)},250)}durationModelChanged(t,e){e.duration=this.roundToDecimal(t),setTimeout(()=>this.controlDurationValue(e),500)}selectOtherAccount(t){var e,n;const i=null!==(n=null===(e=X.last(this.selected.otherAccounts))||void 0===e?void 0:e.duration)&&void 0!==n?n:0;this.controlUnitChange(t.unit),this.selected.otherAccounts.push(t),this.otherSelectedAccountsByUnit[t.unit].push(t);const o=this.selected.otherAccounts.map(t=>t.leaveAccountId);this.otherLeftAvailableAccounts=this.allOtherAvailableAccounts.filter(t=>!o.includes(t.leaveAccountId)),this.generateHourOptions(t.leaveAccountId),this.initOtherAvailableAccountDuration(t,i),this.displayedUnits.includes(t.unit)||this.displayedUnits.push(t.unit)}initOtherAvailableAccountDuration(t,e){let n=e;X.each(this.allOtherAvailableAccounts,t=>{t.duration=0}),0===e&&(this.pristine?(n=this.proposal.duration,X.each([...this.allAvailableAccounts,...this.allOtherAvailableAccounts],t=>{t.duration=0,this.recomputeFinalBalance(t)})):n=this.proposal.duration-this.sumOfDurations),n<0&&(n=0),t.duration=n,this.newAccountCredited=!0,this.updateSumOfDurations(),this.callFactoryIfNeeded().then(()=>this.reduceDurationIfNeeded())}reduceDurationIfNeeded(){const t=X.filter([...this.allAvailableAccounts,...this.allOtherAvailableAccounts],t=>t.duration>0);1===t.length&&t[0].duration>this.proposal.duration&&(t[0].duration=this.proposal.duration,this.updateSumOfDurations())}recomputeFinalBalance(t){t.constraint.entitlementEndDateBalance=t.constraint.currentBalance+t.constraint.entitlementEndDateEntitlement-t.constraint.entitlementEndDateConsumption-t.duration}generateRequestSummary(t,e,n,i){const o=this.translateService.instant("Figgo.Home.MORNING"),a=this.translateService.instant("Figgo.Home.AFTERNOON");return this.translateService.instant("Figgo.Home.REPARTITION_TITLE").replace("[FIRST_DAY]",k(t).format("LL")).replace("[MOMENT_FIRST_DAY]",e?o:a).replace("[LAST_DAY]",k(n).format("LL")).replace("[MOMENT_LAST_DAY]",i?o:a)}generateUnitWordGroup(t,e){let n="";switch(t){case Q.b.BusinessDay:n="WORKING_DAY";break;case Q.b.Hour:n="HOUR";break;case Q.b.WorkingDay:n="BUSINESS_DAY";break;case Q.b.Calendar:n="CALENDAR_DAY"}return e>1&&(n+="S"),this.translateService.instant("Figgo.Home."+n)}loadRequestSummary(){this.formatDuration(this.proposal.duration,this.proposal.unit);this.requestSummary=this.generateRequestSummary(this.proposal.startsOn,this.proposal.startsAM,this.proposal.endsOn,this.proposal.endsAM)}getForbiddenPeriodMessage(t,e){return this.translateService.instant("Figgo.Home.INFO_YOU_CANNOT_REQUEST_DAYS_ON_RED_PERIOD").replace("{start}",t).replace("{end}",e)}generateTodaysBalanceWithunit(t){return this.translateService.instant("Figgo.Home.BALANCE_AS_OF_TODAY").replace("{{unit}}",t===K.a.Hour?this.translateService.instant("Figgo.Home.HOURS"):this.translateService.instant("Figgo.Home.DAYS"))}generateEstimateAtTheEndOfMonth(t){return this.translateService.instant("Figgo.Home.ESTIMATE_AT_THE_END_OF").replace("{{monthYear}}",k(t).format("MMM YYYY"))}callFactoryIfNeeded(){return new Promise((t,e)=>{this.isFactoryCallNeeded()?(this.accountSetToZero=!1,this.newAccountCredited=!1,this.isValidating=!0,this.unsubscribeProposalSubscription(),this.validateProposalSubscription=this.leaveRequestFactoryService.validateProposal(Object.assign(Object.assign({},this.proposal),{startsOn:this.allowanceData.startsOn,startsAM:this.allowanceData.startsAM,endsOn:this.allowanceData.endsOn,endsAM:this.allowanceData.endsAM})).subscribe(e=>{this.updateProposalProperties(e),this.isValidating=!1,t()})):t()})}isFactoryCallNeeded(){const t=this.getTotalDaysOff();return this.proposal.unit===Q.b.WorkingDay||this.proposal.unit===Q.b.Hour&&this.displaySpecialInterfaceForHours()||this.sumOfDurations>=this.proposal.duration||t>0&&this.sumOfDurations+t>=this.proposal.duration||this.newAccountCredited||this.accountSetToZero}getSumOfDurations(){if(!this.proposal||!this.allAvailableAccounts)return 0;let t=0,e=0;for(let n=0;n<this.allAvailableAccounts.length;n++)t=this.roundToDecimal(t+this.allAvailableAccounts[n].duration);for(let n=0;n<this.allOtherAvailableAccounts.length;n++)e=this.roundToDecimal(e+this.allOtherAvailableAccounts[n].duration);return this.roundToDecimal(t+e)}updateSumOfDurations(){this.sumOfDurations=this.getSumOfDurations()}displaySpecialInterfaceForHours(){return this.proposal&&this.proposal.unit===Q.b.Hour&&this.proposal.startsOn===this.proposal.endsOn&&(!this.proposal.startsAM||this.proposal.endsAM)}formatDuration(t,e){return e!==Q.b.Hour?Object(i.F)(t,this.locale):this.convertFloatToHoursMinutes(t)}convertFloatToHoursMinutes(t){const e=Math.floor(t).toString();let n=Math.round(t%1*60).toString();return 1===n.toString().length&&(n="0"+n),e+":"+n}generateAllAvailableAccountHourOptions(){this.allAvailableAccounts.forEach(t=>this.generateHourOptions(t.leaveAccountId))}generateHourOptions(t){if(this.proposal.unit!==Q.b.Hour)return;this.hourOptionsGeneratedByAccountId[t]=[{label:"0h00",duration:0}];const e=this.accountById[t];if(e.constraint){const n=e.constraint.stepHour?e.constraint.stepHour:.5,i=e.constraint.durationHour?e.constraint.durationHour:0;let o=e.constraint.maxValue>this.initialDuration?this.initialDuration:e.constraint.maxValue;isNaN(o)&&(o=Math.max(this.initialDuration,this.proposal.duration));let a=0;for(this.hourOptionsGeneratedByAccountId[t]=[];a<=o;)(a>=i||0===a)&&this.hourOptionsGeneratedByAccountId[t].push({label:this.convertFloatToHoursMinutes(a),duration:a}),a+=n;a-n<o&&this.hourOptionsGeneratedByAccountId[t].push({label:this.convertFloatToHoursMinutes(o),duration:o})}this.hourOptionsGeneratedByAccountId[t].reverse()}updateWarnings(){const t=[fe.Error,fe.Warning,fe.Info],e=(e,n)=>t.indexOf(this.getWarningType(e))-t.indexOf(this.getWarningType(n)),n=t=>{var e;const n=null!==(e=t.constraint.warnings)&&void 0!==e?e:[];return 0!==t.duration?n:n.filter(t=>this.getWarningType(t)===fe.Info)};this.warningsByAccountId=X.reduce([...this.allAvailableAccounts,...this.allOtherAvailableAccounts],(t,i)=>{const o=n(i).sort(e);return t[i.leaveAccountId]=o,t},{});const i=[...X.flatten([...this.allAvailableAccounts,...this.allOtherAvailableAccounts].map(t=>n(t))),...this.proposal.warnings];this.blockingWarnings=i.filter(t=>this.getWarningType(t)===fe.Error),this.warningWarnings=i.filter(t=>this.getWarningType(t)===fe.Warning)}updateAccounts(){this.accountById=Object.assign(Object.assign({},X.keyBy(this.allAvailableAccounts,t=>t.leaveAccountId)),X.keyBy(this.allOtherAvailableAccounts,t=>t.leaveAccountId))}changeSelectedUnit(t){t!==this.proposal.unit&&(this.isValidating=!0,this.unsubscribeProposalSubscription(),this.controlUnitChange(t),this.changeUnitSubscription=this.leaveRequestFactoryService.getProposal(this.allowanceData.ownerId,this.allowanceData.startsOn,this.allowanceData.startsAM,this.allowanceData.endsOn,this.allowanceData.endsAM,t).subscribe(t=>{this.mergeProposalDurations(t),this.updateProposalProperties(t),this.initProposalLoaded(),this.isValidating=!1}))}initAvailableAccountUnitsBehavior(){var t,e;this.allAvailableUnits=this._proposal.unit===Q.b.Hour?[Q.b.Hour]:null!==(e=null===(t=this.proposal.allUnits)||void 0===t?void 0:t.filter(t=>t!==Q.b.Hour))&&void 0!==e?e:[this.allowanceData.unit];const n=()=>this.allAvailableUnits.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:[]}),{});this.allAvailableAccounts=this._proposal.availableAccounts,this.availableAccountsByUnit=Object.assign(Object.assign({},n()),X.groupBy(this.allAvailableAccounts,t=>t.unit)),this.otherSelectedAccountsByUnit=n(),this.allOtherAvailableAccounts=this.proposal.otherAvailableAccounts,this.otherLeftAvailableAccounts=this.allOtherAvailableAccounts,this.displayedUnits=X.uniq(this.allAvailableAccounts.map(t=>t.unit))}mergeProposalDurations(t){this.resetOtherUnitDuration(),t.availableAccounts.forEach(t=>{this.accountById[t.leaveAccountId].constraint=t.constraint,this.accountById[t.leaveAccountId].duration=t.duration}),this.proposal.duration=t.duration}updateProposalProperties(t){this.proposal.agreementWarnings=t.agreementWarnings,this.proposal.isValid=t.isValid,this.proposal.duration=t.duration>0?t.duration:this.proposal.duration,this.proposal.daysOff=t.daysOff,this.proposal.warnings=t.warnings,this.proposal.endsOn=t.endsOn,this.proposal.endsAM=t.endsAM,this.hasError=this.funcHasError(t),this.loadRequestSummary();const e=[{old:this.allAvailableAccounts,new:t.availableAccounts},{old:this.allOtherAvailableAccounts,new:t.otherAvailableAccounts}];X.each(e,t=>{X.each(t.old,e=>{const n=t.new.filter(t=>t.leaveAccountId===e.leaveAccountId);n.length&&(e.constraint.warnings=n[0].constraint.warnings)})}),this.updateWarnings()}get hasNewRepartition(){return window.homeParams.hasNewRepartition}ngOnInit(){const t=this.allowanceData.unit!==Q.b.Hour&&this.hasNewRepartition?void 0:this.allowanceData.unit;this.leaveRequestFactoryService.getProposal(this.allowanceData.ownerId,this.allowanceData.startsOn,this.allowanceData.startsAM,this.allowanceData.endsOn,this.allowanceData.endsAM,t).subscribe(t=>{this.proposal=t,this.initialDuration=this.proposal.duration,this.generateAllAvailableAccountHourOptions(),this.initProposalLoaded(),this.initChosableApproversBehavior(),this.hasNoAvailableAccount=!this.allAvailableAccounts.length&&!this.allOtherAvailableAccounts.length,this.isFirstLoading=!1,this.allAvailableAccounts.length||1!==this.allOtherAvailableAccounts.length||this.selectOtherAccount(this.allOtherAvailableAccounts[0])})}initProposalLoaded(){X.each(this.allAvailableAccounts,t=>{this.recomputeFinalBalance(t)}),this.loadRequestSummary(),this.getWholeDaysOffMessage(),this.hasError=this.funcHasError(this.proposal),this.updateSumOfDurations()}initChosableApproversBehavior(){this.allowanceData.currentUser===this.allowanceData.ownerId&&this.workflowTemplateService.getDefaultApprovers(this.allowanceData.ownerId).subscribe(t=>{this.defaultApprovers=t,this.userService.getManagers().subscribe(t=>{if(null==t?void 0:t[0]){for(const e of this.defaultApprovers.filter(t=>!!t.approver))t.find(t=>t.id===e.approver.id)||t.push(e.approver);this.chosableApprovers=t.sort((t,e)=>this.displayApprover(t).localeCompare(this.displayApprover(e))),this.chosenApproversFormArray=new v.d(this.defaultApprovers.map(t=>new v.g(t.approver)),this.validateChosenApprovers.bind(this)),this.valueChangesSubscription=this.chosenApproversFormArray.valueChanges.subscribe(()=>{this.isDisabled&&this.callFactoryIfNeeded()})}})})}getHourOptionLabel(t,e){var n;return null===(n=this.hourOptionsGeneratedByAccountId[t].find(t=>t.duration===e))||void 0===n?void 0:n.label}validateChosenApprovers(t){var e,n;if(null===(n=null===(e=this.chosableApprovers)||void 0===e?void 0:e.length)||void 0===n||!n||!t.controls.find(t=>t.dirty))return null;const i=t.controls.map((t,e)=>[t,e]).filter(([t,e])=>!t.value&&!this.defaultApprovers[e].skipIfApproverUndefined).map(([t,e])=>e);let o=[];return t.controls.some(t=>t.dirty)&&(o=[].concat(...Object.values(t.controls.map((t,e)=>[t,e]).filter(([t,e])=>!!t.value&&!this.defaultApprovers[e].skipIfApproverUndefined).map(([t,e])=>[t.value.id,e]).reduce((t,[e,n])=>(t[e]||(t[e]=[]),t[e].push(n),t),{})).filter(t=>t.length>1))),i.length||o.length?{missingSelectedApproversIndexs:i,duplicateApproversIndexs:o}:null}isChosenApproverError(t){var e,n;return(null===(e=this.chosenApproversFormArray.errors)||void 0===e?void 0:e.missingSelectedApproversIndexs.includes(t))||(null===(n=this.chosenApproversFormArray.errors)||void 0===n?void 0:n.duplicateApproversIndexs.includes(t))}displayApprover(t){return t?`${t.lastName} ${t.firstName}`:""}skippableApproverChoice(t){return t.skipIfApproverUndefined&&!t.approver}funcHasError(t){return X.filter(t.warnings,t=>t.error).length>0||X.filter(t.availableAccounts,t=>X.filter(t.constraint.warnings,t=>t.error).length>0).length>0}getDaysOffMessage(t){let e="";if(Object.keys(t).length>0){const n=[];for(const e of Object.keys(t)){const i=t[e];if(i>0){let t=e;i>1&&(t+="s"),t=t.toUpperCase(),n.push(i+" "+this.translateService.instant("Figgo.Home."+t))}}e=n.length>0?this.translateService.instant("Figgo.Home.DAYS_OFF_INCLUDING")+" "+n.join(", "):this.translateService.instant("Figgo.Home.THERE_IS_NO_MORE_DAY_OFF_TO_COUNT")}return e}getTotalDaysOff(){let t=0;if(this.proposal.daysOff&&Object.keys(this.proposal.daysOff).length>0)for(const e of Object.keys(this.proposal.daysOff))t+=this.proposal.daysOff[e];return t}getWholeDaysOffMessage(){if(!this.proposal||this.proposal.unlimitedDaysOffCalculation||this.proposal.unit===Q.b.Calendar)return"";let t=!1;const e={monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,saturday:0,sunday:0};if(this.proposal.daysOff&&this.proposal.daysOff!=={}&&Object.keys(this.proposal.daysOff).length>0){t=!0;for(const t of Object.keys(this.proposal.daysOff))e[t]+=parseFloat(this.proposal.daysOff[t])}return t?this.getDaysOffMessage(e):""}searchOtherAvailableAccountsByName(t,e){const n=t=>X.deburr((t||"").toLocaleLowerCase()).replace(/\s+/g,"");return-1!==n(t.leaveAccountName).indexOf(n(e))}searchManagerByName(t,e){const n=t=>X.deburr((t||"").toLocaleLowerCase()).replace(/\s+/g,""),i=n(e),o=n(t.firstName),a=n(t.lastName);return-1!==(o+a).indexOf(i)||-1!==(a+o).indexOf(i)}roundToDecimal(t){return Math.round(100*t)/100}}ve.\u0275fac=function(t){return new(t||ve)(A.ic(g.a),A.ic(g.b),A.ic(A.H),A.ic(u.d),A.ic(p.d),A.ic(M),A.ic(D),A.ic(W))},ve.\u0275cmp=A.cc({type:ve,selectors:[["app-leave-repartition-modal"]],viewQuery:function(t,e){if(1&t&&A.ld(et,!0),2&t){let t;A.Oc(t=A.wc())&&(e.selectAvailableAccounts=t.first)}},decls:22,vars:12,consts:[["cdkTrapFocus","true","cdkTrapFocusAutoCapture","true",1,"lu-modal-panel-inner"],[1,"lu-modal-header"],[1,"lu-modal-header-title"],[1,"lu-modal-header-close",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-cross"],["translate","Figgo.IconMask.CLOSE",1,"u-mask"],[1,"lu-modal-content","mod-repartition"],[4,"ngIf"],[1,"lu-modal-footer"],["luPopoverTrigger","hover","luPopoverAlignment","left","luPopoverPosition","above","class","callout mod-icon mod-inline palette-warning u-marginReset u-marginRightSmall",3,"luPopover",4,"ngIf"],["luPopoverTrigger","hover","luPopoverAlignment","left","luPopoverPosition","above","class","callout mod-icon mod-inline palette-error u-marginReset u-marginRightSmall",3,"luPopover",4,"ngIf"],["content-classes","mod-rounded mod-small","close-on-click","true"],["warningWarningsPopover",""],["class","popover-menu-item",4,"ngFor","ngForOf"],["blockingWarningsPopover",""],["id","actionSend","translate","Figgo.Home.ACTION_SEND_REQUEST",1,"button","palette-secondary",3,"ngClass","click"],["translate","Figgo.Home.ACTION_CANCEL",1,"button","mod-link",3,"click"],["translate","Figgo.Home.NO_ACCOUNT_AVAILABLE_ON_PERIOD",1,"callout-alert"],["id","requestSummary",4,"ngIf"],[1,"table-container","u-marginTopStandard","u-marginBottomSmaller"],[1,"table"],[1,"table-head"],["translate","Figgo.Home.ACCOUNT",1,"table-head-row-cell","mod-cellName"],[1,"table-head-row-cell","mod-numberDisplay","u-textRight"],["translate","Figgo.Home.NEW_REQUEST",1,"table-head-row-cell","mod-cellInput"],["translate","Figgo.Home.ENTITLEMENT_TO_BE_EARNED",1,"table-head-row-cell","mod-numberDisplay","u-textRight"],[4,"ngFor","ngForOf"],["class","table-body table-footer",4,"ngIf"],["class","callout mod-icon palette-error",4,"ngIf"],["id","requestSummary"],["class","callout palette-primary mod-icon",4,"ngIf"],[1,"callout","palette-primary","mod-icon"],[1,"callout-icon"],["aria-hidden","true",1,"lucca-icon","icon-info"],["class","table-body-row u-animatedLoading mod-vertical mod-tableHorizontal",4,"ngFor","ngForOf"],[1,"table-body","table-footer"],[1,"table-body-row","u-animatedScaleInTop","u-animatedLoading","mod-tableHorizontal","mod-vertical","mod-animatedLoading-delated"],[1,"table-body-row-cell","mod-cellSelectOtherAccount"],[1,"u-animatedLoading-loader","mod-inlineBlock"],[1,"table-body-row-cell"],[1,"table-body-row-cell","cell-total","mod-cellInput"],[1,"table-body-row-cell","table-body-row-cellMessage"],[1,"table-body-row","u-animatedLoading","mod-vertical","mod-tableHorizontal"],[1,"table-body-row-cell","mod-cellName"],[1,"cellNameWarningContainer"],["app-random-width","",1,"u-animatedLoading-loader","mod-inlineBlock",3,"maxWidth"],[1,"table-body-row-cell","mod-shortest"],[1,"u-animatedLoading-loader","u-marginLeftAuto"],[1,"table-body-row-cell","mod-cellInput"],[1,"mod-cellInput-wrapper"],[1,"textfield","mod-shortest","mod-small"],["disabled","",1,"textfield-input","u-textRight","mod-unUsedCell"],[1,"textfield-label","u-mask"],[1,"table-body-row-cell","mod-shortest","u-textRight"],["class","table-body-row mod-rowUnit",3,"is-selected",4,"ngIf"],[1,"table-body"],["class","table-body-row u-animatedScaleInTop",3,"is-error",4,"ngFor","ngForOf"],["class","table-body-row",3,"is-error",4,"ngFor","ngForOf"],[1,"table-body-row","mod-rowUnit"],[1,"radio"],["type","radio","name","operationType",1,"radio-input",3,"checked","value","click"],[1,"radio-label"],[1,"radio-label-text","u-textSmall"],[1,"table-body-row","u-animatedScaleInTop"],[1,"table-body-row-cell","mod-cellName",3,"id"],[1,"u-displayFlex","u-alignItemsCenter"],["luPopoverTrigger","hover","luPopoverAlignment","left","luPopoverPosition","below",1,"cellNameWarningContainer",3,"luPopover"],[1,"u-displayInlineBlock"],["moreOptions",""],[1,"table-body-row-cell","mod-numberDisplay","u-textRight",3,"id","innerHTML"],[1,"table-body-row-cell","mod-cellInput","u-paddingLeftSmaller","u-paddingRightSmaller"],["class","actionIcon palette-warning",4,"ngIf"],["class","actionIcon palette-error",4,"ngIf"],["class","actionIcon",4,"ngIf"],[1,"actionIcon","palette-warning"],["aria-hidden","true",1,"lucca-icon","icon-warning"],["translate","Figgo.IconMask.WARNING",1,"u-mask"],[1,"actionIcon","palette-error"],["aria-hidden","true",1,"lucca-icon","icon-error"],["translate","Figgo.IconMask.ERROR",1,"u-mask"],[1,"actionIcon"],["translate","Figgo.IconMask.INFORMATION",1,"u-mask"],[1,"popover-menu-item"],[1,"callout","mod-icon","mod-no-dash","u-marginBottomReset",3,"ngClass"],["class","lucca-icon icon-warning","aria-hidden","true",4,"ngIf"],["class","lucca-icon icon-error","aria-hidden","true",4,"ngIf"],["class","lucca-icon icon-info","aria-hidden","true",4,"ngIf"],[1,"button","buttonModifyAccount","mod-link","u-paddingReset","u-marginReset",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-minus"],[1,"u-mask"],["type","number","min","0",1,"textfield-input","u-textRight",3,"id","step","ngModel","disabled","ngModelChange","mouseup"],[1,"textfield-label","u-mask",3,"for"],["aria-hidden","true",1,"lucca-icon","icon-plus"],[3,"id"],[1,"textfield","mod-shorter"],[1,"textfield-input",3,"ngModel","disabled","ngModelChange"],[4,"luDisplayer"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"table-body-row"],[1,"table-body-row-cell","u-textRight",3,"id","innerHTML"],["aria-hidden","true",1,"lucca-icon","iwon-error"],[1,"callout-icon","u-marginLeftSmallest"],[1,"u-marginLeftSmallest"],["class","textfield mod-block",4,"ngIf"],["id","totalTd",1,"table-body-row-cell","cell-total","mod-cellInput"],[1,"mod-cellInput-wrapper","u-flexDirectionColumn"],[1,"repartitionTotal"],[1,"sumOfDuration"],[1,"unitOfWork","u-textItalic"],[1,"table-body-row-cell","table-body-row-cellMessage",2,"vertical-align","top","text-align","left"],["id","strPhraseJoursOuvrables",1,"wholeDaysOffMessage"],[1,"textfield","mod-block"],["class","button mod-link u-paddingLeftSmallest",3,"click",4,"ngIf"],[1,"selectOtherAccountContainer",3,"hidden"],["selectAvailableAccountsInput",""],["luDisplayer",""],[3,"options"],[3,"searchFn"],[3,"value",4,"luForOptions"],[1,"button","mod-link","u-paddingLeftSmallest",3,"click"],[1,"u-animatedLoading","mod-tableHorizontal","mod-vertical","u-marginBottomSmaller"],[1,"u-animatedLoading-loader"],[1,"button","mod-link","u-marginBottomSmaller","u-paddingLeftSmallest","u-paddingRightSmall",3,"click"],["class","lucca-icon icon-expand u-marginLeftSmallest","aria-hidden","true",4,"ngIf"],["class","lucca-icon icon-collapse u-marginLeftSmallest","aria-hidden","true",4,"ngIf"],["translate","Figgo.Home.OPTIONNAL_PARAMETERS",1,"u-marginLeftSmallest"],["class","grid u-animatedScaleInTop",4,"ngIf"],["id","optionsParamsAnchor"],["translate","Figgo.Home.EDIT_APPROVER"],["class","grid u-animatedScaleInTop u-marginBottomSmaller",3,"formGroup",4,"ngIf"],["aria-hidden","true",1,"lucca-icon","icon-expand","u-marginLeftSmallest"],["translate","Figgo.IconMask.EXPAND",1,"u-mask"],["aria-hidden","true",1,"lucca-icon","icon-collapse","u-marginLeftSmallest"],["translate","Figgo.IconMask.COLLAPSE",1,"u-mask"],[1,"grid","u-animatedScaleInTop","u-marginBottomSmaller",3,"formGroup"],["class","grid-md6",4,"ngFor","ngForOf"],[1,"grid-md6"],[1,"textfield-input",3,"formControlName","disabled"],[1,"textfield-label"],[1,"grid","u-animatedScaleInTop"],[1,"textfield","mod-block","mod-multiline","mod-textAreasComment"],["id","comment","maxlength","1000",1,"textfield-input",3,"placeholder","ngModel","ngModelChange"],["class","grid-md6",4,"ngIf"],[3,"ngModel","disabled","ngModelChange"],[1,"callout","mod-icon","palette-error"],["luPopoverTrigger","hover","luPopoverAlignment","left","luPopoverPosition","above",1,"callout","mod-icon","mod-inline","palette-warning","u-marginReset","u-marginRightSmall",3,"luPopover"],["luPopoverTrigger","hover","luPopoverAlignment","left","luPopoverPosition","above",1,"callout","mod-icon","mod-inline","palette-error","u-marginReset","u-marginRightSmall",3,"luPopover"],[1,"callout","mod-icon","mod-no-dash","palette-warning","u-marginBottomReset"],[1,"callout-title"],["translate","Figgo.Home.NON_BLOKING_WARNING"],[1,"callout","mod-no-dash","palette-error","u-marginBottomReset",3,"ngClass"],["class","callout-icon",4,"ngIf"],["class","callout-title",4,"ngIf"],["translate","Figgo.Home.BLOKING_WARNING"]],template:function(t,e){1&t&&(A.oc(0,"section",0),A.oc(1,"div",1),A.oc(2,"h2",2),A.gd(3),A.nc(),A.oc(4,"button",3),A.vc("click",function(){return e.cancel()}),A.jc(5,"span",4),A.jc(6,"span",5),A.nc(),A.nc(),A.oc(7,"div",6),A.mc(8),A.ed(9,nt,2,0,"ng-container",7),A.ed(10,ae,21,12,"ng-container",7),A.lc(),A.nc(),A.oc(11,"div",8),A.ed(12,ce,4,2,"div",9),A.ed(13,re,4,2,"div",10),A.oc(14,"lu-popover",11,12),A.ed(16,le,9,2,"div",13),A.nc(),A.oc(17,"lu-popover",11,14),A.ed(19,he,6,6,"div",13),A.nc(),A.oc(20,"div",15),A.vc("click",function(){return e.sendRequest()}),A.nc(),A.oc(21,"div",16),A.vc("click",function(){return e.cancelRequest()}),A.nc(),A.nc(),A.nc()),2&t&&(A.Wb(3),A.hd(e.requestSummary),A.Wb(6),A.Gc("ngIf",e.hasNoAvailableAccount),A.Wb(1),A.Gc("ngIf",!e.hasNoAvailableAccount),A.Wb(2),A.Gc("ngIf",null==e.warningWarnings?null:e.warningWarnings.length),A.Wb(1),A.Gc("ngIf",null==e.blockingWarnings?null:e.blockingWarnings.length),A.Wb(3),A.Gc("ngForOf",e.warningWarnings),A.Wb(3),A.Gc("ngForOf",e.blockingWarnings),A.Wb(1),A.Gc("ngClass",A.Mc(8,me,e.isSending||e.isValidating,e.isSending||e.isValidating,e.isDisabled)))},directives:[p.a,i.q,I.d,i.p,i.o,J.a,I.f,v.x,v.c,v.r,v.u,w.b,P.e,S.s,S.l,S.r,S.j,S.w,S.f,v.s,v.k,v.i,v.n,Z.a],pipes:[p.c,C.b],styles:["[hidden][_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{height:0;padding-top:0;padding-bottom:0;border:0;margin:0;overflow:hidden}[hidden][_ngcontent-%COMP%]   .table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .textfield[_ngcontent-%COMP%], [hidden][_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [hidden][_ngcontent-%COMP%]   app-no-value-placeholder[_ngcontent-%COMP%]{display:none}.lu-modal-header-title[_ngcontent-%COMP%]{font-size:1.375rem}.lu-modal-panel-inner[_ngcontent-%COMP%]{max-height:85vh}.lu-modal-content.mod-repartition[_ngcontent-%COMP%]{max-height:calc(85vh - 8rem);min-height:15rem}.textfield.mod-textAreasComment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:136px;margin:0}.table-container[_ngcontent-%COMP%]{margin-right:-2rem;margin-left:-2rem}.table-head-row-cell[_ngcontent-%COMP%]{font-size:1rem;padding:1rem .8rem;vertical-align:bottom}.table-head-row-cell.mod-cellName[_ngcontent-%COMP%]{padding-left:35px}.table-body-row-cell[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}.table-body-row-cell.mod-cellName[_ngcontent-%COMP%]{padding-left:0}.table-body-row-cell.mod-cellName[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{vertical-align:middle}.mod-cellSelectOtherAccount[_ngcontent-%COMP%]{padding-left:35px}.mod-cellSelectOtherAccount[_ngcontent-%COMP%]   .button.mod-link[_ngcontent-%COMP%]{color:#7072d2}.selectOtherAccountContainer[_ngcontent-%COMP%]{width:100%}.table-body-row-cell.mod-numberDisplay[_ngcontent-%COMP%], .table-head-row-cell.mod-numberDisplay[_ngcontent-%COMP%]{width:7.5rem}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%], .table-head-row-cell.mod-cellInput[_ngcontent-%COMP%]{background:#7072d2;color:#fff;width:8.5rem;padding-left:.25rem;padding-right:.25rem}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .table-head-row-cell.mod-cellInput[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .textfield-input.mod-unUsedCell[_ngcontent-%COMP%], .table-head-row-cell.mod-cellInput[_ngcontent-%COMP%]   .textfield-input.mod-unUsedCell[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.15);color:#fff}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .textfield-input[_ngcontent-%COMP%], .table-head-row-cell.mod-cellInput[_ngcontent-%COMP%]   .textfield-input[_ngcontent-%COMP%]{margin-bottom:.2rem}.table-body-row-cell.is-error[_ngcontent-%COMP%], .table-head-row-cell.is-error[_ngcontent-%COMP%]{background-color:#f42144}.table-body-row.mod-rowUnit[_ngcontent-%COMP%]   .table-body-row-cell[_ngcontent-%COMP%]{background:#f3f5fc;color:#8992ae;border-width:0;border-bottom:1px #eceff8;border-style:solid}.table-body-row.mod-rowUnit[_ngcontent-%COMP%]   .table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]{background:#a0a1ee}.table-body-row.mod-rowUnit.is-selected[_ngcontent-%COMP%]   .table-body-row-cell[_ngcontent-%COMP%]{background:#fff4d6;color:#485375}.table-body-row.mod-rowUnit.is-selected[_ngcontent-%COMP%]   .table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]{background:#a0a1ee}.table-body-row.mod-rowUnit[_ngcontent-%COMP%]   .radio-label-text[_ngcontent-%COMP%]{position:relative;bottom:1px}.table-body-row.mod-rowUnit[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   .radio-input[_ngcontent-%COMP%]:focus ~ .radio-label[_ngcontent-%COMP%]:before{box-shadow:0 0 0 4px #fde9b4}.cellNameWarningContainer[_ngcontent-%COMP%]{width:35px;display:inline-block}.table-head-row-cell.mod-cellInput[_ngcontent-%COMP%]{text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}.table-footer[_ngcontent-%COMP%]   .table-body-row-cell[_ngcontent-%COMP%]{border:0}.table-footer[_ngcontent-%COMP%]   .table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .mod-cellInput-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .textfield[_ngcontent-%COMP%]{margin-top:.25rem}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .textfield[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #c6c7fb,inset 0 0 0 1px #7d7fe5}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .buttonModifyAccount[_ngcontent-%COMP%]{color:#fff}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .buttonModifyAccount[_ngcontent-%COMP%]   .lucca-icon[_ngcontent-%COMP%]{font-size:1.3rem}.table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .buttonModifyAccount[_ngcontent-%COMP%]:focus, .table-body-row-cell.mod-cellInput[_ngcontent-%COMP%]   .buttonModifyAccount[_ngcontent-%COMP%]:hover{box-shadow:none;background:hsla(0,0%,100%,.15)}.cell-total[_ngcontent-%COMP%]{padding:.25rem .25rem .5rem;min-height:3.125rem;color:#e1e2fe}.cell-total[_ngcontent-%COMP%]   .repartitionTotal[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;white-space:nowrap}.cell-total[_ngcontent-%COMP%]   .sumOfDuration[_ngcontent-%COMP%]{color:#fff}.cell-total.is-error[_ngcontent-%COMP%]{background:#fff5f7;color:#1e263e}.cell-total.is-error[_ngcontent-%COMP%]   .sumOfDuration[_ngcontent-%COMP%]{color:#f42144}.table-body-row.is-error[_ngcontent-%COMP%]{background-color:rgba(244,33,68,.15)}.popover-menu-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{vertical-align:middle}.table-body-row-cellMessage[_ngcontent-%COMP%]{position:relative}.wholeDaysOffMessage[_ngcontent-%COMP%]{width:250%;position:absolute;top:1rem}.u-animatedLoading-loader.mod-inlineBlock[_ngcontent-%COMP%]{display:inline-block}.mod-vertical.mod-animatedLoading-delated[_ngcontent-%COMP%]{-webkit-animation-delay:2s;animation-delay:2s}"]});class be{constructor(t){this.http=t}get(t,e,n){return this.http.get(`/areas/figgo/EventHandler.ashx?salarie=${t}&since=${e.toISOString()}&take=${n}`).pipe(Object(T.a)(t=>t.map(t=>({eventDate:k(t.eventDate),eventDateFormated:k(t.eventDate).format("L LT"),eventDescription:t.eventDescription}))))}}function Ae(t,e){1&t&&A.jc(0,"div",10)}function Oe(t,e){if(1&t&&(A.oc(0,"tr",15),A.oc(1,"td",16),A.oc(2,"div",17),A.gd(3),A.nc(),A.jc(4,"div",18),A.nc(),A.nc()),2&t){const t=e.$implicit;A.Wb(3),A.hd(t.eventDateFormated),A.Wb(1),A.Gc("innerHTML",t.eventDescription,A.Uc)}}function ye(t,e){1&t&&A.jc(0,"div",10)}function Pe(t,e){if(1&t){const t=A.pc();A.oc(0,"button",20),A.vc("click",function(){A.Tc(t);return A.zc(3).loadMore()}),A.jc(1,"span",21),A.jc(2,"span",22),A.nc()}}function Ce(t,e){if(1&t&&(A.oc(0,"tr",15),A.oc(1,"td",16),A.ed(2,ye,1,0,"div",6),A.ed(3,Pe,3,0,"button",19),A.nc(),A.nc()),2&t){const t=A.zc(2);A.Wb(2),A.Gc("ngIf",t.isLoadingMore),A.Wb(1),A.Gc("ngIf",!t.isLoadingMore)}}function Se(t,e){if(1&t&&(A.mc(0),A.oc(1,"table",11),A.oc(2,"tbody",12),A.ed(3,Oe,5,2,"tr",13),A.ed(4,Ce,4,2,"tr",14),A.nc(),A.nc(),A.lc()),2&t){const t=A.zc();A.Wb(3),A.Gc("ngForOf",t.actions)("ngForTrackBy",t.actionIdentifier),A.Wb(1),A.Gc("ngIf",t.canLoadMore)}}be.\u0275fac=function(t){return new(t||be)(A.sc(o.b))},be.\u0275prov=A.ec({token:be,factory:be.\u0275fac});class Ie{constructor(t,e,n){this.popupRef=t,this.userId=e,this.recentActionsService=n,this.isLoading=!0,this.isLoadingMore=!1,this.canLoadMore=!0,this.actions=[],this.lastEventDate=k(),this.eventNumberTake=10}ngOnInit(){this.loadMore()}actionIdentifier(t,e){return e.eventDateFormated}loadMore(){this.isLoadingMore=!0,this.recentActionsService.get(this.userId,this.lastEventDate,this.eventNumberTake).subscribe(t=>{this.actions=[...this.actions,...t],this.canLoadMore=t.length>=this.eventNumberTake,this.actions.length&&(this.lastEventDate=k(X.last(this.actions).eventDate)),this.isLoading=!1,this.isLoadingMore=!1})}close(){this.popupRef.dismiss()}}Ie.\u0275fac=function(t){return new(t||Ie)(A.ic(g.a),A.ic(g.b),A.ic(be))},Ie.\u0275cmp=A.cc({type:Ie,selectors:[["app-recent-actions-modal"]],decls:10,vars:3,consts:[[1,"lu-modal-header"],["translate","Figgo.Home.RECENT_ACTIONS_TITLE",1,"lu-modal-header-title"],[1,"lu-modal-header-close",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-cross"],["translate","Figgo.IconMask.CLOSE",1,"u-mask"],[1,"lu-modal-content"],["class","loading mod-block",4,"ngIf"],[4,"ngIf"],[1,"lu-modal-footer"],["type","submit",1,"button","mod-link",3,"translate","click"],[1,"loading","mod-block"],[1,"table"],[1,"table-body"],["class","table-body-row",4,"ngFor","ngForOf","ngForTrackBy"],["class","table-body-row",4,"ngIf"],[1,"table-body-row"],[1,"table-body-row-cell"],[1,"u-textSmall","u-textLight"],[3,"innerHTML"],["class","link u-notUnderlined u-textBold",3,"click",4,"ngIf"],[1,"link","u-notUnderlined","u-textBold",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-plus"],["translate","Figgo.Home.LOAD_MORE_ACTIONS"]],template:function(t,e){1&t&&(A.oc(0,"div",0),A.jc(1,"h2",1),A.oc(2,"button",2),A.vc("click",function(){return e.close()}),A.jc(3,"span",3),A.jc(4,"span",4),A.nc(),A.nc(),A.oc(5,"div",5),A.ed(6,Ae,1,0,"div",6),A.ed(7,Se,5,3,"ng-container",7),A.nc(),A.oc(8,"div",8),A.oc(9,"button",9),A.vc("click",function(){return e.close()}),A.nc(),A.nc()),2&t&&(A.Wb(6),A.Gc("ngIf",e.isLoading),A.Wb(1),A.Gc("ngIf",!e.isLoading),A.Wb(2),A.Gc("translate","Figgo.Home.CLOSE"))},directives:[p.a,i.q,i.p],styles:[".table-body-row[_ngcontent-%COMP%]:last-child   .table-body-row-cell[_ngcontent-%COMP%]{border-bottom:0}"]});var we,_e,We,Te=n("EenM"),Me=n("UXun");!function(t){t.BusinessDay="BusinessDay",t.Calendar="Calendar",t.Hour="Hour",t.WorkingDay="WorkingDay"}(we||(we={})),function(t){t.Monday="Monday",t.Tuesday="Tuesday",t.Wednesday="Wednesday",t.Thursday="Thursday",t.Friday="Friday",t.Saturday="Saturday",t.Sunday="Sunday"}(_e||(_e={})),function(t){t.All="All",t.Am="Am",t.Pm="Pm"}(We||(We={}));class De{constructor(t){this.http=t,this.baseUrl="/figgo/api/userLeavesStatistics/v1.0/"}getUserLeavesStatistics(t,e,n){return this.http.get(`${this.baseUrl}${this.getUrlParams(t,e,n)}`)}getCurrentYearPeriod(){return this.http.get(this.baseUrl+"/currentYearPeriod")}getUrlParams(t,e,n){return`?userId=${t}&from=${this.formatDate(e)}&to=${this.formatDate(n)}`}formatDate(t){return t.format("Y-MM-DD")}getExportUrl(t,e,n){return`${this.baseUrl}/export${this.getUrlParams(t,e,n)}`}}De.\u0275fac=function(t){return new(t||De)(A.sc(o.b))},De.\u0275prov=A.ec({token:De,factory:De.\u0275fac});var Ee=n("3lyY"),Le=n("QeNy"),Fe=n("SnvI"),ke=n("Y/4g"),xe=n("3Y7J"),Re=n("qF0L");function Ne(t,e){1&t&&A.jc(0,"span",33)}const Ue=function(t){return{userName:t}};function Ge(t,e){if(1&t&&(A.jc(0,"span",34),A.Ac(1,"luUserDisplay")),2&t){const t=A.zc();A.Gc("translateParams",A.Kc(4,Ue,A.Cc(1,1,t.user,"fl")))}}function He(t,e){if(1&t&&(A.mc(0),A.gd(1),A.lc()),2&t){const t=e.$implicit,n=A.zc();A.Wb(1),A.hd(n.translatePeriodType(t))}}function je(t,e){1&t&&A.jc(0,"div",35)}function Be(t,e){1&t&&A.jc(0,"th",47)}function ze(t,e){if(1&t&&(A.mc(0),A.jc(1,"br"),A.oc(2,"div",50),A.gd(3,"("),A.jc(4,"span",51),A.gd(5,")"),A.nc(),A.lc()),2&t){const t=A.zc().$implicit,e=A.zc(2);A.Wb(4),A.Gc("translate",e.unitTranslateKey(t.unit))}}function Ye(t,e){if(1&t&&A.jc(0,"span",62),2&t){const t=A.zc().$implicit;A.Gc("translatePluralValue",t.count)}}function qe(t,e){if(1&t&&A.jc(0,"span",63),2&t){const t=A.zc().$implicit;A.Gc("translatePluralValue",t.count)}}function Ve(t,e){if(1&t&&A.jc(0,"span",64),2&t){const t=A.zc().$implicit;A.Gc("translatePluralValue",t.count)}}function $e(t,e){if(1&t&&A.jc(0,"span",65),2&t){const t=A.zc().$implicit;A.Gc("translatePluralValue",t.count)}}function Ke(t,e){if(1&t&&A.jc(0,"span",66),2&t){const t=A.zc().$implicit;A.Gc("translatePluralValue",t.count)}}function Qe(t,e){if(1&t&&A.jc(0,"span",67),2&t){const t=A.zc().$implicit;A.Gc("translatePluralValue",t.count)}}function Xe(t,e){if(1&t&&A.jc(0,"span",68),2&t){const t=A.zc().$implicit;A.Gc("translatePluralValue",t.count)}}function Je(t,e){1&t&&(A.mc(0),A.gd(1," "),A.jc(2,"span",69),A.lc())}function Ze(t,e){1&t&&(A.mc(0),A.gd(1," "),A.jc(2,"span",70),A.lc())}function tn(t,e){1&t&&(A.oc(0,"span"),A.gd(1,", "),A.nc())}function en(t,e){if(1&t&&(A.mc(0),A.mc(1,54),A.ed(2,Ye,1,1,"span",55),A.ed(3,qe,1,1,"span",56),A.ed(4,Ve,1,1,"span",57),A.ed(5,$e,1,1,"span",58),A.ed(6,Ke,1,1,"span",59),A.ed(7,Qe,1,1,"span",60),A.ed(8,Xe,1,1,"span",61),A.lc(),A.ed(9,Je,3,0,"ng-container",24),A.ed(10,Ze,3,0,"ng-container",24),A.ed(11,tn,2,0,"span",24),A.lc()),2&t){const t=e.$implicit,n=e.last,i=A.zc(4);A.Wb(1),A.Gc("ngSwitch",t.day),A.Wb(1),A.Gc("ngSwitchCase",i.DayOfWeek.Monday),A.Wb(1),A.Gc("ngSwitchCase",i.DayOfWeek.Tuesday),A.Wb(1),A.Gc("ngSwitchCase",i.DayOfWeek.Wednesday),A.Wb(1),A.Gc("ngSwitchCase",i.DayOfWeek.Thursday),A.Wb(1),A.Gc("ngSwitchCase",i.DayOfWeek.Friday),A.Wb(1),A.Gc("ngSwitchCase",i.DayOfWeek.Saturday),A.Wb(1),A.Gc("ngSwitchCase",i.DayOfWeek.Sunday),A.Wb(1),A.Gc("ngIf",t.dayPart===i.DayPart.Am),A.Wb(1),A.Gc("ngIf",t.dayPart===i.DayPart.Pm),A.Wb(1),A.Gc("ngIf",!n)}}function nn(t,e){if(1&t&&(A.mc(0),A.oc(1,"div",50),A.jc(2,"span",52),A.gd(3," "),A.ed(4,en,12,11,"ng-container",53),A.nc(),A.lc()),2&t){const t=A.zc().$implicit;A.Wb(4),A.Gc("ngForOf",t.notWorkingDays)}}function on(t,e){if(1&t&&(A.oc(0,"tr",48),A.oc(1,"td",49),A.gd(2),A.ed(3,ze,6,1,"ng-container",24),A.nc(),A.oc(4,"td",49),A.gd(5),A.Ac(6,"timeUnit"),A.ed(7,nn,5,1,"ng-container",24),A.nc(),A.nc()),2&t){const t=e.$implicit,n=A.zc(2);A.Wb(2),A.id(" ",t.accountName," "),A.Wb(1),A.Gc("ngIf",n.shouldDisplayUnit()),A.Wb(2),A.jd(" ",t.count," ",A.Cc(6,5,t.count,n.unitToTimeUnit(t.unit))," "),A.Wb(2),A.Gc("ngIf",!!t.notWorkingDays.length&&t.unit!=n.AccountUnit.Calendar)}}function an(t,e){1&t&&(A.oc(0,"tr",48),A.jc(1,"td",71),A.nc())}function cn(t,e){if(1&t&&(A.mc(0),A.jc(1,"br"),A.oc(2,"div",50),A.gd(3,"("),A.jc(4,"span",51),A.gd(5,")"),A.nc(),A.lc()),2&t){const t=A.zc().$implicit,e=A.zc(3);A.Wb(4),A.Gc("translate",e.unitTranslateKey(t.unit))}}function rn(t,e){if(1&t&&(A.oc(0,"tr",48),A.oc(1,"td",49),A.gd(2),A.ed(3,cn,6,1,"ng-container",24),A.nc(),A.oc(4,"td",49),A.gd(5),A.Ac(6,"timeUnit"),A.nc(),A.nc()),2&t){const t=e.$implicit,n=A.zc(3);A.Wb(2),A.id(" ",t.accountName," "),A.Wb(1),A.Gc("ngIf",n.shouldDisplayUnit()),A.Wb(2),A.jd("",t.count," ",A.Cc(6,4,t.count,n.unitToTimeUnit(t.unit)),"")}}function sn(t,e){if(1&t&&(A.oc(0,"table",45),A.oc(1,"thead",37),A.oc(2,"tr",38),A.jc(3,"th",72),A.jc(4,"th",47),A.nc(),A.nc(),A.oc(5,"tbody",41),A.ed(6,rn,7,7,"tr",42),A.nc(),A.nc()),2&t){const t=A.zc(2);A.Wb(6),A.Gc("ngForOf",t.stats.workingTimeByAccount)}}function ln(t,e){if(1&t&&(A.mc(0),A.jc(1,"span",76),A.gd(2," "),A.jc(3,"span",77),A.lc()),2&t){const t=A.zc(4);A.Wb(3),A.Gc("translatePluralValue",t.stats.workingHalfDays)}}function dn(t,e){if(1&t&&(A.mc(0),A.jc(1,"br"),A.oc(2,"div",50),A.gd(3," ("),A.jc(4,"span",75),A.gd(5," "),A.ed(6,ln,4,1,"ng-container",24),A.gd(7,") "),A.nc(),A.lc()),2&t){const t=A.zc(3);A.Wb(4),A.Gc("translatePluralValue",t.stats.workingDays),A.Wb(2),A.Gc("ngIf",t.stats.workingHalfDays>0)}}function un(t,e){if(1&t&&(A.oc(0,"tr",48),A.jc(1,"td",73),A.oc(2,"td",49),A.oc(3,"span",74),A.Ac(4,"translate"),A.gd(5),A.Ac(6,"timeUnit"),A.nc(),A.ed(7,dn,8,2,"ng-container",24),A.nc(),A.nc()),2&t){const t=A.zc(2);A.Wb(3),A.Gc("luTooltip",A.Bc(4,5,t.stats.hasHourWorkcycle?"Figgo.UserLeavesStatistics.HOUR_WORKCYCLE_NB_WORKDAY_TOOLTIP":"Figgo.UserLeavesStatistics.DAY_WORKCYCLE_NB_WORKDAY_TOOLTIP"))("luTooltipDisabled",t.stats.workingDays!==t.stats.proratedWorkingDays),A.Wb(2),A.jd(" ",t.stats.proratedWorkingDays," ",A.Cc(6,7,t.stats.proratedWorkingDays,t.TimeUnit.Day)," "),A.Wb(2),A.Gc("ngIf",t.stats.workingDays!==t.stats.proratedWorkingDays)}}function gn(t,e){if(1&t&&(A.oc(0,"tr",48),A.jc(1,"td",80),A.oc(2,"td",49),A.gd(3),A.Ac(4,"timeUnit"),A.nc(),A.nc()),2&t){const t=A.zc(3);A.Wb(3),A.jd("",t.stats.theoreticalWorkingHours," ",A.Cc(4,2,t.stats.theoreticalWorkingHours,t.TimeUnit.Hour),"")}}function pn(t,e){if(1&t&&(A.oc(0,"tr",48),A.jc(1,"td",81),A.oc(2,"td",49),A.gd(3),A.Ac(4,"timeUnit"),A.nc(),A.nc()),2&t){const t=A.zc(3);A.Wb(3),A.jd("",t.stats.realWorkingHours," ",A.Cc(4,2,t.stats.realWorkingHours,t.TimeUnit.Hour),"")}}function hn(t,e){if(1&t&&(A.oc(0,"tr",48),A.jc(1,"td",82),A.oc(2,"td",49),A.gd(3),A.Ac(4,"timeUnit"),A.nc(),A.nc()),2&t){const t=A.zc(3);A.Wb(3),A.jd("",t.stats.hoursDifference," ",A.Cc(4,2,t.stats.hoursDifference,t.TimeUnit.Hour),"")}}function mn(t,e){if(1&t&&(A.oc(0,"table",45),A.oc(1,"thead",37),A.oc(2,"tr",38),A.jc(3,"th",78),A.jc(4,"th",47),A.nc(),A.nc(),A.oc(5,"tbody",41),A.ed(6,gn,5,5,"tr",43),A.oc(7,"tr",48),A.jc(8,"td",79),A.oc(9,"td",49),A.gd(10),A.Ac(11,"timeUnit"),A.nc(),A.nc(),A.ed(12,pn,5,5,"tr",43),A.ed(13,hn,5,5,"tr",43),A.nc(),A.nc()),2&t){const t=A.zc(2);A.Wb(6),A.Gc("ngIf",!!t.stats.theoreticalWorkingHours),A.Wb(4),A.jd("",t.stats.leaveHours," ",A.Cc(11,5,t.stats.leaveHours,t.TimeUnit.Hour),""),A.Wb(2),A.Gc("ngIf",!!t.stats.realWorkingHours),A.Wb(1),A.Gc("ngIf",!!t.stats.hoursDifference)}}function fn(t,e){if(1&t&&(A.mc(0),A.oc(1,"table",36),A.oc(2,"thead",37),A.oc(3,"tr",38),A.jc(4,"th",39),A.ed(5,Be,1,0,"th",40),A.nc(),A.nc(),A.oc(6,"tbody",41),A.ed(7,on,8,8,"tr",42),A.ed(8,an,2,0,"tr",43),A.nc(),A.nc(),A.ed(9,sn,7,1,"table",44),A.oc(10,"table",45),A.oc(11,"thead",37),A.oc(12,"tr",38),A.jc(13,"th",46),A.jc(14,"th",47),A.nc(),A.nc(),A.oc(15,"tbody",41),A.oc(16,"tr",48),A.oc(17,"td",49),A.gd(18),A.nc(),A.oc(19,"td",49),A.gd(20),A.Ac(21,"timeUnit"),A.nc(),A.nc(),A.ed(22,un,8,10,"tr",43),A.nc(),A.nc(),A.ed(23,mn,14,8,"table",44),A.lc()),2&t){const t=A.zc();A.Wb(5),A.Gc("ngIf",!!t.stats.leavesByAccount[0]),A.Wb(2),A.Gc("ngForOf",t.stats.leavesByAccount),A.Wb(1),A.Gc("ngIf",!t.stats.leavesByAccount[0]),A.Wb(1),A.Gc("ngIf",!!t.stats.workingTimeByAccount[0]),A.Wb(4),A.Gc("translate",t.stats.hasHourWorkcycle?"Figgo.UserLeavesStatistics.DAYS_STATISTICS":"Figgo.UserLeavesStatistics.DAYS_STATISTICS_BUSINESS_DAY"),A.Wb(5),A.hd(t.translateLeaveStatsLabel(t.stats.leavesByAccount)),A.Wb(2),A.jd("",t.stats.leaveDays," ",A.Cc(21,10,t.stats.leaveDays,t.TimeUnit.Day),""),A.Wb(2),A.Gc("ngIf",!!t.stats.proratedWorkingDays&&!!t.stats.workingDays),A.Wb(1),A.Gc("ngIf",t.stats.hasHourWorkcycle)}}var vn;!function(t){t.PreviousMonth="PreviousMonth",t.CurrentMonth="CurrentMonth",t.PreviousYear="PreviousYear",t.CurrentYear="CurrentYear",t.SpecificPeriod="SpecificPeriod"}(vn||(vn={}));class bn{constructor(t,e,n,i,o){this.popupRef=t,this.translateService=e,this.userId=n,this.userLeavesStatisticsService=i,this.usersService=o,this.AccountUnit=we,this.DayOfWeek=_e,this.DayPart=We,this.isLoading=!0,this.selectedPeriodType=vn.CurrentYear,this.PeriodType=vn,this.TimeUnit=K.a}get from(){return this._from}set from(t){this._from=t}get to(){return this._to}set to(t){this._to=t}get isDateReadOnly(){return this.selectedPeriodType!==vn.SpecificPeriod}ngOnInit(){this.usersService.getById(this.userId).subscribe(t=>this.user=t),this.periodTypeChanged()}ngOnDestroy(){var t,e;null===(t=this.userLeavesStatisticsSubscription)||void 0===t||t.unsubscribe(),null===(e=this.currentYearPeriodSubscription)||void 0===e||e.unsubscribe()}updateStatistics(){var t;this.isPeriodInvalid=k(this.to).isBefore(k(this.from)),this.isPeriodInvalid?this.stats=void 0:(this.isLoading=!0,null===(t=this.userLeavesStatisticsSubscription)||void 0===t||t.unsubscribe(),this.userLeavesStatisticsSubscription=this.userLeavesStatisticsService.getUserLeavesStatistics(this.userId,k(this.from),k(this.to)).subscribe(t=>{this.stats=t,this.isLoading=!1}))}getHoursDifference(){return this.stats.theoreticalWorkingHours-this.stats.leaveHours-this.stats.realWorkingHours}shouldDisplayUnit(){return this.stats.leavesByAccount.some(t=>t.unit!==we.BusinessDay)||this.stats.workingTimeByAccount.some(t=>t.unit!==we.BusinessDay)}unitToTimeUnit(t){return t===we.Hour?K.a.Hour:K.a.Day}unitTranslateKey(t){switch(t){case we.BusinessDay:return"Figgo.UserLeavesStatistics.UNIT_BUSINESSDAY";case we.Calendar:return"Figgo.UserLeavesStatistics.UNIT_CALENDAR";case we.Hour:return"Figgo.UserLeavesStatistics.UNIT_HOUR";case we.WorkingDay:return"Figgo.UserLeavesStatistics.UNIT_WORKINGDAY";default:return this.throwError(t),""}}translatePeriodType(t){switch(t){case vn.PreviousMonth:return this.translateService.instant("Figgo.UserLeavesStatistics.PERIODTYPE_PREVIOUSMONTH");case vn.CurrentMonth:return this.translateService.instant("Figgo.UserLeavesStatistics.PERIODTYPE_CURRENTMONTH");case vn.PreviousYear:return this.translateService.instant("Figgo.UserLeavesStatistics.PERIODTYPE_PREVIOUSYEAR");case vn.CurrentYear:return this.translateService.instant("Figgo.UserLeavesStatistics.PERIODTYPE_CURRENTYEAR");case vn.SpecificPeriod:return this.translateService.instant("Figgo.UserLeavesStatistics.PERIODTYPE_SPECIFICPERIOD");default:this.throwError(t)}}periodTypeChanged(){switch(this.selectedPeriodType){case vn.PreviousMonth:this._from=k().subtract(1,"month").startOf("month").toDate(),this._to=k().subtract(1,"month").endOf("month").toDate();break;case vn.CurrentMonth:this._from=k().startOf("month").toDate(),this._to=k().endOf("month").toDate();break;case vn.PreviousYear:case vn.CurrentYear:return void this.retrieveYearPeriod(this.selectedPeriodType);case vn.SpecificPeriod:return;default:this.throwError(this.selectedPeriodType)}this.updateStatistics()}initCurrentYearPeriodObservable(){this.currentYearPeriod$||(this.currentYearPeriod$=this.userLeavesStatisticsService.getCurrentYearPeriod().pipe(Object(Me.a)({refCount:!0})))}close(){this.popupRef.dismiss()}throwError(t){throw new Error("missing implementation for type "+t)}getExportUrl(){return this.userLeavesStatisticsService.getExportUrl(this.userId,k(this.from),k(this.to))}translateLeaveStatsLabel(t){const e=new Set(t.map(t=>t.unit)),n=e.has(we.Calendar)||e.has(we.WorkingDay),i=t.reduce((t,e)=>t+e.notWorkingDays.length,0)>0;return n||i?this.translateService.instant("Figgo.UserLeavesStatistics.DAYS_STATISTICS_LEAVES_ON_WORKING_DAYS"):this.translateService.instant("Figgo.UserLeavesStatistics.DAYS_STATISTICS_LEAVES")}retrieveYearPeriod(t){this.initCurrentYearPeriodObservable(),this.currentYearPeriodSubscription=this.currentYearPeriod$.subscribe(e=>{this._from=t===vn.CurrentYear?e.periodStart:k(e.periodStart).subtract(1,"year").toDate(),this._to=t===vn.CurrentYear?e.periodEnd:k(e.periodEnd).subtract(1,"year").toDate(),this.updateStatistics()})}}bn.\u0275fac=function(t){return new(t||bn)(A.ic(g.a),A.ic(p.d),A.ic(g.b),A.ic(De),A.ic(Te.a))},bn.\u0275cmp=A.cc({type:bn,selectors:[["app-user-leaves-statistics-modal"]],decls:44,vars:23,consts:[["id","print-section"],[1,"lu-modal-header"],[1,"lu-modal-header-title"],["translate","Figgo.UserLeavesStatistics.DIALOG_TITLE",1,"u-printHidden"],["class","u-printVisible","translate","Figgo.UserLeavesStatistics.DIALOG_TITLE",4,"ngIf"],["class","u-printVisible","translate","Figgo.UserLeavesStatistics.DIALOG_TITLE_FOR_PRINT",3,"translateParams",4,"ngIf"],[1,"lu-modal-header-close","u-printHidden",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-cross"],["translate","Figgo.IconMask.CLOSE",1,"u-mask"],[1,"lu-modal-content","u-paddingTopSmallest"],[1,"grid","u-marginReset","u-marginBottomSmall","mod-xsTop"],[1,"grid-md6","grid-sm12","u-printHidden"],[1,"textfield","mod-compact","u-marginBottomSmaller"],[1,"textfield-input",3,"ngModel","ngModelChange"],[4,"luDisplayer"],[3,"value"],["translate","Figgo.UserLeavesStatistics.SELECT_PERIOD",1,"textfield-label"],[1,"grid-md6","grid-sm12","u-displayFlex","u-flexWrapWrap"],[1,"datepickerBlock","mod-primary","u-marginBottomSmaller"],["translate","Figgo.UserLeavesStatistics.SELECT_PERIOD_FROM",1,"datepickerBlock-label"],[1,"u-marginRightReset",3,"disabled","ngModel","isInvalid","ngModelChange"],["translate","Figgo.UserLeavesStatistics.SELECT_PERIOD_TO",1,"datepickerBlock-label"],[3,"disabled","ngModel","isInvalid","ngModelChange"],["class","loading mod-block",4,"ngIf"],[4,"ngIf"],[1,"lu-modal-footer","u-printHidden"],[1,"button","mod-outline","palette-grey"],["aria-hidden","true",1,"lucca-icon","icon-download"],["translate","Figgo.UserLeavesStatistics.DOWNLOAD"],["print","","printSectionId","print-section",1,"button","mod-outline","palette-grey","u-marginRightAuto","u-marginLeftSmaller",3,"useExistingCss"],["aria-hidden","true",1,"lucca-icon","icon-print"],["translate","Figgo.UserLeavesStatistics.PRINT"],["type","button","translate","Figgo.UserLeavesStatistics.CLOSE",1,"button","mod-link",3,"click"],["translate","Figgo.UserLeavesStatistics.DIALOG_TITLE",1,"u-printVisible"],["translate","Figgo.UserLeavesStatistics.DIALOG_TITLE_FOR_PRINT",1,"u-printVisible",3,"translateParams"],[1,"loading","mod-block"],[1,"table","mod-outline"],[1,"table-head","mod-primary"],[1,"table-head-row"],["translate","Figgo.UserLeavesStatistics.LEAVES",1,"table-head-row-cell"],["class","table-head-row-cell","translate","Figgo.UserLeavesStatistics.DURATION",4,"ngIf"],[1,"table-body"],["class","table-body-row",4,"ngFor","ngForOf"],["class","table-body-row",4,"ngIf"],["class","table mod-outline u-marginTopStandard",4,"ngIf"],[1,"table","mod-outline","u-marginTopStandard"],[1,"table-head-row-cell",3,"translate"],["translate","Figgo.UserLeavesStatistics.DURATION",1,"table-head-row-cell"],[1,"table-body-row"],[1,"table-body-row-cell"],[1,"u-textLight","u-textSmall"],[3,"translate"],["translate","Figgo.UserLeavesStatistics.INCLUDING_NOT_WORKING_DAYS"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_MONDAY",3,"translatePluralValue",4,"ngSwitchCase"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_TUESDAY",3,"translatePluralValue",4,"ngSwitchCase"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_WEDNESDAY",3,"translatePluralValue",4,"ngSwitchCase"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_THURSDAY",3,"translatePluralValue",4,"ngSwitchCase"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_FRIDAY",3,"translatePluralValue",4,"ngSwitchCase"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_SATURDAY",3,"translatePluralValue",4,"ngSwitchCase"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_SUNDAY",3,"translatePluralValue",4,"ngSwitchCase"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_MONDAY",3,"translatePluralValue"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_TUESDAY",3,"translatePluralValue"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_WEDNESDAY",3,"translatePluralValue"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_THURSDAY",3,"translatePluralValue"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_FRIDAY",3,"translatePluralValue"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_SATURDAY",3,"translatePluralValue"],["translatePlural","Figgo.UserLeavesStatistics.DAY_OF_WEEK_SUNDAY",3,"translatePluralValue"],["translate","Figgo.UserLeavesStatistics.MORNING"],["translate","Figgo.UserLeavesStatistics.AFTERNOON"],["translate","Figgo.UserLeavesStatistics.LEAVES_BLANKSTATE",1,"table-body-row-cell"],["translate","Figgo.UserLeavesStatistics.WORK",1,"table-head-row-cell"],["translate","Figgo.UserLeavesStatistics.DAYS_STATISTICS_WORKING_DAYS",1,"table-body-row-cell"],[3,"luTooltip","luTooltipDisabled"],["translatePlural","Figgo.UserLeavesStatistics.FULL_DAYS",3,"translatePluralValue"],["translate","Figgo.UserLeavesStatistics.AND"],["translatePlural","Figgo.UserLeavesStatistics.HALF_DAYS",3,"translatePluralValue"],["translate","Figgo.UserLeavesStatistics.HOURS_STATISTICS",1,"table-head-row-cell"],["translate","Figgo.UserLeavesStatistics.HOURS_STATISTICS_LEAVES",1,"table-body-row-cell"],["translate","Figgo.UserLeavesStatistics.HOURS_STATISTICS_THEORETICAL",1,"table-body-row-cell"],["translate","Figgo.UserLeavesStatistics.HOURS_STATISTICS_WORK",1,"table-body-row-cell"],["translate","Figgo.UserLeavesStatistics.HOURS_STATISTICS_DIFFERENCE",1,"table-body-row-cell"]],template:function(t,e){1&t&&(A.oc(0,"div",0),A.oc(1,"div",1),A.oc(2,"h2",2),A.jc(3,"span",3),A.ed(4,Ne,1,0,"span",4),A.ed(5,Ge,2,6,"span",5),A.nc(),A.oc(6,"button",6),A.vc("click",function(){return e.close()}),A.jc(7,"span",7),A.jc(8,"span",8),A.nc(),A.nc(),A.oc(9,"div",9),A.oc(10,"div",10),A.oc(11,"div",11),A.oc(12,"label",12),A.oc(13,"lu-select",13),A.vc("ngModelChange",function(t){return e.selectedPeriodType=t})("ngModelChange",function(){return e.periodTypeChanged()}),A.ed(14,He,2,1,"ng-container",14),A.oc(15,"lu-option-picker"),A.oc(16,"lu-option",15),A.gd(17),A.nc(),A.oc(18,"lu-option",15),A.gd(19),A.nc(),A.oc(20,"lu-option",15),A.gd(21),A.nc(),A.oc(22,"lu-option",15),A.gd(23),A.nc(),A.oc(24,"lu-option",15),A.gd(25),A.nc(),A.nc(),A.nc(),A.jc(26,"span",16),A.nc(),A.nc(),A.oc(27,"div",17),A.oc(28,"label",18),A.jc(29,"span",19),A.oc(30,"app-form-datepicker",20),A.vc("ngModelChange",function(t){return e.from=t})("ngModelChange",function(){return e.updateStatistics()}),A.nc(),A.nc(),A.oc(31,"label",18),A.jc(32,"span",21),A.oc(33,"app-form-datepicker",22),A.vc("ngModelChange",function(t){return e.to=t})("ngModelChange",function(){return e.updateStatistics()}),A.nc(),A.nc(),A.nc(),A.nc(),A.ed(34,je,1,0,"div",23),A.ed(35,fn,24,13,"ng-container",24),A.nc(),A.nc(),A.oc(36,"section",25),A.oc(37,"a",26),A.jc(38,"span",27),A.jc(39,"span",28),A.nc(),A.oc(40,"button",29),A.jc(41,"span",30),A.jc(42,"span",31),A.nc(),A.oc(43,"button",32),A.vc("click",function(){return e.close()}),A.nc(),A.nc()),2&t&&(A.Wb(4),A.Gc("ngIf",!e.user),A.Wb(1),A.Gc("ngIf",!!e.user),A.Wb(8),A.Gc("ngModel",e.selectedPeriodType),A.Wb(3),A.Gc("value",e.PeriodType.PreviousMonth),A.Wb(1),A.hd(e.translatePeriodType(e.PeriodType.PreviousMonth)),A.Wb(1),A.Gc("value",e.PeriodType.CurrentMonth),A.Wb(1),A.hd(e.translatePeriodType(e.PeriodType.CurrentMonth)),A.Wb(1),A.Gc("value",e.PeriodType.PreviousYear),A.Wb(1),A.hd(e.translatePeriodType(e.PeriodType.PreviousYear)),A.Wb(1),A.Gc("value",e.PeriodType.CurrentYear),A.Wb(1),A.hd(e.translatePeriodType(e.PeriodType.CurrentYear)),A.Wb(1),A.Gc("value",e.PeriodType.SpecificPeriod),A.Wb(1),A.hd(e.translatePeriodType(e.PeriodType.SpecificPeriod)),A.Wb(5),A.Gc("disabled",e.isDateReadOnly)("ngModel",e.from)("isInvalid",e.isPeriodInvalid),A.Wb(3),A.Gc("disabled",e.isDateReadOnly)("ngModel",e.to)("isInvalid",e.isPeriodInvalid),A.Wb(1),A.Gc("ngIf",e.isLoading&&!e.isPeriodInvalid),A.Wb(1),A.Gc("ngIf",!e.isLoading&&!!e.stats),A.Wb(2),A.Xb("href",e.getExportUrl(),A.Wc),A.Wb(3),A.Gc("useExistingCss",!0))},directives:[p.a,i.q,w.b,v.r,v.u,P.e,S.s,S.l,Ee.a,Le.a,i.p,i.u,i.v,Fe.a,ke.b],pipes:[xe.b,Re.a,p.c],styles:[".table-body-row-cell[_ngcontent-%COMP%], .table-head-row-cell[_ngcontent-%COMP%]{width:50%}.table-body-row[_ngcontent-%COMP%]:last-child   .table-body-row-cell[_ngcontent-%COMP%]{border-bottom:0}.lu-modal-header-title[_ngcontent-%COMP%]{display:flex;align-items:center}.lu-modal-footer[_ngcontent-%COMP%]{justify-content:space-between}.textfield.mod-compact[_ngcontent-%COMP%]   .textfield-label[_ngcontent-%COMP%]{width:auto}"]});var An=n("+Eto"),On=n("qfsU"),yn=n("VRyK"),Pn=n("u3UV");function Cn(t,e){1&t&&A.jc(0,"div",3)}function Sn(t,e){if(1&t&&(A.jc(0,"iframe",4),A.Ac(1,"safeUrl")),2&t){const t=A.zc();A.Gc("src",A.Bc(1,2,t.legacyPath),A.Vc)("hidden",t.loading)}}class In{constructor(t,e,n,i){this.connectionService=t,this.router=e,this.http=n,this.luPopup=i,this.legacyPath="/Figgo/WebnetRTT/Application/utilisateur/build/dist/home.html?t="+(new Date).getTime(),this.loading=!1,this.homeParamsSetted=!1,this.showLeavePoliciesTriggered=new A.u,this.showRepartitionTriggered=new A.u,this.showBalanceDetailsTriggered=new A.u,this.showLeavesHistoryTriggered=new A.u,this.showAnnualDetailsTriggered=new A.u,this.showLastActionsTriggered=new A.u}ngOnInit(){this.refresh(),this.getHomeParams()}ngOnDestroy(){var t;document.body.className=document.body.className.split("legacy-display").join(""),null===(t=this.leaveDetailsModal)||void 0===t||t.dismiss()}getHomeParams(){this.homeParamsSetted=!1,this.http.get("/api/v3/home/params").subscribe(t=>{window.homeParams=t,this.homeParamsSetted=!0,setTimeout(()=>this.checkUrl())})}refresh(){window.scrollTo(0,0),document.body.className.includes("legacy-display")||(document.body.className+=" legacy-display"),this.loading=!0;try{const t=document.getElementsByClassName("iframe-refresh")[0];(t.contentDocument||t.contentWindow.document).documentElement.innerHTML=""}catch(t){}setTimeout(()=>{this.loading=!1},3e4)}catchFullPageLoadingEvent(t){this.loading=!!t.detail.loading}onShowLeavePoliciesEvent(t){this.showLeavePoliciesTriggered.emit(t)}onShowRepartitionEvent(t){this.showRepartitionTriggered.emit(t)}onShowLeavesHistoryEvent(t){this.showLeavesHistoryTriggered.emit(t)}onShowAnnualDetailsEvent(t){this.showAnnualDetailsTriggered.emit(t)}onShowLastActionsEvent(t){this.showLastActionsTriggered.emit(t)}onShowBalanceDetailsEvent(t){this.showBalanceDetailsTriggered.emit(t)}catchTriggerChangeDetectionEvent(t){this.router.navigateByUrl(t.detail.url)}onShowLeaveDetails(t){this.leaveDetailsModal=this.luPopup.open(On.a,t.detail),this.leaveDetailsModal.onClose.subscribe(t=>{document.getElementById("main-iframe").contentWindow.postMessage(Object.assign({eventId:"leaveDetailsActionDone"},t),"*")}),Object(yn.a)(this.leaveDetailsModal.onClose,this.leaveDetailsModal.onDismiss).subscribe(()=>this.leaveDetailsModal=void 0)}checkUrl(){const t=document.getElementById("main-iframe"),e=()=>{var n;const i=t.contentDocument||t.contentWindow.document;""===(null===(n=null==i?void 0:i.location)||void 0===n?void 0:n.host)||i.location.pathname.match(/^\/((figgo\/)|ErrorHandler\.ashx)/i)||this.connectionService.reconnect(),t.removeEventListener("load",e)};t.addEventListener("load",e,!0)}}In.\u0275fac=function(t){return new(t||In)(A.ic(An.a),A.ic(a.f),A.ic(o.b),A.ic(g.c))},In.\u0275cmp=A.cc({type:In,selectors:[["app-legacy-home"]],hostBindings:function(t,e){1&t&&A.vc("fullPageLoading",function(t){return e.catchFullPageLoadingEvent(t)},!1,A.Rc)("showLeavePolicies",function(t){return e.onShowLeavePoliciesEvent(t)},!1,A.Rc)("showRepartition",function(t){return e.onShowRepartitionEvent(t)},!1,A.Rc)("showLeavesHistory",function(t){return e.onShowLeavesHistoryEvent(t)},!1,A.Rc)("showAnnualDetails",function(t){return e.onShowAnnualDetailsEvent(t)},!1,A.Rc)("showLastActions",function(t){return e.onShowLastActionsEvent(t)},!1,A.Rc)("showBalanceDetails",function(t){return e.onShowBalanceDetailsEvent(t)},!1,A.Rc)("routeFromOutsideZone",function(t){return e.catchTriggerChangeDetectionEvent(t)},!1,A.Rc)("showPlanningLeaveDetails",function(t){return e.onShowLeaveDetails(t)},!1,A.Rc)},outputs:{showLeavePoliciesTriggered:"showLeavePoliciesTriggered",showRepartitionTriggered:"showRepartitionTriggered",showBalanceDetailsTriggered:"showBalanceDetailsTriggered",showLeavesHistoryTriggered:"showLeavesHistoryTriggered",showAnnualDetailsTriggered:"showAnnualDetailsTriggered",showLastActionsTriggered:"showLastActionsTriggered"},decls:3,vars:2,consts:[[1,"figgo-app"],["class","loading mod-fullPage",4,"ngIf"],["id","main-iframe","class","iframe-refresh",3,"src","hidden",4,"ngIf"],[1,"loading","mod-fullPage"],["id","main-iframe",1,"iframe-refresh",3,"src","hidden"]],template:function(t,e){1&t&&(A.oc(0,"div",0),A.ed(1,Cn,1,0,"div",1),A.nc(),A.ed(2,Sn,2,4,"iframe",2)),2&t&&(A.Wb(1),A.Gc("ngIf",e.loading),A.Wb(1),A.Gc("ngIf",e.homeParamsSetted))},directives:[i.q],pipes:[Pn.a],styles:["@-webkit-keyframes rotating{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rotating{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@-webkit-keyframes loadingGradientKeyframes{0%{background-position:100% 0}to{background-position:-100% 0}}@keyframes loadingGradientKeyframes{0%{background-position:100% 0}to{background-position:-100% 0}}[_nghost-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;overflow:auto;-webkit-overflow-scrolling:touch}iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:0;display:block}iframe[hidden][_ngcontent-%COMP%]{display:none}"]});class wn{constructor(t,e,n){this.popup=t,this.modal=e,this.translateService=n}showLeavePolicies(t){this.popup.open(q,{userId:t.detail.userId},{panelClass:["lu-popup-panel","mod-standard"]})}showRepartition(t){const e=()=>{this.popup.open(ve,t.detail,{panelClass:["lu-popup-panel","mod-rigid-large"]})},n=this.getRepartitionAlerts(t.detail);if(n.length){const t={title:"Figgo.Home.CONFIRM_PAST_LEAVE_REQUEST_TITLE",subtitle:n.join("<br>"),yes:"Figgo.Home.CONFIRM_PAST_LEAVE_REQUEST_OK",no:"Figgo.Home.CONFIRM_PAST_LEAVE_REQUEST_CANCEL"};this.modal.open(L.a,t).onClose.pipe(Object(x.a)(t=>t)).subscribe(()=>{e()})}else e()}getRepartitionAlerts(t){const e=[];return k(t.startsOn).isBefore(k().startOf("day"))&&e.push(this.translateService.instant("Figgo.Home.CONFIRM_PAST_LEAVE_REQUEST_SUBTITLE")),t.overridesRemoteWork&&e.push(this.translateService.instant("Figgo.Home.CONFIRM_OVERRIDE_REMOTEWORK")),e}showLeavesHistory(t){this.popup.open(F.a,{ownerId:t.detail.userId,ownerName:t.detail.userName},{panelClass:["lu-popup-panel","mod-larger","mod-fixedHeightTall"]})}showAnnualDetails(t){this.popup.open(bn,t.detail.userId,{panelClass:["lu-popup-panel","mod-large","modFixedContentHeight"]})}showLastActions(t){this.popup.open(Ie,t.detail.userId,{panelClass:["lu-popup-panel","modFixedContentHeight"]})}showBalanceDetails(t){this.popup.open(R.a,{accountId:t.detail.accountId,ownerId:t.detail.ownerId,accountName:t.detail.accountName},{panelClass:["lu-popup-panel","mod-fixedHeight"]})}}wn.\u0275fac=function(t){return new(t||wn)(A.ic(g.c),A.ic(u.d),A.ic(p.d))},wn.\u0275cmp=A.cc({type:wn,selectors:[["app-leave-request"]],decls:1,vars:0,consts:[[3,"showLeavePoliciesTriggered","showRepartitionTriggered","showBalanceDetailsTriggered","showLeavesHistoryTriggered","showAnnualDetailsTriggered","showLastActionsTriggered"]],template:function(t,e){1&t&&(A.oc(0,"app-legacy-home",0),A.vc("showLeavePoliciesTriggered",function(t){return e.showLeavePolicies(t)})("showRepartitionTriggered",function(t){return e.showRepartition(t)})("showBalanceDetailsTriggered",function(t){return e.showBalanceDetails(t)})("showLeavesHistoryTriggered",function(t){return e.showLeavesHistory(t)})("showAnnualDetailsTriggered",function(t){return e.showAnnualDetails(t)})("showLastActionsTriggered",function(t){return e.showLastActions(t)}),A.nc())},directives:[In],styles:[""]});var _n=n("zlka"),Wn=n("Kp8T"),Tn=n("S2pG");class Mn{}Mn.\u0275mod=A.gc({type:Mn}),Mn.\u0275inj=A.fc({factory:function(t){return new(t||Mn)},providers:[be],imports:[[i.c,w.d,S.n,P.g,v.m,_n.a,Wn.a,p.b,Tn.a]]});var Dn=n("0N9+");class En{}En.\u0275mod=A.gc({type:En}),En.\u0275inj=A.fc({factory:function(t){return new(t||En)},providers:[De],imports:[[i.c,xe.a,w.d,S.n,P.g,ke.a,v.m,_n.a,Dn.a,Wn.a,p.b,Tn.a]]});const Ln=[{path:"",component:wn}];class Fn{}Fn.\u0275mod=A.gc({type:Fn}),Fn.\u0275inj=A.fc({factory:function(t){return new(t||Fn)},providers:[{provide:o.a,useClass:s.a,multi:!0}],imports:[[i.c,u.e,c.a,a.j.forChild(Ln),l.a,d.a,p.b,E,f.a,g.d,r.a,h.a,m.a,En,Mn]]})},RWxJ:function(t,e,n){"use strict";var i,o;n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o}),function(t){t[t.BusinessDay=0]="BusinessDay",t[t.Calendar=1]="Calendar",t[t.Hour=2]="Hour",t[t.WorkingDay=3]="WorkingDay"}(i||(i={})),function(t){t.BusinessDay="BusinessDay",t.Calendar="Calendar",t.Hour="Hour",t.WorkingDay="WorkingDay"}(o||(o={}))},mYl9:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var i=n("fXoL"),o=n("ofXK"),a=n("Y/4g");function c(t,e){if(1&t&&i.jc(0,"span",4),2&t){const t=i.zc(2);i.Gc("luTooltip",t.getErrors().join("\n"))}}function r(t,e){if(1&t&&i.jc(0,"span",5),2&t){const t=i.zc(2);i.Gc("luTooltip",t.getWarnings().join("\n"))}}function s(t,e){if(1&t&&i.jc(0,"span",6),2&t){const t=i.zc(2);i.Gc("luTooltip",t.getInfos().join("\n"))}}function l(t,e){if(1&t&&(i.mc(0),i.ed(1,c,1,1,"span",1),i.ed(2,r,1,1,"span",2),i.ed(3,s,1,1,"span",3),i.lc()),2&t){const t=i.zc();i.Wb(1),i.Gc("ngIf",t.getErrors().length),i.Wb(1),i.Gc("ngIf",t.getWarnings().length),i.Wb(1),i.Gc("ngIf",t.getInfos().length)}}function d(t,e){if(1&t&&(i.oc(0,"div",12),i.gd(1),i.nc()),2&t){const t=e.$implicit;i.Wb(1),i.hd(t)}}function u(t,e){if(1&t&&(i.oc(0,"div",13),i.gd(1),i.nc()),2&t){const t=e.$implicit;i.Wb(1),i.hd(t)}}function g(t,e){if(1&t&&(i.oc(0,"div",14),i.gd(1),i.nc()),2&t){const t=e.$implicit;i.Wb(1),i.hd(t)}}function p(t,e){if(1&t&&(i.oc(0,"div",8),i.ed(1,d,2,1,"div",9),i.ed(2,u,2,1,"div",10),i.ed(3,g,2,1,"div",11),i.nc()),2&t){const t=i.zc(2);i.Wb(1),i.Gc("ngForOf",t.getErrors()),i.Wb(1),i.Gc("ngForOf",t.getWarnings()),i.Wb(1),i.Gc("ngForOf",t.getInfos())}}function h(t,e){if(1&t&&(i.mc(0),i.ed(1,p,4,3,"div",7),i.lc()),2&t){const t=i.zc();i.Wb(1),i.Gc("ngIf",t.getErrors().length>0||t.getWarnings().length>0||t.getInfos().length>0)}}class m{constructor(){}ngOnInit(){}getErrors(){return this.makeList(this.errors)}getWarnings(){return this.makeList(this.warnings)}getInfos(){return this.makeList(this.infos)}makeList(t){let e;return e=t&&t.length&&!t.trim?t.filter(t=>t&&t.trim().length):t&&t.length&&t.trim?[t.trim()]:[],e.length>1&&this.tooltipMode&&(e=e.map(t=>"\u2e31 "+t)),e}}m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=i.cc({type:m,selectors:[["app-form-input-infos"]],inputs:{errors:"errors",warnings:"warnings",infos:"infos",tooltipMode:"tooltipMode"},decls:2,vars:2,consts:[[4,"ngIf"],["class","lucca-icon icon-error size-small u-textError","aria-hidden","true",3,"luTooltip",4,"ngIf"],["class","lucca-icon icon-warning size-small u-textWarning","aria-hidden","true",3,"luTooltip",4,"ngIf"],["class","lucca-icon icon-help size-small u-textLight","aria-hidden","true",3,"luTooltip",4,"ngIf"],["aria-hidden","true",1,"lucca-icon","icon-error","size-small","u-textError",3,"luTooltip"],["aria-hidden","true",1,"lucca-icon","icon-warning","size-small","u-textWarning",3,"luTooltip"],["aria-hidden","true",1,"lucca-icon","icon-help","size-small","u-textLight",3,"luTooltip"],["class","textfield-messages",4,"ngIf"],[1,"textfield-messages"],["class","textfield-messages-error",4,"ngFor","ngForOf"],["class","textfield-messages-helper u-textWarning",4,"ngFor","ngForOf"],["class","textfield-messages-helper",4,"ngFor","ngForOf"],[1,"textfield-messages-error"],[1,"textfield-messages-helper","u-textWarning"],[1,"textfield-messages-helper"]],template:function(t,e){1&t&&(i.ed(0,l,4,3,"ng-container",0),i.ed(1,h,2,1,"ng-container",0)),2&t&&(i.Gc("ngIf",e.tooltipMode),i.Wb(1),i.Gc("ngIf",!e.tooltipMode))},directives:[o.q,a.b,o.p],styles:[""],changeDetection:0})},pN8U:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("fXoL");class o{constructor(t,e){this.renderer=t,this.elementRef=e,this.minWidth=50,this.maxWidth=o.oneHundredPercent}ngOnInit(){this.randomMultiplier=this.maxWidth-this.minWidth+1,this.renderer.setStyle(this.elementRef.nativeElement,"width",this.getRandomWidth()+"%")}getRandomWidth(){return Math.floor(Math.random()*this.randomMultiplier)+this.minWidth}}o.oneHundredPercent=100,o.\u0275fac=function(t){return new(t||o)(i.ic(i.V),i.ic(i.r))},o.\u0275dir=i.dc({type:o,selectors:[["","app-random-width",""]],inputs:{minWidth:"minWidth",maxWidth:"maxWidth"}})}}]);