(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+Dbt":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("B4vs"),o=n("3Pt+"),a=n("fXoL"),c=n("ofXK"),r=n("mYl9"),l=n("sYmb");function s(e,t){if(1&e&&a.jc(0,"label",6),2&e){const e=a.zc();a.Gc("translate",e.label)}}function d(e,t){if(1&e&&a.jc(0,"span",9),2&e){const e=a.zc(2);a.Gc("ngClass","icon-"+e.icon)}}function u(e,t){if(1&e&&(a.oc(0,"label",7),a.ed(1,d,1,1,"span",8),a.nc()),2&e){const e=a.zc();a.Wb(1),a.Gc("ngIf",e.icon)}}const g=function(e,t){return{"is-error":e,"is-filled":t}};class p extends i.a{constructor(e){super(e),this.cd=e,this.type="number",this.propagateTouch=e=>{this.fixModelValue(e)},this.propagateChange=(e,t=!1)=>{this.fixModelValue(e)}}registerOnTouched(e){this.propagateTouch=t=>{this.fixModelValue(t),e(this.model)}}registerOnChange(e){this.propagateChange=(t,n=!1)=>{(n||t&&t.toString().length)&&e(t)}}fixModelValue(e){e=this.convertValueToNumber(e),this.model!==e&&(this.model=e,this.propagateChange(this.model,!0))}convertValueToNumber(e){let t=e;return null!=e&&(0===this.model.toString().length?t=this.defaultValue:(t=Number((""+e).replace(/[,]/g,".").replace(/[^0-9\.\-]/g,"")),Number.isNaN(t)&&(t=0),Number.isInteger(Number(this.step))&&(t=Math.trunc(t)))),t}}p.\u0275fac=function(e){return new(e||p)(a.ic(a.j))},p.\u0275cmp=a.cc({type:p,selectors:[["app-form-input-number"]],features:[a.Vb([{provide:o.p,useExisting:Object(a.ob)(()=>p),multi:!0}]),a.Tb],decls:7,vars:27,consts:[[1,"textfield",3,"ngClass"],[1,"textfield-input",3,"ngModel","ngClass","type","disabled","ngModelChange","blur","input"],["inputModel","ngModel"],["class","textfield-label",3,"translate",4,"ngIf"],["class","textfield-label u-textRight",4,"ngIf"],[3,"errors","warnings","infos","tooltipMode"],[1,"textfield-label",3,"translate"],[1,"textfield-label","u-textRight"],["class","lucca-icon","aria-hidden","true",3,"ngClass",4,"ngIf"],["aria-hidden","true",1,"lucca-icon",3,"ngClass"]],template:function(e,t){if(1&e&&(a.oc(0,"div",0),a.oc(1,"input",1,2),a.vc("ngModelChange",function(e){return t.model=e})("ngModelChange",function(){return t.propagateChange(t.model)})("blur",function(){return t.propagateTouch(t.model)})("input",function(e){return t.input.emit(e)}),a.Ac(3,"translate"),a.nc(),a.ed(4,s,1,1,"label",3),a.ed(5,u,2,1,"label",4),a.jc(6,"app-form-input-infos",5),a.nc()),2&e){const e=a.Pc(2);a.ac("is-modified",t.colorOnDirty&&e.dirty)("is-required",t.required),a.Gc("ngClass",t.allMods()),a.Wb(1),a.Gc("ngModel",t.model)("ngClass",a.Lc(24,g,t.isError(),null!=t.model&&t.model.toString().length))("type",t.type)("disabled",t.disabled),a.Xb("placeholder",a.Bc(3,22,t.placeholder))("min",t.min)("max",t.max)("maxlength",t.maxlength)("step",t.step||"number"===t.type?"any":null)("autocomplete",t.autocomplete)("lang","number"===t.type?"en_US":null),a.Wb(3),a.Gc("ngIf",t.label&&t.label.length),a.Wb(1),a.Gc("ngIf",t.icon),a.Wb(1),a.Gc("errors",t.errors)("warnings",t.warnings)("infos",t.infos)("tooltipMode",t.mod.tooltipInfos)}},directives:[c.o,o.c,o.r,o.u,o.n,c.q,r.a,l.a],pipes:[l.c],styles:['[_nghost-%COMP%]:not(.mod-block){display:inline-block;margin-right:.15rem}.mod-block[_nghost-%COMP%]{display:block}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}.is-modified[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-1rem;top:0;bottom:-1rem;margin:auto;height:5px;width:5px;border-radius:50%;background:#616fa7}.textfield.mod-compact[_ngcontent-%COMP%]   .textfield-label[_ngcontent-%COMP%]{font-size:inherit}.textfield.mod-searchID[_ngcontent-%COMP%]{width:3.7rem}'],changeDetection:0})},"+nQx":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var i=n("fXoL"),o=n("3Pt+");class a{validate(e){return this.validatorInjector(e)}}a.\u0275fac=function(e){return new(e||a)},a.\u0275dir=i.dc({type:a,selectors:[["","validatorInjector","","ngModel",""],["","validatorInjector","","ngFormControl",""]],inputs:{validatorInjector:"validatorInjector"},features:[i.Vb([{multi:!0,provide:o.o,useExisting:Object(i.ob)(()=>a)}])]});class c{}c.\u0275mod=i.gc({type:c}),c.\u0275inj=i.fc({factory:function(e){return new(e||c)}})},"1jH7":function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n("xohu"),o=n("EB94"),a=n("LvDl"),c=n("wd/R"),r=n("5IIZ"),l=n("fXoL"),s=n("sYmb"),d=n("ofXK"),u=n("3Pt+"),g=n("ap3Z");function p(e,t){1&e&&l.jc(0,"div",9)}function h(e,t){1&e&&l.jc(0,"div",11)}function f(e,t){if(1&e&&(l.oc(0,"span"),l.gd(1),l.nc()),2&e){const e=l.zc().$implicit;l.Wb(1),l.id(" (",e.author.name,")")}}function b(e,t){if(1&e&&(l.oc(0,"tbody",32),l.oc(1,"tr",33),l.oc(2,"td",34),l.gd(3),l.Ac(4,"date"),l.nc(),l.oc(5,"td",34),l.jc(6,"span",35),l.ed(7,f,2,1,"span",8),l.nc(),l.jc(8,"td",31),l.Ac(9,"luNumber"),l.jc(10,"td",31),l.Ac(11,"luNumber"),l.nc(),l.nc()),2&e){const e=t.$implicit,n=l.zc(4);l.Wb(3),l.id(" ",l.Cc(4,5,e.accountingDate,"shortDate")," "),l.Wb(3),l.Gc("innerHTML",e.comment,l.Uc),l.Wb(1),l.Gc("ngIf",n.shouldDisplayAuthor(e)),l.Wb(1),l.Gc("innerHTML",l.Bc(9,8,e.debit),l.Uc),l.Wb(2),l.Gc("innerHTML",l.Bc(11,10,e.credit),l.Uc)}}function m(e,t){if(1&e&&(l.oc(0,"div",19),l.oc(1,"table",20),l.oc(2,"thead",21),l.oc(3,"tr",22),l.jc(4,"th",23),l.jc(5,"th",24),l.jc(6,"th",25),l.jc(7,"th",26),l.nc(),l.nc(),l.ed(8,b,12,12,"tbody",27),l.oc(9,"tbody",28),l.oc(10,"tr",29),l.jc(11,"td",30),l.jc(12,"td",31),l.Ac(13,"luNumber"),l.nc(),l.nc(),l.nc(),l.nc()),2&e){const e=l.zc(3);l.Wb(8),l.Gc("ngForOf",e.accoutingLines),l.Wb(4),l.Gc("innerHTML",l.Bc(13,2,e.accoutingLinesTotal),l.Uc)}}function y(e,t){if(1&e&&(l.oc(0,"span"),l.gd(1),l.nc()),2&e){const e=l.zc(2).$implicit;l.Wb(1),l.hd(e.accountingMonth)}}function C(e,t){if(1&e&&(l.oc(0,"tr",33),l.oc(1,"td",34),l.ed(2,y,2,1,"span",8),l.nc(),l.oc(3,"td",34),l.gd(4),l.nc(),l.jc(5,"td",31),l.Ac(6,"luNumber"),l.jc(7,"td",31),l.Ac(8,"luNumber"),l.nc()),2&e){const e=t.$implicit,n=t.first;l.Wb(1),l.ac("mod-groupedLine",!n),l.Wb(1),l.Gc("ngIf",n),l.Wb(2),l.hd(e.comment),l.Wb(1),l.Gc("innerHTML",l.Bc(6,6,e.debit),l.Uc),l.Wb(2),l.Gc("innerHTML",l.Bc(8,8,e.credit),l.Uc)}}function M(e,t){if(1&e&&(l.oc(0,"tbody",32),l.ed(1,C,9,10,"tr",38),l.nc()),2&e){const e=t.$implicit;l.Wb(1),l.Gc("ngForOf",e.groupedByNature)}}function _(e,t){if(1&e&&(l.oc(0,"div",19),l.oc(1,"table",20),l.oc(2,"thead",21),l.oc(3,"tr",22),l.jc(4,"th",36),l.jc(5,"th",37),l.jc(6,"th",25),l.jc(7,"th",26),l.nc(),l.nc(),l.ed(8,M,2,1,"tbody",27),l.oc(9,"tbody",28),l.oc(10,"tr",29),l.jc(11,"td",30),l.jc(12,"td",31),l.Ac(13,"luNumber"),l.nc(),l.nc(),l.nc(),l.nc()),2&e){const e=l.zc(3);l.Wb(8),l.Gc("ngForOf",e.groupByMonthAndNature),l.Wb(4),l.Gc("innerHTML",l.Bc(13,2,e.accoutingLinesTotal),l.Uc)}}function v(e,t){if(1&e&&(l.oc(0,"tbody",32),l.oc(1,"tr",33),l.oc(2,"td",34),l.gd(3),l.nc(),l.jc(4,"td",31),l.Ac(5,"luNumber"),l.jc(6,"td",31),l.Ac(7,"luNumber"),l.nc(),l.nc()),2&e){const e=t.$implicit;l.Wb(3),l.hd(e.comment),l.Wb(1),l.Gc("innerHTML",l.Bc(5,3,e.debit),l.Uc),l.Wb(2),l.Gc("innerHTML",l.Bc(7,5,e.credit),l.Uc)}}function A(e,t){if(1&e&&(l.oc(0,"div",19),l.oc(1,"table",20),l.oc(2,"thead",21),l.oc(3,"tr",22),l.jc(4,"th",37),l.jc(5,"th",25),l.jc(6,"th",26),l.nc(),l.nc(),l.ed(7,v,8,7,"tbody",27),l.oc(8,"tbody",28),l.oc(9,"tr",29),l.jc(10,"td",39),l.jc(11,"td",31),l.Ac(12,"luNumber"),l.nc(),l.nc(),l.nc(),l.nc()),2&e){const e=l.zc(3);l.Wb(7),l.Gc("ngForOf",e.groupByNature),l.Wb(4),l.Gc("innerHTML",l.Bc(12,2,e.accoutingLinesTotal),l.Uc)}}function L(e,t){if(1&e){const e=l.pc();l.mc(0),l.oc(1,"div",12),l.oc(2,"label",13),l.oc(3,"input",14),l.vc("ngModelChange",function(t){l.Tc(e);return l.zc(2).displayModeSelected=t}),l.nc(),l.jc(4,"span",15),l.nc(),l.oc(5,"label",13),l.oc(6,"input",14),l.vc("ngModelChange",function(t){l.Tc(e);return l.zc(2).displayModeSelected=t}),l.nc(),l.jc(7,"span",16),l.nc(),l.oc(8,"label",13),l.oc(9,"input",14),l.vc("ngModelChange",function(t){l.Tc(e);return l.zc(2).displayModeSelected=t}),l.nc(),l.jc(10,"span",17),l.nc(),l.nc(),l.ed(11,m,14,4,"div",18),l.ed(12,_,14,4,"div",18),l.ed(13,A,13,4,"div",18),l.lc()}if(2&e){const e=l.zc(2);l.Wb(3),l.Gc("ngModel",e.displayModeSelected)("value",e.DisplayMode.Details),l.Wb(3),l.Gc("ngModel",e.displayModeSelected)("value",e.DisplayMode.Month),l.Wb(3),l.Gc("ngModel",e.displayModeSelected)("value",e.DisplayMode.Nature),l.Wb(2),l.Gc("ngIf",e.displayModeSelected===e.DisplayMode.Details),l.Wb(1),l.Gc("ngIf",e.displayModeSelected===e.DisplayMode.Month),l.Wb(1),l.Gc("ngIf",e.displayModeSelected===e.DisplayMode.Nature)}}function E(e,t){if(1&e&&(l.mc(0),l.ed(1,h,1,0,"div",10),l.ed(2,L,14,9,"ng-container",8),l.lc()),2&e){const e=l.zc();l.Wb(1),l.Gc("ngIf",!(null!=e.accoutingLines&&e.accoutingLines.length)),l.Wb(1),l.Gc("ngIf",!(null==e.accoutingLines||!e.accoutingLines.length))}}const D=function(e){return{accountName:e}};var N;!function(e){e.Details="Details",e.Month="Month",e.Nature="Nature"}(N||(N={}));class O{constructor(e,t,n,i){this.popupRef=e,this.translateService=t,this.data=n,this.balanceDetailsService=i,this.isLoading=!1,this.accoutingLinesTotal=0,this.displayModeSelected=N.Details,this.DisplayMode=N,this.isLoading=!0,this.balanceDetailsService.getAccountingLines(n.ownerId,n.accountId).subscribe(e=>{this.accoutingLines=e,this.accoutingLinesTotal=e.reduce((e,t)=>e+(t.credit-t.debit),0),this.groupByMonthAndNature=this.groupBalanceDetailsByMonthAndNature(this.accoutingLines),this.groupByNature=this.groupBalanceDetailsByNature(this.accoutingLines),this.isLoading=!1})}get accountName(){return this.data.accountName}get ownerName(){return this.accoutingLines[0].user.name}cancel(){this.popupRef.dismiss()}ngOnInit(){}shouldDisplayAuthor(e){const t=(e.code===i.a.ODSA||e.code===i.a.SEMIAUTO||e.code===i.a.TRANSFER)&&c(e.accountingDate,"YYYY-MM-DD").isAfter(c("2020-12-08","YYYY-MM-DD"));return!!e.author&&e.code===i.a.TEMPS||e.code===i.a.ODCORR||t}getTranslateFromCode(e){switch(e){case i.a.AUTO:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_AUTO");case i.a.TEMPS:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_TEMPS");case i.a.MANUEL:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_MANUEL");case i.a.ODSA:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_ODSA");case i.a.ANCIEN:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_ANCIEN");case i.a.REPOR:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_REPOR");case i.a.SOLDE:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_SOLDE");case i.a.ODCORR:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_ODCORR");case i.a.FRACT:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_FRACT");case i.a.SEMIAUTO:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_SEMIAUTO");case i.a.AUTOCET:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_AUTOCET");case i.a.REGUL:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_REGUL");case i.a.REGULDEP:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_REGULDEP");case i.a.COMP:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_COMP");case i.a.TIMESAVINGS:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_TIMESAVINGS");case i.a.REVERSE:return"";case i.a.TRANSFER:return this.translateService.instant("Figgo.BalanceDetails.BALANCE_DETAILS_NATURE_TRANSFER");default:(e=>{throw new Error("missing implementation for AccountingCodes "+e)})(e)}}groupBalanceDetailsByMonthAndNature(e){const t=a.groupBy(this.accoutingLines,e=>c(e.accountingDate).format("MM-YYYY"));return Object.keys(t).map(e=>({accountingMonth:e,groupedByNature:this.groupBalanceDetailsByNature(t[e])}))}groupBalanceDetailsByNature(e){const t=a.groupBy(e,e=>e.code),n=e=>a.reduce(e,(e,t)=>({code:t.code,comment:this.getTranslateFromCode(t.code),credit:e.credit+t.credit,debit:e.debit+t.debit}),{code:void 0,comment:"",credit:0,debit:0});return Object.values(t).map(e=>n(e))}}O.\u0275fac=function(e){return new(e||O)(l.ic(o.a),l.ic(s.d),l.ic(o.b),l.ic(r.a))},O.\u0275cmp=l.cc({type:O,selectors:[["app-balance-details-modal"]],decls:11,vars:8,consts:[["cdkTrapFocus","true","cdkTrapFocusAutoCapture","true",1,"lu-modal-panel-inner"],[1,"lu-modal-header"],[1,"lu-modal-header-title"],[1,"lu-modal-header-close",3,"click"],["aria-hidden","true",1,"lucca-icon","icon-cross"],["translate","Figgo.IconMask.CLOSE",1,"u-mask"],[1,"lu-modal-content"],["class","loader mod-block",4,"ngIf"],[4,"ngIf"],[1,"loader","mod-block"],["translate","Figgo.BalanceDetails.NO_BALANCE_DETAILS",4,"ngIf"],["translate","Figgo.BalanceDetails.NO_BALANCE_DETAILS"],[1,"radioButtons"],[1,"radioButtons-item"],["type","radio","name","radioButtonsID",1,"radioButtons-item-input",3,"ngModel","value","ngModelChange"],["translate","Figgo.BalanceDetails.DISPLAY_MODE_DETAILS",1,"radioButtons-item-label"],["translate","Figgo.BalanceDetails.DISPLAY_MODE_MONTH_NATURE",1,"radioButtons-item-label"],["translate","Figgo.BalanceDetails.DISPLAY_MODE_NATURE",1,"radioButtons-item-label"],["class","table-container u-marginTopStandard u-marginBottomSmaller",4,"ngIf"],[1,"table-container","u-marginTopStandard","u-marginBottomSmaller"],[1,"table"],[1,"table-head"],[1,"table-head-row"],["translate","Figgo.BalanceDetails.BALANCE_DETAILS_DATE",1,"table-head-row-cell"],["translate","Figgo.BalanceDetails.BALANCE_DETAILS_LABEL",1,"table-head-row-cell"],["translate","Figgo.BalanceDetails.BALANCE_DETAILS_DEBIT",1,"table-head-row-cell"],["translate","Figgo.BalanceDetails.BALANCE_DETAILS_CREDIT",1,"table-head-row-cell"],["class","table-body",4,"ngFor","ngForOf"],[1,"table-body","table-footer"],[1,"table-body-row","mod-total"],["colspan","3","translate","Figgo.BalanceDetails.BALANCE_SOLDE",1,"table-body-row-cell","u-textLight"],[1,"table-body-row-cell",3,"innerHTML"],[1,"table-body"],[1,"table-body-row"],[1,"table-body-row-cell"],[3,"innerHTML"],["translate","Figgo.BalanceDetails.BALANCE_DETAILS_MONTH",1,"table-head-row-cell"],["translate","Figgo.BalanceDetails.BALANCE_DETAILS_NATURE",1,"table-head-row-cell"],["class","table-body-row",4,"ngFor","ngForOf"],["colspan","2","translate","Figgo.BalanceDetails.BALANCE_SOLDE",1,"table-body-row-cell","u-textLight"]],template:function(e,t){1&e&&(l.oc(0,"section",0),l.oc(1,"div",1),l.oc(2,"h2",2),l.gd(3),l.Ac(4,"translate"),l.nc(),l.oc(5,"button",3),l.vc("click",function(){return t.cancel()}),l.jc(6,"span",4),l.jc(7,"span",5),l.nc(),l.nc(),l.oc(8,"div",6),l.ed(9,p,1,0,"div",7),l.ed(10,E,3,2,"ng-container",8),l.nc(),l.nc()),2&e&&(l.Wb(3),l.id(" ",l.Cc(4,3,"Figgo.BalanceDetails.BALANCE_DETAILS_TITLE",l.Kc(6,D,t.accountName))," "),l.Wb(6),l.Gc("ngIf",t.isLoading),l.Wb(1),l.Gc("ngIf",!t.isLoading))},directives:[s.a,d.q,u.y,u.c,u.r,u.u,d.p],pipes:[s.c,g.b,d.e],styles:[".table-container[_ngcontent-%COMP%]{margin-right:-2rem;margin-left:-2rem}.table-body-row.mod-total[_ngcontent-%COMP%]{background:#f7f9fd;font-weight:600}.table-body-row-cell.mod-groupedLine[_ngcontent-%COMP%]{border-top-style:hidden}"]})},"2HzP":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("fXoL"),o=n("jhN1");class a{constructor(e){this.sanitized=e}transform(e){return this.sanitized.bypassSecurityTrustHtml(e)}}a.\u0275fac=function(e){return new(e||a)(i.ic(o.b))},a.\u0275pipe=i.hc({name:"safeHtml",type:a,pure:!0})},"5IIZ":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("fXoL"),o=n("tk/3");class a{constructor(e){this.http=e,this.accountBalanceDetailsUrl="/figgo/api/AccountBalanceDetails/v1.0"}getAccountingLines(e,t){const n=`${this.accountBalanceDetailsUrl}/${t}?userId=${e}`;return this.http.get(n)}}a.\u0275fac=function(e){return new(e||a)(i.sc(o.b))},a.\u0275prov=i.ec({token:a,factory:a.\u0275fac})},B4I5:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("tyNb"),o=n("+Eto"),a=n("zknm"),c=n("fXoL"),r=n("ofXK"),l=n("u3UV");function s(e,t){1&e&&c.jc(0,"div",3)}class d{constructor(e,t,n,i){this.menuService=e,this.connectionService=t,this.router=n,this.cd=i,this.loading=!1}static retrieveParameters(e,t){try{let n=e.split(t.url)[1];return n=decodeURIComponent(n),""!==n?n:null}catch(n){return null}}static generateLegacyPath(e,t){const n=d.retrieveParameters(e,t);if(!n)return"/"+t.internalRouteUrl;let i=t.internalRouteUrl;return i.indexOf("?")>-1&&(i=i.split("?")[0]),"/"+i+n}ngOnInit(){this.routerEventSubscription=this.router.events.subscribe(e=>{e instanceof i.c&&(this.legacyPath="about:blank",this.refresh())}),this.refresh()}ngAfterViewInit(){this.checkUrl()}ngOnDestroy(){document.body.className=document.body.className.split("legacy-display").join(""),this.routerEventSubscription.unsubscribe(),this.getNodeByUrlSubscription&&this.getNodeByUrlSubscription.unsubscribe()}refresh(){window.scrollTo(0,0),document.body.className.includes("legacy-display")||(document.body.className+=" legacy-display");const e=this.router.url;this.getNodeByUrlSubscription=this.menuService.getNodeByUrl(e).subscribe(t=>{if(this.currentNode=t,null!=t.internalRouteUrl){this.loading=!0,this.legacyPath=d.generateLegacyPath(e,t);try{const e=document.getElementsByClassName("iframe-refresh")[0];(e.contentDocument||e.contentWindow.document).documentElement.innerHTML=""}catch(n){}setTimeout(()=>{this.loading=!1},3e4)}})}catchFullPageLoadingEvent(e){this.loading=!!e.detail.loading}catchTriggerChangeDetectionEvent(e){this.router.navigateByUrl(e.detail.url)}onload(){this.loading=!1}checkUrl(){const e=document.getElementById("main-iframe"),t=()=>{var n;const i=e.contentDocument||e.contentWindow.document;""===(null===(n=null==i?void 0:i.location)||void 0===n?void 0:n.host)||i.location.pathname.match(/^\/((figgo\/)|ErrorHandler\.ashx)/i)||this.connectionService.reconnect(),e.removeEventListener("load",t)};e.addEventListener("load",t,!0)}}d.\u0275fac=function(e){return new(e||d)(c.ic(a.c),c.ic(o.a),c.ic(i.f),c.ic(c.j))},d.\u0275cmp=c.cc({type:d,selectors:[["app-legacy-container"]],hostBindings:function(e,t){1&e&&c.vc("fullPageLoading",function(e){return t.catchFullPageLoadingEvent(e)},!1,c.Rc)("routeFromOutsideZone",function(e){return t.catchTriggerChangeDetectionEvent(e)},!1,c.Rc)},decls:4,vars:5,consts:[[1,"figgo-app"],["class","loading mod-fullPage",4,"ngIf"],["id","main-iframe",1,"iframe-refresh",3,"src","hidden","load"],[1,"loading","mod-fullPage"]],template:function(e,t){1&e&&(c.oc(0,"div",0),c.ed(1,s,1,0,"div",1),c.nc(),c.oc(2,"iframe",2),c.vc("load",function(){return t.onload()}),c.Ac(3,"safeUrl"),c.nc()),2&e&&(c.Wb(1),c.Gc("ngIf",t.loading),c.Wb(1),c.Gc("src",c.Bc(3,3,t.legacyPath),c.Vc)("hidden",t.loading))},directives:[r.q],pipes:[l.a],styles:["@-webkit-keyframes rotating{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rotating{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@-webkit-keyframes loadingGradientKeyframes{0%{background-position:100% 0}to{background-position:-100% 0}}@keyframes loadingGradientKeyframes{0%{background-position:100% 0}to{background-position:-100% 0}}[_nghost-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;overflow:auto;-webkit-overflow-scrolling:touch}iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:0;display:block}iframe[hidden][_ngcontent-%COMP%]{display:none}"]})},GgqY:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.RoundUp=0]="RoundUp",e[e.HalfRoundUp=1]="HalfRoundUp",e[e.ClosestHalf=2]="ClosestHalf",e[e.None=3]="None"}(i||(i={}))},LyLN:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("ofXK"),o=n("tyNb"),a=n("lKEx"),c=n("fXoL");class r{}r.\u0275mod=c.gc({type:r}),r.\u0275inj=c.fc({factory:function(e){return new(e||r)},imports:[[i.c,o.j,a.a]]})},Mq7z:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("ofXK"),o=n("sYmb"),a=n("fXoL");class c{}c.\u0275mod=a.gc({type:c}),c.\u0275inj=a.fc({factory:function(e){return new(e||c)},imports:[[i.c,o.b]]})},N80B:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("fXoL"),o=n("3Pt+"),a=n("LvDl"),c=n("XNkp"),r=n("d5vQ"),l=n("v3UZ"),s=n("ofXK");function d(e,t){}function u(e,t){if(1&e&&i.gd(0),2&e){const e=i.zc().$implicit;i.hd(e[0].name)}}function g(e,t){if(1&e&&(i.oc(0,"span",11),i.gd(1),i.nc(),i.gd(2)),2&e){const e=i.zc().$implicit,t=i.zc();i.Wb(1),i.hd(e.length),i.Wb(1),i.hd(t.title)}}function p(e,t){if(1&e&&(i.mc(0,7),i.ed(1,d,0,0,"ng-template",8),i.ed(2,u,1,1,"ng-template",9),i.ed(3,g,3,2,"ng-template",10),i.lc()),2&e){const e=t.$implicit;i.Gc("ngPlural",(null==e?null:e.length)||0)}}function h(e,t){if(1&e&&(i.oc(0,"lu-option",12),i.gd(1),i.nc()),2&e){const e=t.$implicit;i.Gc("value",e),i.Wb(1),i.hd(null==e?null:e.name)}}class f{constructor(e){this.cd=e,this.isRequired=!1,this.disabled=!1,this.onChange=e=>{},this.onTouched=()=>{}}selectChange(){this.onChange(this.selectedOptions),this.onTouched()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}writeValue(e){this.selectedOptions=e,this.cd.markForCheck(),this.onChange(this.selectedOptions)}searchByName(e,t){return-1!==Object(a.deburr)(e.name.toLocaleLowerCase()).indexOf(Object(a.deburr)(t.toLocaleLowerCase()))}shouldDisplayIsInvalidClass(){return!!this.selectFormControl&&(!this.selectFormControl.valid&&this.selectFormControl.touched&&this.selectFormControl.dirty)}}f.\u0275fac=function(e){return new(e||f)(i.ic(i.j))},f.\u0275cmp=i.cc({type:f,selectors:[["app-population-filter-select"]],inputs:{title:"title",label:"label",placeholder:"placeholder",options:"options",isRequired:"isRequired",selectFormControl:"selectFormControl",isWhite:"isWhite"},features:[i.Vb([{provide:o.p,useExisting:Object(i.ob)(()=>f),multi:!0}])],decls:11,vars:13,consts:[[1,"textfield","mod-block"],[1,"textfield-label"],["multiple","",1,"textfield-input",3,"ngModel","placeholder","disabled","ngModelChange","blur"],[3,"ngPlural",4,"luDisplayer","luDisplayerMultiple"],[3,"options"],[3,"searchFn"],[3,"value",4,"luForOptions"],[3,"ngPlural"],["ngPluralCase","0"],["ngPluralCase","one"],["ngPluralCase","other"],[1,"chip","mod-unkillable"],[3,"value"]],template:function(e,t){1&e&&(i.oc(0,"div",0),i.oc(1,"label",1),i.gd(2),i.nc(),i.oc(3,"lu-select",2),i.vc("ngModelChange",function(e){return t.selectedOptions=e})("ngModelChange",function(){return t.selectChange()})("blur",function(){return t.onTouched()}),i.ed(4,p,4,1,"ng-container",3),i.oc(5,"lu-option-picker-advanced"),i.jc(6,"lu-option-feeder",4),i.jc(7,"lu-option-searcher",5),i.jc(8,"lu-option-pager"),i.ed(9,h,2,2,"lu-option",6),i.nc(),i.jc(10,"lu-input-clearer"),i.nc(),i.nc()),2&e&&(i.ac("mod-white",t.isWhite)("is-required",t.isRequired)("is-invalid",t.shouldDisplayIsInvalidClass()),i.Wb(2),i.hd(t.label),i.Wb(1),i.Gc("ngModel",t.selectedOptions)("placeholder",t.placeholder)("disabled",t.disabled),i.Wb(1),i.Gc("luDisplayerMultiple",!0),i.Wb(2),i.Gc("options",t.options),i.Wb(1),i.Gc("searchFn",t.searchByName))},directives:[c.b,o.r,o.u,r.e,l.r,l.j,l.w,l.p,l.f,r.c,s.r,s.s,l.l],styles:[""]})},Na1t:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),o=n("3Pt+"),a=n("ap3Z"),c=n("sYmb"),r=n("5IIZ"),l=n("fXoL");class s{}s.\u0275mod=l.gc({type:s}),s.\u0275inj=l.fc({factory:function(e){return new(e||s)},providers:[r.a],imports:[[i.c,c.b,a.a,o.m]]})},SKcQ:function(e,t,n){"use strict";var i=n("RWxJ");n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b})},SRFW:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("ofXK"),o=n("Y/4g"),a=n("sYmb"),c=n("fXoL");class r{}r.\u0275mod=c.gc({type:r}),r.\u0275inj=c.fc({factory:function(e){return new(e||r)},imports:[[i.c,o.a,a.b]]})},Ul0c:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("ofXK"),o=n("3Pt+"),a=n("d5vQ"),c=n("v3UZ"),r=n("XNkp"),l=n("fXoL");class s{}s.\u0275mod=l.gc({type:s}),s.\u0275inj=l.fc({factory:function(e){return new(e||s)},imports:[[i.c,r.d,c.n,a.f,o.m,a.g]]})},"Z7L+":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("ofXK"),o=n("3Pt+"),a=n("3YMs"),c=n("d5vQ"),r=n("v3UZ"),l=n("XNkp"),s=n("fXoL");class d{}d.\u0275mod=s.gc({type:d}),d.\u0275inj=s.fc({factory:function(e){return new(e||d)},imports:[[i.c,o.m,o.z,a.b,c.f,r.n,l.d,c.g]]})},"h/zN":function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.Day=0]="Day",e[e.Hour=1]="Hour"}(i||(i={}))},l5mm:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("HDdC"),o=n("D0XW"),a=n("Y7HM");function c(e=0,t=o.a){return(!Object(a.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=o.a),new i.a(n=>(n.add(t.schedule(r,e,{subscriber:n,counter:0,period:e})),n))}function r(e){const{subscriber:t,counter:n,period:i}=e;t.next(n),this.schedule({subscriber:t,counter:n+1,period:i},i)}},"n3+k":function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("fXoL"),o=n("3Pt+"),a=n("LvDl"),c=n("XNkp"),r=n("d5vQ"),l=n("v3UZ"),s=n("ofXK");function d(e,t){if(1&e&&(i.oc(0,"span",6),i.gd(1),i.nc()),2&e){const e=t.$implicit,n=i.zc();i.Gc("ngClass",n._multiple?"chip mod-unkillable":""),i.Wb(1),i.hd(e.name)}}function u(e,t){if(1&e&&i.jc(0,"lu-option-searcher",7),2&e){const e=i.zc();i.Gc("searchFn",e.searchByEntityName)}}function g(e,t){if(1&e&&(i.oc(0,"lu-option",8),i.gd(1),i.nc()),2&e){const e=t.$implicit;i.Gc("value",e),i.Wb(1),i.hd(e.name)}}function p(e,t){1&e&&i.jc(0,"lu-input-clearer")}class h{constructor(e){this.cd=e,this._disabled=!1,this._valueById=!1,this._multiple=!1,this._clearable=!1,this._searchable=!1,this.isError=!1,this.propagateChange=e=>{},this.propagateTouch=e=>{}}set disabled(e){this._disabled="string"==typeof e||e}get disabled(){return this._disabled}set valueById(e){this._valueById="string"==typeof e||e}set multiple(e){this._multiple="string"==typeof e||e}set clearable(e){this._clearable="string"==typeof e||e}set searchable(e){this._searchable="string"==typeof e||e}set model(e){this._valueById?JSON.stringify(e)!==JSON.stringify(this._idsModel)&&(this._idsModel=e,this._model=this.idsToModel(e)):this._model=e}get model(){return this._valueById?this._idsModel:this._model}searchByEntityName(e,t){return-1!==a.deburr(e.name.toLocaleLowerCase()).indexOf(a.deburr(t.toLocaleLowerCase()))}onSelectChange(){if(this._valueById){const e=this.modelToIds(this._model);JSON.stringify(e)!==JSON.stringify(this._idsModel)&&(this._idsModel=e)}this.propagateChange(this.model),this.propagateTouch(this.model)}modelToIds(e){return this._multiple?e&&e.map(e=>e.id):e&&e.id}idsToModel(e){return this._multiple?e&&this.options&&e.map(e=>this.options.find(t=>t.id===e)):this.options.find(t=>t.id===e)}writeValue(e){setTimeout(()=>{this.model=e,this.cd.markForCheck()})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}setDisabledState(e){this.disabled=e}}h.\u0275fac=function(e){return new(e||h)(i.ic(i.j))},h.\u0275cmp=i.cc({type:h,selectors:[["app-entity-select"]],hostAttrs:[1,"textfield"],inputs:{options:"options",placeholder:"placeholder",disabled:"disabled",valueById:"valueById",multiple:"multiple",clearable:"clearable",searchable:"searchable",readonly:"readonly",isError:"isError"},features:[i.Vb([{provide:o.p,useExisting:Object(i.ob)(()=>h),multi:!0}])],decls:7,vars:12,consts:[[1,"textfield-input",3,"ngModel","multiple","placeholder","ngModelChange","blur"],[3,"ngClass",4,"luDisplayer"],[3,"options"],[3,"searchFn",4,"ngIf"],[3,"value",4,"luForOptions"],[4,"ngIf"],[3,"ngClass"],[3,"searchFn"],[3,"value"]],template:function(e,t){1&e&&(i.oc(0,"lu-select",0),i.vc("ngModelChange",function(e){return t._model=e})("ngModelChange",function(){return t.onSelectChange()})("blur",function(){return t.propagateTouch(t.model)}),i.ed(1,d,2,2,"span",1),i.oc(2,"lu-option-picker-advanced"),i.jc(3,"lu-option-feeder",2),i.ed(4,u,1,1,"lu-option-searcher",3),i.ed(5,g,2,2,"lu-option",4),i.nc(),i.ed(6,p,1,0,"lu-input-clearer",5),i.nc()),2&e&&(i.ac("is-readonly",t.readonly)("is-error",t.isError),i.Gc("ngModel",t._model)("multiple",t._multiple)("placeholder",t.placeholder),i.Xb("disabled",!!t.disabled||null)("readonly",!!t.readonly||null),i.Wb(3),i.Gc("options",t.options),i.Wb(1),i.Gc("ngIf",!!t._searchable),i.Wb(2),i.Gc("ngIf",!!t._clearable))},directives:[c.b,o.r,o.u,r.e,l.r,l.j,s.q,l.f,s.o,l.w,l.l,r.c],styles:["app-export-general-edition.textfield[_nghost-%COMP%]   .textfield-input.is-disabled[_ngcontent-%COMP%], app-export-general-edition   .textfield[_nghost-%COMP%]   .textfield-input.is-disabled[_ngcontent-%COMP%], app-export-general-edition.textfield[_nghost-%COMP%]   .textfield-input.is-readonly[_ngcontent-%COMP%], app-export-general-edition   .textfield[_nghost-%COMP%]   .textfield-input.is-readonly[_ngcontent-%COMP%], app-export-general-edition.textfield[_nghost-%COMP%]   .textfield-input[disabled][_ngcontent-%COMP%], app-export-general-edition   .textfield[_nghost-%COMP%]   .textfield-input[disabled][_ngcontent-%COMP%], app-export-general-edition.textfield[_nghost-%COMP%]   .textfield-input[readonly][_ngcontent-%COMP%], app-export-general-edition   .textfield[_nghost-%COMP%]   .textfield-input[readonly][_ngcontent-%COMP%]{background:#fff;cursor:pointer}app-export-general-edition.textfield[_nghost-%COMP%]   .textfield-input.is-disabled[_ngcontent-%COMP%]:after, app-export-general-edition   .textfield[_nghost-%COMP%]   .textfield-input.is-disabled[_ngcontent-%COMP%]:after, app-export-general-edition.textfield[_nghost-%COMP%]   .textfield-input.is-readonly[_ngcontent-%COMP%]:after, app-export-general-edition   .textfield[_nghost-%COMP%]   .textfield-input.is-readonly[_ngcontent-%COMP%]:after, app-export-general-edition.textfield[_nghost-%COMP%]   .textfield-input[disabled][_ngcontent-%COMP%]:after, app-export-general-edition   .textfield[_nghost-%COMP%]   .textfield-input[disabled][_ngcontent-%COMP%]:after, app-export-general-edition.textfield[_nghost-%COMP%]   .textfield-input[readonly][_ngcontent-%COMP%]:after, app-export-general-edition   .textfield[_nghost-%COMP%]   .textfield-input[readonly][_ngcontent-%COMP%]:after{display:none}app-export-general-edition[_nghost-%COMP%]   .textfield-input.is-focused[_ngcontent-%COMP%], app-export-general-edition   [_nghost-%COMP%]   .textfield-input.is-focused[_ngcontent-%COMP%], app-export-general-edition[_nghost-%COMP%]   .textfield-input[_ngcontent-%COMP%]:focus, app-export-general-edition   [_nghost-%COMP%]   .textfield-input[_ngcontent-%COMP%]:focus{box-shadow:inset 0 0 0 2px #7072d2}.mod-multiple.mod-multipleView[_ngcontent-%COMP%]:not(.mod-singleLine)   .lu-select-value[_ngcontent-%COMP%]{align-items:normal;line-height:2.5rem;min-height:2.5rem}"],changeDetection:0})}}]);