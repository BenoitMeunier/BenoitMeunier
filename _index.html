
<!DOCTYPE html>
<html>
	<head>

		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0" />

		<!-- <script type="text/javascript">
			if (!window.frameElement) {
				console.log('page home.html not being loaded in an iframe will be redirected on /figgo');
				window.location = '/figgo';
			}
		</script> -->
		<LINK REL="shortcut icon" HREF="/Figgo/WebnetRTT/Application/Include/img/themes/square/favicon-new.ico" />

		<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700|Source+Code+Pro" rel="stylesheet" type="text/css">

   	<link rel="stylesheet" href="css/combined-2ca0857fe7.css">

		<style type="text/css">
			.emptyState {
				text-align: center;
				margin-top: 10vh;
			}

			.emptyState-image {
				margin-left: -1.5rem;
				margin-bottom: 2rem;
			}

			.emptyState-description {
				color: #9b9eaa;
				margin-bottom: 2rem;
				margin: 0 0 .7rem;
				font-size: 16px;
			}
		</style>

		<script type="text/javascript" src="/Figgo/WebnetRTT/Application/Include/JS/jquery-1_7_1_min.js"></script>
		<script type="text/javascript">
		    var $j = jQuery.noConflict();
		    startDate = new Date();
		</script>


		<script type="text/javascript">

			function getHomeParams() {
				// On met ces constantes directement pour ne pas avoir de problème de loading
				window.JS_CHEMIN_IMG = '/Figgo/WebnetRTT/Application/Images/ImagesWebnet/';
				window.JS_CHEMIN = '/Figgo/WebnetRTT/Application';
				// si GLO_URL_APPLI n'est pas chargé, ça fait planter la page silencieusement ("utile" pour le fileUploader entre autres)
				window.GLO_URL_APPLI = '';

				var homeParams = window.parent.window.homeParams;
				window.homeParams = homeParams;
				window.JS_ID_LANGUE = homeParams.id_langue;
				window.JS_MENU_SELEC = homeParams.menuSelect;
			}

			getHomeParams();

			// <!--
			document.write('<script type="text/javascript" src="/Include/jQuery/jquery.ui.datepicker-'+ window.homeParams.id_langue + '.js?rev=' + window.homeParams.revision + '"></script>');
			document.write('<script type="text/javascript" src="/Figgo/WebnetRTT/Application/Include/JS/Inc_Libelle_'+ window.homeParams.id_langue + '.js?rev=' + window.homeParams.revision + '"></script>');
			document.write('<script type="text/javascript" src="/Include/js/localization/FIACCUEIL.'+ window.homeParams.id_langue + '.js?rev=' + window.homeParams.revision + '"></script>');
			document.write('<script type="text/javascript" src="/Include/js/localization/WFIGGOOuvrables.'+ window.homeParams.id_langue + '.js?rev=' + window.homeParams.revision + '"></script>');
			document.write('<script type="text/javascript" src="/Include/js/localization/FIPLANNING.'+ window.homeParams.id_langue + '.js?rev=' + window.homeParams.revision + '"></script>');
			document.write('<script type="text/javascript" src="/Include/localization/Figgo.News.'+ window.homeParams.id_langue + '.js?rev=' + window.homeParams.revision + '"></script>');
			document.write('<script type="text/javascript" src="/Include/localization/Figgo.Home.'+ window.homeParams.id_langue + '.js?rev=' + window.homeParams.revision + '"></script>');
			document.write('<script type="text/javascript" src="/Include/js/localization/WFIGGO.'+ window.homeParams.id_langue + '.js?rev=' + window.homeParams.revision + '"></script>');
			// -->

		</script>

		<script src="scripts/combined-2f32173474.js"></script>

		<script type="text/javascript">


			function convertToJQueryFormat(momentJsFormat) {
				return momentJsFormat.toLowerCase().replace('yyyy', 'yy');
			}

			function getUrlParam(name){
				var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
				return !!results ? decodeURIComponent(results[1]) : null;
			};

			function setupHome() {
				// Initialisation de la langue pour moment
				moment.locale(window.homeParams.cultureCode);


				window.strMsgAM = GLO_LANG_STR_2425_2;
				window.strMsgPM = GLO_LANG_STR_2426_2;
				window.strMsgDate = GLO_LANG_STR_2431_2;
				window.strMsgAbsent = GLO_LANG_STR_2138_32;
				window.strMsgEditedOn = GLO_LANG_STR_2429_2;
				window.strMsgAttendanceExplanation = GLO_LANG_ANNUAL_SCHEDULE_XLS_ATTENDANCE_EXPLANATION;
				window.strMsgSignature = GLO_LANG_STR_2430_2;
				window.strMsgDlTitle = GLO_LANG_TITLE_PRINTED_LEAVE_PLANNING_DL;
				window.strMsgDlXLS = GLO_LANG_BUTTON_PRINTED_LEAVE_PLANNING_XLS;
				window.strMsgDlPDF = GLO_LANG_BUTTON_PRINTED_LEAVE_PLANNING_PDF;
				window.strMsgDaysWorked = GLO_LANG_STR_483_2;
				window.strMsgHoursWorked = GLO_LANG_STR_2422_2;
				window.strMsgHalfDay = GLO_LANG_PRINTED_LEAVE_PLANNING_HALF_DAY;

				window.hasBlnValidationAuto = getUrlParam("blnValidationAuto") === 'true'
				window.blnRegisterRequest = getUrlParam("blnRegisterRequest") === 'true'

				window.iValidateur1 = parseInt(getUrlParam("iValidateur1"));
				window.iValidateur2 = parseInt(getUrlParam("iValidateur2"));
				window.validateur1 = getUrlParam("validateur1");

				////

				HomeManager.txtNextEvents = GLO_LANG_STR_2759_2 ;

				ARRAY_MONTH = new Array( GLO_LANG_STR_345_39 , GLO_LANG_STR_346_39 , GLO_LANG_STR_347_39 , GLO_LANG_STR_348_39 , GLO_LANG_STR_349_39 , GLO_LANG_STR_350_39 , GLO_LANG_STR_351_39 , GLO_LANG_STR_352_39 , GLO_LANG_STR_353_39 , GLO_LANG_STR_354_39 , GLO_LANG_STR_355_39 , GLO_LANG_STR_356_39 );

				ARRAY_DAY = new Array( GLO_LANG_STR_357_39 , GLO_LANG_STR_358_39 , GLO_LANG_STR_359_39 , GLO_LANG_STR_360_39 , GLO_LANG_STR_361_39 , GLO_LANG_STR_362_39 , GLO_LANG_STR_363_39 );


				window.GLO_FormerEmployees = false;

				var now = new Date();
				GLO_DatePlanning = new Date(now.getFullYear(), now.getMonth(), 1)
				GLO_NbClic = 0;

				if(typeof(GLO_FirstDate)=='undefined')
					GLO_FirstDate  = new Date();
				if(typeof(GLO_LastDate)=='undefined')
					GLO_LastDate = new Date();
				if(typeof(GLO_LastDayOuvre)=='undefined')
					GLO_LastDayOuvre = new Date();
				if(typeof(GLO_LastDateOuvre)=='undefined')
					GLO_LastDateOuvre = new Date();

				GLO_AllowanceReady = false;
				GLO_NatureOfCompte = 0;
				GLO_NbUnite = 0;
				GLO_Depart = "AM";
				GLO_Retour = "PM";

				HomeManager.salarieConnecte = window.homeParams.idUser;
			}
			function initSelectUser() {
				$j("#iUser").select2({
					ajax: {
						url: '/api/v3/leaveUsers/find',
						data: function (term, page) {
					      return {
					      	appInstanceId: homeParams.appInstanceId,
					      	operations: homeParams.homeOperation,
									formerEmployees: GLO_FormerEmployees,
					      	fields: 'id,firstName,lastName,dtContractEnd,collection.count',
					        clue: term,
					        paging: ((page - 1) || 0) * 250 +",250"
					      }
					    },
				      	quietMillis: 250,
						results: function (data, page) {
						    return {
						        results: data.data.items,
				            	more: ((page - 1) * 250) < data.data.count
						    };
						},
					},
					formatResult: function(item) {
						if (item.dtContractEnd && moment().startOf('day').isAfter(item.dtContractEnd)) {
							return item.lastName + ' ' + item.firstName + '<br>' +
							GLO_LANG.Figgo.Home.FORMER_EMPLOYEE_LEFT_ON.replace('{{date}}', moment(item.dtContractEnd).format('LL'));
						}
						return item.lastName + ' ' + item.firstName;
					},
					matcher: function(term, text) {
								var has = true;
								var search = accent_fold(text).toUpperCase();
								var words = accent_fold(term).toUpperCase().split(" ");
								for (var i =0; i < words.length; i++){
									var word = words[i];
									has = has && (search.indexOf(word) >= 0);
								}
								return has;
					},
					formatSelection: function (user) {
						return user.lastName + ' ' + user.firstName;
					},
					formatLoadMore: function(pageNumber) {
						return ' ';
					},
					formatNoMatches: function(term) {
						return GLO_LANG_HOME_SELECT_NO_MATCHES;
					},
					formatSearching: null,
					dropdownCssClass: "iUserDropDown"
				});
				jQuery('#s2id_iUser .select2-chosen').text(window.HomeManager.userSelected.lastName + ' ' + window.HomeManager.userSelected.firstName);
				if (homeParams.seeFormerEmployee) {
					jQuery(".iUserDropDown .select2-search").after(function() {
						return '<label id="formerEmployees_container" class="checkbox palette-secondary" for="formerEmployees">' +
							'<input type="checkbox"' +
								'class="checkbox-input"' +
								'id="formerEmployees"' +
								'name="formerEmployees"' +
								(GLO_FormerEmployees ? 'checked' : '') +
								'>' +
							'<span class="checkbox-label">' +
								'<span class="u-textSmall u-marginTopSmallest">' +
									GLO_LANG.Figgo.Home.INCLUDE_FORMER_EMPLOYEES +
								'</span>' +
							'</span>' +
						'</label>';
					});
					setupFormerEmployeesCheckbox();
				}
			}

		function setupFormerEmployeesCheckbox() {
			setTimeout(function() {
				var div = $j("#formerEmployees_container");
				if (!div) {
					return ;
				}
				div.off("click");
				div.click(function () {
					GLO_FormerEmployees = !GLO_FormerEmployees;
					initSelectUser();
					$j('#s2id_iUser').select2('open');
				});
			});
		}

			function fadeout(){
				if($j("#contenu_request_register")) {
					$j("#contenu_request_register").fadeOut(2000);
				}
			}


			function setupAfterUserSelectSetted() {
				setupHome();

				startMustache();

				startHomeManager();

				LanceHome();

				setTimeout(function(){
					fadeout();
				},5000);
			}

			function setUserDependingOnPermissionOnHome(userSelectedId) {
				var setUserDeferred = $j.Deferred();

				$j.ajax("/api/v3/leaveUsers/scope?appInstanceId=" + homeParams.appInstanceId +
						"&operations=" + homeParams.homeOperation +
						"&id=" + userSelectedId +
						"&fields=id,firstName,lastName,dtContractStart,dtContractEnd,calendarId" +
						"&formerEmployees=true")
					.then(function(result) {
						var userSelected = result.data.items[0];
						var userToSet = !!userSelected ?
																userSelected :
																homeParams.connectedUser;
						changeSelectedUser(userToSet);
						setUserDeferred.resolve(userToSet);
				});
				return setUserDeferred.promise();
			}

			function getFirstAllowedUserIdOnHome() {
				var userIdDeferred = $j.Deferred();

				$j.ajax("/api/v3/leaveUsers/find?appInstanceId=" + homeParams.appInstanceId +
								"&operations=" + homeParams.homeOperation +
									"&limit=1")
					.then(function(result) {
						var users = result.data.items;
						if (users && users.length) {
							userIdDeferred.resolve(users[0].id);
						} else {
							userIdDeferred.reject();
						}
				});
				return userIdDeferred.promise();
			}


			function startHome() {
				initMustacheTemplate();
				startDivHautLoadingTemplate();
				sendFullPageLoadingEvent(false);
				startSelectUserLoading();

				var userSelectedId = getUserSelected();
				// cas vraiment spécifique pour la première connection en tant que Lucca admin
				if (homeParams.connectedUser.id === 0 && !userSelectedId) {
					getFirstAllowedUserIdOnHome()
						.then(function (userId) {
							setUserDependingOnPermissionOnHome(userId)
								.then(function () {
									setupAfterUserSelectSetted();
								});
						})
						.fail(function () {
							displayEmptyState();
						});
				} else if (!!userSelectedId) {
					setUserDependingOnPermissionOnHome(userSelectedId)
						.then(function () {
							setupAfterUserSelectSetted();
						});
				} else  {
					changeSelectedUser(homeParams.connectedUser);
					setupAfterUserSelectSetted();
				}
			}

			window.onload = startHome;

		</script>

		<style id="style_smileys_mustache_container" type="text/css"></style>

		<script id="style_smileys_mustache_template" type="x-template">
			.firstSmiley	{ background-image:url('/Figgo/WebnetRTT/Application/Images/ImagesWebnet/smileys_{{ homeParams.smileyType }}_1.png'); }
			.lastSmiley		{ background-image:url('/Figgo/WebnetRTT/Application/Images/ImagesWebnet/smileys_{{ homeParams.smileyType }}_2.png'); }
			.firstSmileyAM	{ background-image:url('/Figgo/WebnetRTT/Application/Images/ImagesWebnet/smileys_AM_{{ homeParams.smileyType }}_1.png')!important; }
			.firstSmileyPM	{ background-image:url('/Figgo/WebnetRTT/Application/Images/ImagesWebnet/smileys_PM_{{ homeParams.smileyType }}_1.png')!important; }
			.lastSmileyAM	{ background-image:url('/Figgo/WebnetRTT/Application/Images/ImagesWebnet/smileys_AM_{{ homeParams.smileyType }}_2.png')!important; }
			.lastSmileyPM	{ background-image:url('/Figgo/WebnetRTT/Application/Images/ImagesWebnet/smileys_PM_{{ homeParams.smileyType }}_2.png')!important; }
		</script>
	</head>
<body class="homeFiggo">
	<i class="lui icon" style="display:none"></i>

	<div id="request_confirm_mustache_container"></div>

	<script id="request_confirm_mustache_template" type="x-template">
    <div id="fade_request_register">
    	<div id="contenu_request_register" class="homeFeedback success" onclick="hideFeedbackSuccess()" style="float:left;text-align:center;top:0px;margin-left:0px;border:0px solid blue;margin-top:2px;width:780px;">
				{{ GLO_LANG_STR_277_2 }}
				{{^hasBlnValidationAuto}}
					{{#validateur1}}
						{{ GLO_LANG_STR_2575_2 }}
						<b>{{ validateur1 }}</b>
					{{/validateur1}}
				{{/hasBlnValidationAuto}}
	    </div>
    &nbsp;
		</div>
	</script>

	<div id="AlerteValideur">
	</div>

	<div id="news_mustache_container"></div>

	<script id="news_mustache_template" type="x-template">
		{{#homeParams.news.showNews}}
		<div id="news" class="news">
			<span class="lucca-icon icon-info"></span>
			<div>
				<a class="news-close" onclick="readNews('cross');">
					<span data-tracker-solution="Figgo" data-tracker-module="Home" data-tracker-action="NewsLater"></span>
				</a>
				<p><span class="title">{{ homeParams.news.titleKey }}</span></p>
				<p><span class="description">{{ homeParams.news.descriptionKey }}</spans></p>
				<p>
					<a data-tracker-solution="Figgo"
						data-tracker-module="Home"
						data-tracker-action="NewsYes"
						onclick="readNews('link');"
						target="_blank" href="{{homeParams.news.newsUrl}}">
						{{ homeParams.news.linkKey }}
					</a>
				</p>
			</div>
		</div>
		{{/homeParams.news.showNews}}
	</script>


	<div id="select_user_mustache_container"></div>

	<script id="select_user_mustache_template" type="x-template">

		{{#homeParams.showSelectUser}}
			<div class="userSelectContainer">

				{{^isSelectUsersLoaded}}

						<svg class="contentLoader" xmlns="http://www.w3.org/2000/svg" version="1.1" shape-rendering="crispEdges" height="55">
							<defs>
								<mask id="selectUserMask">
									<rect width="100%" height="100%" fill="White"></rect>

									<rect x="15" y="15" height="30" width="200"></rect>
								</mask>
							</defs>
							<rect width="100%" height="100%" fill="white" mask="url(#selectUserMask)"></rect>
						</svg>

				{{/isSelectUsersLoaded}}

				{{#isSelectUsersLoaded}}
					<div class="userSelectLabel">{{GLO_LANG_MONTHLY_ENTRIES_COLLABORATOR}}</div>
					<input name="iUser" id="iUser" class="Select_220" onchange="onChangeSelectUser();" style="visibility: visible;"/>
				{{/isSelectUsersLoaded}}
			</div>
		{{/homeParams.showSelectUser}}

	</script>

	<div id="div_haut_loading_mustache_container"></div>

	<script id="div_haut_loading_mustache_template" type="x-template">
		<div id="div_haut_loading">
			<div class="container u-paddingTopReset">
				<div id="div_demande_loading"
					{{#GLO_AnnualPlanning}}
						class="yearPlanning"
					{{/GLO_AnnualPlanning}}
					>
					<div id="calendarLoader" class="contentLoader">
						<svg class="calendarLoader-l" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1170 1000" shape-rendering="crispEdges" width="1170" height="1000">
							<defs>
								<mask id="calendarLoaderMask-l">
									<rect x="-1" y="-1" width="1172" height="1000" fill="White" ></rect>

									<rect class="title" x="0" y="25" height="30" width="400"></rect>
									<rect class="dayHeader" x="148" y="88" height="18" width="992"></rect>

									<g>
										<rect class="monthLine" x="0" y="127" height="20" width="100"></rect>
										<rect class="monthLine" x="0" y="166" height="20" width="100"></rect>
										<rect class="monthLine" x="0" y="205" height="20" width="90"></rect>
										<rect class="monthLine" x="0" y="244" height="20" width="80"></rect>
										{{#GLO_AnnualPlanning}}
											<rect class="monthLine" x="0" y="283" height="20" width="100"></rect>
											<rect class="monthLine" x="0" y="322" height="20" width="100"></rect>
											<rect class="monthLine" x="0" y="361" height="20" width="90"></rect>
											<rect class="monthLine" x="0" y="400" height="20" width="80"></rect>
											<rect class="monthLine" x="0" y="439" height="20" width="100"></rect>
											<rect class="monthLine" x="0" y="478" height="20" width="100"></rect>
											<rect class="monthLine" x="0" y="517" height="20" width="90"></rect>
											<rect class="monthLine" x="0" y="556" height="20" width="80"></rect>
										{{/GLO_AnnualPlanning}}
									</g>

									<g>
										<rect class="dayLine" x="148" y="121" height="32" width="992"></rect>
										<rect class="dayLine" x="148" y="160" height="32" width="960"></rect>
										<rect class="dayLine" x="148" y="199" height="32" width="992"></rect>
										<rect class="dayLine" x="148" y="238" height="32" width="960"></rect>
										{{#GLO_AnnualPlanning}}
											<rect class="dayLine" x="148" y="277" height="32" width="992"></rect>
											<rect class="dayLine" x="148" y="316" height="32" width="960"></rect>
											<rect class="dayLine" x="148" y="355" height="32" width="992"></rect>
											<rect class="dayLine" x="148" y="394" height="32" width="960"></rect>
											<rect class="dayLine" x="148" y="433" height="32" width="992"></rect>
											<rect class="dayLine" x="148" y="472" height="32" width="960"></rect>
											<rect class="dayLine" x="148" y="511" height="32" width="992"></rect>
											<rect class="dayLine" x="148" y="550" height="32" width="960"></rect>
										{{/GLO_AnnualPlanning}}

									</g>
								</mask>
							</defs>
							<rect width="100%" height="100%" fill="white" mask="url(#calendarLoaderMask-l)"></rect>
						</svg>
						<svg class="calendarLoader-m" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1170 1000" shape-rendering="crispEdges" width="1170" height="1000">
							<defs>
								<mask id="calendarLoaderMask-m">
									<rect x="-1" y="-1" width="1172" height="1000" fill="White" ></rect>

									<rect class="title" x="0" y="25" height="30" width="400"></rect>
									<rect class="dayHeader" x="134" y="88" height="18" width="806"></rect>

									<g>
										<rect class="monthLine" x="0" y="127" height="14" width="100"></rect>
										<rect class="monthLine" x="0" y="160" height="14" width="100"></rect>
										<rect class="monthLine" x="0" y="193" height="14" width="90"></rect>
										<rect class="monthLine" x="0" y="226" height="14" width="80"></rect>
										{{#GLO_AnnualPlanning}}
											<rect class="monthLine" x="0" y="259" height="14" width="100"></rect>
											<rect class="monthLine" x="0" y="292" height="14" width="100"></rect>
											<rect class="monthLine" x="0" y="325" height="14" width="90"></rect>
											<rect class="monthLine" x="0" y="358" height="14" width="80"></rect>
											<rect class="monthLine" x="0" y="391" height="14" width="100"></rect>
											<rect class="monthLine" x="0" y="424" height="14" width="100"></rect>
											<rect class="monthLine" x="0" y="457" height="14" width="90"></rect>
											<rect class="monthLine" x="0" y="490" height="14" width="80"></rect>
										{{/GLO_AnnualPlanning}}
									</g>

									<g>
										<rect class="dayLine" x="134" y="121" height="26" width="806"></rect>
										<rect class="dayLine" x="134" y="154" height="26" width="780"></rect>
										<rect class="dayLine" x="134" y="187" height="26" width="806"></rect>
										<rect class="dayLine" x="134" y="220" height="26" width="780"></rect>
										{{#GLO_AnnualPlanning}}
											<rect class="dayLine" x="134" y="253" height="26" width="806"></rect>
											<rect class="dayLine" x="134" y="286" height="26" width="780"></rect>
											<rect class="dayLine" x="134" y="319" height="26" width="806"></rect>
											<rect class="dayLine" x="134" y="352" height="26" width="780"></rect>
											<rect class="dayLine" x="134" y="385" height="26" width="806"></rect>
											<rect class="dayLine" x="134" y="418" height="26" width="780"></rect>
											<rect class="dayLine" x="134" y="451" height="26" width="806"></rect>
											<rect class="dayLine" x="134" y="484" height="26" width="780"></rect>
										{{/GLO_AnnualPlanning}}
									</g>
								</mask>
							</defs>
							<rect width="100%" height="100%" fill="white" mask="url(#calendarLoaderMask-m)"></rect>
						</svg>
						<svg class="calendarLoader-s" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1170 1000" shape-rendering="crispEdges" width="1170" height="1000">
							<defs>
								<mask id="calendarLoaderMask-s">
									<rect x="-1" y="-1" width="1172" height="1000" fill="White" ></rect>

									<rect class="title" x="0" y="25" height="30" width="400"></rect>
									<rect class="dayHeader" x="110" y="88" height="18" width="682"></rect>

									<g>
										<rect class="monthLine" x="0" y="127" height="10" width="100"></rect>
										<rect class="monthLine" x="0" y="156" height="10" width="100"></rect>
										<rect class="monthLine" x="0" y="184" height="10" width="90"></rect>
										<rect class="monthLine" x="0" y="214" height="10" width="80"></rect>
										{{#GLO_AnnualPlanning}}
											<rect class="monthLine" x="0" y="244" height="10" width="100"></rect>
											<rect class="monthLine" x="0" y="274" height="10" width="100"></rect>
											<rect class="monthLine" x="0" y="304" height="10" width="90"></rect>
											<rect class="monthLine" x="0" y="334" height="10" width="80"></rect>
											<rect class="monthLine" x="0" y="364" height="10" width="100"></rect>
											<rect class="monthLine" x="0" y="394" height="10" width="100"></rect>
											<rect class="monthLine" x="0" y="424" height="10" width="90"></rect>
											<rect class="monthLine" x="0" y="454" height="10" width="80"></rect>
										{{/GLO_AnnualPlanning}}

									</g>

									<g>
										<rect class="dayLine" x="110" y="121" height="22" width="682"></rect>
										<rect class="dayLine" x="110" y="150" height="22" width="660"></rect>
										<rect class="dayLine" x="110" y="179" height="22" width="682"></rect>
										<rect class="dayLine" x="110" y="208" height="22" width="660"></rect>
										{{#GLO_AnnualPlanning}}
											<rect class="dayLine" x="110" y="237" height="22" width="682"></rect>
											<rect class="dayLine" x="110" y="266" height="22" width="660"></rect>
											<rect class="dayLine" x="110" y="295" height="22" width="682"></rect>
											<rect class="dayLine" x="110" y="324" height="22" width="660"></rect>
											<rect class="dayLine" x="110" y="353" height="22" width="682"></rect>
											<rect class="dayLine" x="110" y="382" height="22" width="660"></rect>
											<rect class="dayLine" x="110" y="411" height="22" width="682"></rect>
											<rect class="dayLine" x="110" y="440" height="22" width="660"></rect>
										{{/GLO_AnnualPlanning}}
									</g>
								</mask>
							</defs>
							<rect width="100%" height="100%" fill="white" mask="url(#calendarLoaderMask-s)"></rect>
						</svg>
					</div>
				</div>
			</div>
		</div>
	</script>

	<div id="div_haut_mustache_container"></div>

	<script id="div_haut_mustache_template" type="x-template">

		<div id="div_haut">

			<div class="container u-paddingTopSmall u-paddingBottomReset">
				<div id="div_demande">
					<div class="grid mod-xsMiddle u-marginBottomSmall">
						<div class="grid-xs4">
							<h1 class="u-marginBottomReset">
								{{ GLO_LANG_STR_2707_2 }}
							</h1>
						</div>

						<div class="grid-xs advancedOptions-container">
							<div id="regles" style="display: none" class="u-marginRightSmall">
								<button class="button mod-link palette-primary u-paddingLeftSmall u-paddingRightSmall" onclick="sendShowLeavePoliciesEvent();return false;" data-tracker-solution="Figgo" data-tracker-module="Home" data-tracker-action="Rules">
									<i class="lucca-icon icon-book size-big u-marginRightSmallest" aria-hidden="true"></i>
									{{ GLO_LANG_STR_2789_2 }}
								</button>
							</div>

							<div id="zonesVacancesScolaireOptions" class="u-marginRightSmall">
								<input type="text" id="zonesVacancesScolairesSelect" onchange="onChangeVacancesScolaires(this)">
							</div>


							<div class="u-marginRightSmall">
								<select id="monthsDisplay" name="monthDisplay" onchange="onChangeSelectMonthsDisplay(this)">
									<option value="false"
										{{^GLO_AnnualPlanning}}
											selected="selected"
										{{/GLO_AnnualPlanning}}
									>
										{{GLO_LANG.Figgo.Home.PLANNING_FOUR_MONTHS}}
									</option>
									<option value="true"
										{{#GLO_AnnualPlanning}}
											selected="selected"
										{{/GLO_AnnualPlanning}}
									>
										{{GLO_LANG.Figgo.Home.PLANNING_TWELVE_MONTHS}}
									</option>
								</select>

							</div>

							<p class="advancedOptions">
								<button onclick="AdvancedOptions();" class="button mod-link palette-grey u-paddingLeftSmaller u-paddingRightSmaller" title="{{ GLO_LANG_STR_997_27 }}" onmouseover="ShowTitleLikeTooltip(this, event)" onmouseout="HideTitleLikeTooltip(this, event)">
									<i class="lucca-icon icon-ellipsis size-big" aria-hidden="true"></i>
								</button>
							</p>
						</div>
					</div>
					<div class="optionsAffichage">
						<div id="toggleOptions">
							<div class="div_checkbox u-marginTopSmall u-marginLeftSmaller">
								<label class="checkbox mod-icon icon-watch" for="displayLegend">
									<input type="checkbox"
										class="checkbox-input"
										id="displayLegend"
										name="displayLegend"
										{{#GLO_DisplayLegend}}
											checked
										{{/GLO_DisplayLegend}}
										data-tracker-solution="Figgo"
										data-tracker-module="Home"
										data-tracker-action="DisplayLegend"/>
									<span class="checkbox-label">
										{{#GLO_DisplayLegend}}
											{{ GLO_LANG.Figgo.Home.HOME_OPTION_HIDE_LEGEND }}
										{{/GLO_DisplayLegend}}
										{{^GLO_DisplayLegend}}
											{{ GLO_LANG.Figgo.Home.HOME_OPTION_DISPLAY_LEGEND }}
										{{/GLO_DisplayLegend}}
									</span>
								</label>
							</div>
							<div id="red-periods-gridcell" class="div_checkbox u-marginTopSmall u-marginLeftSmaller">
								<label class="checkbox mod-icon icon-watch" for="redPeriods">
									<input type="checkbox"
										class="checkbox-input"
										id="redPeriods"
										name="planning"
										{{#GLO_ShowRedPeriods}}
											checked
										{{/GLO_ShowRedPeriods}}
										data-tracker-solution="Figgo"
										data-tracker-module="Home"
										data-tracker-action="RedPeriod"/>
									<span class="checkbox-label">
										{{#GLO_DisplayLegend}}
											{{ GLO_LANG.Figgo.Home.HOME_OPTION_HIDE_RED_PERIOD }}
										{{/GLO_DisplayLegend}}
										{{^GLO_DisplayLegend}}
											{{ GLO_LANG.Figgo.Home.HOME_OPTION_DISPLAY_RED_PERIOD }}
										{{/GLO_DisplayLegend}}
									</span>
								</label>
							</div>
							<button onclick="printPlanning();"
								class="button buttonPrint mod-link u-fontWeightNormal palette-grey u-paddingLeftSmaller u-paddingRightSmaller">
								<i class="lucca-icon icon-print u-marginRightSmallest size-big" aria-hidden="true"></i>
								<span class="buttonPrint-text">{{GLO_LANG_ANNUAL_SCHEDULE_SCHEDULE_PRINT}}</span>
							</button>
						</div>
					</div>

					<div id="demande">
						<div class="planningAndOptions" id="infos2BeCharged">
							<div id="div_demande_planning"></div>
							<div class="subinfos">
								<div class="div_checkbox" id="displayRemoteWorkToggle" style="display: none;">
									<label class="checkbox palette-secondary" for="displayRemoteWork">
										<input type="checkbox"
											class="checkbox-input"
											id="displayRemoteWork"
											name="displayRemoteWork"
											data-tracker-solution="Figgo"
											data-tracker-module="Home"
											data-tracker-action="DisplayRemoteWork"/>
										<span class="checkbox-label">
											{{ GLO_LANG.Figgo.Home.HOME_OPTION_DISPLAY_REMOTEWORK }}
										</span>
									</label>
								</div>
								<div id="legends">
							</div>

							</div>

							<div id="div_under_planning">
								<button id="removePlanningSelection" class="ui-icon ui-icon-closethick" onclick="cancelDemand()" title="{{ GLO_LANG_STR_727_5 }} " data-tracker-solution="Figgo" data-tracker-module="Home" data-tracker-action="CancelSelection"></button>
								<div id="demandeDetails">
									<div class="grid">
										<div class="grid-xs2">
											<div class="bloc_date">
												<span>{{ GLO_LANG_STR_2742_2 }} </span>
												<div class="div_date">
													<input type="text" readonly class="InputDate_100_NoBorder"  id="firstDate" name="firstDate" value="">
												</div>
												<div class="div_radio">
													<div class="div_AM u-marginBottomSmallest">
														<input type="radio" id="departAM" checked name="depart" value="AM" onClick="CoherenceDemi('depart');ChangeNbJoursOuvres();">
														<label for="departAM">{{ GLO_LANG_STR_299_3 }} </label>
													</div>
													<div class="div_PM u-marginBottomSmallest">
															<input type="radio" id="departPM" name="depart" value="PM" onClick="CoherenceDemi('depart');ChangeNbJoursOuvres();">
														<label for="departPM">{{ GLO_LANG_STR_300_3 }} </label>
													</div>
												</div>
											</div>
										</div>
										<div class="grid-xs2">
											<div class="bloc_date">
												<span>{{ GLO_LANG_STR_2743_2 }} </span>
												<div class="div_date">
													<input type="text" readonly class="InputDate_100_NoBorder"  id="lastDate" name="lastDate" value="">
												</div>
												<div class="div_radio">
													<div class="div_AM">
														<input type="radio" id="retourAM" name="retour" value="AM" onClick="CoherenceDemi('retour');ChangeNbJoursOuvres();">
														<label for="retourAM">{{ GLO_LANG_STR_299_3 }} </label>
													</div>
													<div class="div_PM">
														<input type="radio" id="retourPM" name="retour" checked value="PM" onClick="CoherenceDemi('retour');ChangeNbJoursOuvres();">
														<label for="retourPM">{{ GLO_LANG_STR_300_3 }} </label>
													</div>
												</div>
											</div>
										</div>
										<div class="grid-xs6">
											<div id="texte_aide_PopUpChoixCompte" class="div_radio">&nbsp;</div>
										</div>
										<div class="grid-xs2 text-center">
											<div id="div_jour" class="div_jour u-textCenter">
												<span id="strIntroJoursOuvres">{{ GLO_LANG_STR_1838_3 }} </span>
												<span id="strJoursOuvres"></span>
											</div>
											<div class="div_jour_spinner loader"></div>
											<div class="continuerContainer u-textCenter">
												<div id="bloc_continuer">
													<div class="div_btnEnvoyer_home">
														<div id="div_btn_continuer">
															<span id="btn_continuerTooltip" onmouseover="ShowTitleLikeTooltip(this, event)" onmouseout="HideTitleLikeTooltip(this, event)"></span>
															<input id="btn_continuer" type="button" value="{{ GLO_LANG_STR_1603_40 }} " class="button palette-secondary" border="0" name="imageField" ondblclick="DoubleClic();" onclick="sendShowRepartition();" data-tracker-solution="Figgo" data-tracker-module="Home" data-tracker-action="ContinueSelection">
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div id="div_advanced_options" onmouseover="gestionOpacity('div_advanced_options',1);">
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>

	</script>

	<div id="div_bas_loading" class="u-paddingTopReset">
		<div class="container u-paddingTopReset u-paddingLeftSmallest">
			<div class="grid mod-xsTop contentLoader">
				<div class="grid-md" id="compteurs">
					<div id="balanceLoader">
						<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-15 0 880 240" shape-rendering="crispEdges" width="880">
							<defs>
								<mask id="balanceMask">
									<rect x="-100%" y="-100%" width="300%" height="300%" fill="White"></rect>

									<rect x="0" y="25" height="25" width="160"></rect>
									<rect x="0" y="92" height="25" width="100%"></rect>
									<rect x="0" y="132" height="25" width="100%"></rect>
									<rect x="0" y="170" height="25" width="100%"></rect>
								</mask>
							</defs>
							<rect width="300%" height="300%" fill="#F7F9FD" mask="url(#balanceMask)" x="-100%" y="-100%"></rect>
						</svg>
					</div>
				</div>
				<div class="grid-md" id="div_bloc_statut">
					<div id="maginHistoryLoader">
					</div>
					<div id="historyLoader">
						<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-15 0 880 240" shape-rendering="crispEdges" width="880">
							<defs>
								<rect width="300%" height="300%" fill="red" x="-100%" y="-100%"></rect>
								<mask id="historyMask">
									<rect x="-100%" y="-100%" width="300%" height="300%" fill="White"></rect>

									<rect x="0" y="25" height="25" width="160"></rect>
									<rect x="0" y="70" height="15" width="160"></rect>
									<rect x="0" y="107" height="15" width="130"></rect>
									<rect x="0" y="144" height="15" width="160"></rect>
								</mask>
							</defs>
							<rect width="300%" height="300%" fill="white" mask="url(#historyMask)" x="-100%" y="-100%"></rect>
						</svg>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div id="div_bas_mustache_container"></div>

	<script id="div_bas_mustache_template" type="x-template">

		<div id="div_bas">
			<div class="container u-paddingTopSmaller">
				<div class="grid mod-xsTop">
					<div class="grid-md" id="compteurs">
						<div id="encadre_compteurs">

							<div class="grid">
								<div class="grid-xs6">
									<h2 class="u-marginBottomReset">{{ GLO_LANG_STR_2706_2 }} </h2>
								</div>
							</div>

							<div id="div_bloc_compteurs">
								<!--contenu généré par la fonction LanceBlocCompteurs() de JS_Home.js -->
							</div>
						</div>
					</div>
					<div class="grid-md" id="div_bloc_statut">
						<div class="history">
							<h2 class="history-title">{{ GLO_LANG_TITLE_PERSONNAL_FOLLOW_UP }} </h2>
							<div class="history-item planning_print planning_print_hidden">
								<a href="#" class="link mod-notUnderlined" onclick="ShowPrintedLeavePlanning(&quot;{{ GLO_LANG_TITLE_PRINTED_LEAVE_PLANNING }} &quot;); return false;" data-tracker-solution="Figgo" data-tracker-module="Home" data-tracker-action="PrintedLeavePlanning">
									<i class="lucca-icon icon-paste"></i> {{ GLO_LANG_LINK_PRINTED_LEAVE_PLANNING }}
								</a>
							</div>
							<div class="history-item">
								<a id="aAnnualDetails" href="#" class="link mod-notUnderlined" onclick="openAnnualDetails();return false;" data-tracker-solution="Figgo" data-tracker-module="Home" data-tracker-action="AnnualDetails">
									<i class="lucca-icon icon-dashboard"></i> {{ GLO_LANG_TITLE_PERSONNAL_YEAR_STATISTICS }}
								</a>
							</div>
							<div class="history-item">
								<a href="#" class="link mod-notUnderlined" onclick="sendShowLeavesHistoryEvent(); return false;" data-tracker-solution="Figgo" data-tracker-module="Home" data-tracker-action="RequestsHistory">
									<i class="lucca-icon icon-history"></i> {{ GLO_LANG_LEAVES_HISTORY }}
								</a>
							</div>
							<div class="history-item" id="ouvrablesInfosText">
							</div>
							<div class="history-item">
								<a id="aLastActions" href="#" class="link mod-notUnderlined" onclick="openLastActions();return false;" data-tracker-solution="Figgo" data-tracker-module="Home" data-tracker-action="LastActions">
									<i class="lucca-icon icon-list"></i> {{GLO_LANG_TITLE_PERSONNAL_RECENT_ACTIONS}}
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</script>


	<div id="home_mustache_container"></div>

	<script id="home_mustache_template" type="x-template">

		<div id="footer_container" style="position:relative;">
		</div>

		<div id="divPrintedLeavePlanning" style="padding: 0; background-color: white; display: none;">
			<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
				<span class="ui-dialog-title"></span>
				<a role="button" class="ui-dialog-titlebar-close ui-corner-all" href="#"><span class="ui-icon ui-icon-closethick">close</span></a>
			</div>
			<div id="spanPrintedLeavePlanning"><div class="loader mod-big"></div></div>
		</div>

		<div id="divSoldes" title="{{ GLO_LANG_STR_1895_39 }} " style="padding: 0; background-color: white; display:none">
			<span id="spanSoldes"><div class="loader mod-big"></div></span>
		</div>

		<div id="divDetail" title="" style="padding: 0; background-color: white">
			<span id="spanDetail"></span>
		</div>

		<div id="divLeaveRequestNotTrue" class="FontTexteNormalNoir" title="{{ GLO_LANG_INCORRECTED_LEAVE_REQUEST }} " style="padding: 0; background-color: white">

			<div id="bodyLeaveRequestNotTrue" style="width:500px;padding-left:20px;padding-top:25px">
				<span id="spanLeaveRequestNotTrue"></span>
			</div>
			<!--<div id="footerLeaveRequestNotTrue" style="width:550px;padding-left:20px;padding-top:25px">
				<span>{{ GLO_LANG_PUT_YOUR_LEAVE_REQUEST_IN_TWO_TIMES }} </span>
			</div>-->

		</div>

		<div id="divCET" title="{{ GLO_LANG_STR_2506_54 }} " style="padding: 0; background-color: White; display:none;">
			<div style="margin: auto">
				<table border="0" width="980px" class="SoldeManager" id="divCETManager" style="text-align: center;">
					<tr>
						<td style="width:980px;" >
							{{ GLO_LANG_STR_2493_54 }}
							<select id="selectCompteCET" onChange="CETSelectChanged()">

							</select>
						</td>
					</tr>
				</table>
				<div id="result_manager"></div>
				<iframe width="980" frameborder="0" id="iframeResultCET"  name="iframeResultCET" style="min-height:400px;"></iframe>

			</div>
		</div>


<!-- Demande passée et validée -->
<div class="hover planningpopin" id="planning">
	<div class="popinarrow"></div>
  <div class="close"> </div>
	<h1 id="popin-Header"></h1>
	<p id="popin-Description"></p>
    <!-- J'aurais aimé éviter ça mais quand il faut, il faut ... -->
	<table id="bottomWrapper">
		<tr>
		<td id="bottomLeft">
					<p id="popin-CommentTextArea"></p>
		</td>
		<td id="bottomRight">
			<div id="justifUploadAreaPopin" class="justifUploadArea showJoinLabel"><div class="errorMessage" id="errorUploadPopin"></div>
			</div>
		</td>
		</tr>
	</table>
	<input type="hidden" id="justifIdPopin" name="justifTempId" value="" />
	<input type="hidden" id="justifNamePopin" name="justifTempName" value="" />
	<p class="detailopener opendetail" id="pv">Afficher les détails de cette demande</p>
	<div id="detailpv" class="detail">
		<p class="detailopener hidedetail pv">Masquer les détails</p>
		<div id="comments">

		</div>
		<h2 id="repartitionCaption"></h2>
		<table class="repartition">
			<tr>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
			</tr>
		</table>
	</div>
	<div class="actions">
		<div class="btn relance" id="relancer">Relancer mon manager</div>
		<div class="btn suppression lucca-btn btn-orange" id="demandeSuppression">Demander la suppression</div>
		<div class="btn suppression lucca-btn btn-orange" id="supprimer">Supprimer cette demande</div>
		<div class="btn relance" id="valider">Valider cette demande</div>
		<div class="btn suppression" id="refuser">Valider cette demande</div>
	</div>
</div>

<div class="popup">
	<div class="close"></div>
	<h1 id="popup-Header"></h1>
	<div class="popupbody">
		<p id="description"></p>
		<textarea id="comment" placeholder="Vous pouvez accompagner votre relance d'un message à l'attention de votre manager"></textarea>
		<p id="counterContainer"></p>
		<div class="actions">
			<div class="btn action suppression"></div>
			<span class="retour">{{ GLO_LANG_BACK_TO_REQUEST }} </span>
		</div>
	</div>
	<div class="popupreply"></div>
</div>

<!-- Popup infos jours ouvralbes à poser -->
<div class="hover planningpopin" id="ouvrables" title="{{ GLO_LANG_STR_2362_3 }} ">
	<div class="popupbody"></div>
</div>

<div id="justificationPopup">
	<div class="close"></div>
	<div class="justifUploadArea">

	</div>
	<span id="justificationPopupError" class="errorMessage"></span>
</div>

	</script>

	<div id="empty_state_mustache_container"></div>

	<script id="empty_state_mustache_template" type="x-template">
		<section class="emptyState">
			<img class="emptyState-image" src="/Figgo/WebnetRTT/Application/Images/ImagesWebnet/placeholder_calendar.svg">
			<p class="emptyState-description">
				{{ GLO_LANG.Figgo.Home.HOME_EMPTY_STATE }}
			</p>
		</section>
	</script>


<script src="/static/figgo/www/lib/google-analytics.js" async></script>

</body>
</html>
